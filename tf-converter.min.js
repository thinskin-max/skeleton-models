
  @license
  Copyright 2024 Google LLC. All Rights Reserved.
  Licensed under the Apache License, Version 2.0 (the License);
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
 
  httpwww.apache.orglicensesLICENSE-2.0
 
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an AS IS BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  =============================================================================
 
!function(e,t){object==typeof exports&&undefined!=typeof modulet(exports,require(@tensorflowtfjs-core))function==typeof define&&define.amddefine([exports,@tensorflowtfjs-core],t)t((e=undefined!=typeof globalThisglobalThiseself).tf=e.tf{},e.tf)}(this,(function(e,t){use strict;function n(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if(default!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.getr{enumerable!0,getfunction(){return e[n]}})}})),t.default=e,t}function r(e,t){return t.forEach((function(t){t&&string!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(default!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.getr{enumerable!0,getfunction(){return t[n]}})}}))})),e}var a=n(t);t.env().registerFlag(KEEP_INTERMEDIATE_TENSORS,(function(){return!1}),(function(e){e&&console.warn(Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2ebenchmarks model_config.js. This significantly impacts performance.)}));var o,s,i=function(e,t){return i=Object.setPrototypeOf{__proto__[]}instanceof Array&&function(e,t){e.__proto__=t}function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function u(e,t){if(function!=typeof t&&null!==t)throw new TypeError(Class extends value +String(t)+ is not a constructor or null);function n(){this.constructor=e}i(e,t),e.prototype=null===tObject.create(t)(n.prototype=t.prototype,new n)}function c(e,t,n,r){return new(n(n=Promise))((function(a,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.donea(e.value)(t=e.value,t instanceof ntnew n((function(e){e(t)}))).then(s,i)}u((r=r.apply(e,t[])).next())}))}function p(e,t){var n,r,a,o,s={label0,sentfunction(){if(1&a[0])throw a[1];return a[1]},trys[],ops[]};return o={nexti(0),throwi(1),returni(2)},function==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError(Generator is already executing.);for(;s;)try{if(n=1,r&&(a=2&o[0]r.returno[0]r.throw((a=r.return)&&a.call(r),0)r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0case 1a=o;break;case 4return s.label++,{valueo[1],done!1};case 5s.label++,r=o[1],o=[0];continue;case 7o=s.ops.pop(),s.trys.pop();continue;defaultif(!(a=s.trys,(a=a.length0&&a[a.length-1])6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!ao[1]a[0]&&o[1]a[3])){s.label=o[1];break}if(6===o[0]&&s.labela[1]){s.label=a[1],a=o;break}if(a&&s.labela[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{valueo[0]o[1]void 0,done!0}}([o,i])}}}function l(e){var t=function==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&number==typeof e.length)return{nextfunction(){return e&&r=e.length&&(e=void 0),{valuee&&e[r++],done!e}}};throw new TypeError(tObject is not iterable.Symbol.iterator is not defined.)}function d(e,t){var n=function==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),s=[];try{for(;(void 0===tt-- 0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){a={errore}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return s}function h(e,t,n){if(n2===arguments.length)for(var r,a=0,o=t.length;ao;a++)!r&&a in t(r(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(rArray.prototype.slice.call(t))}!function(e){e[e.DT_INVALID=0]=DT_INVALID,e[e.DT_FLOAT=1]=DT_FLOAT,e[e.DT_DOUBLE=2]=DT_DOUBLE,e[e.DT_INT32=3]=DT_INT32,e[e.DT_UINT8=4]=DT_UINT8,e[e.DT_INT16=5]=DT_INT16,e[e.DT_INT8=6]=DT_INT8,e[e.DT_STRING=7]=DT_STRING,e[e.DT_COMPLEX64=8]=DT_COMPLEX64,e[e.DT_INT64=9]=DT_INT64,e[e.DT_BOOL=10]=DT_BOOL,e[e.DT_QINT8=11]=DT_QINT8,e[e.DT_QUINT8=12]=DT_QUINT8,e[e.DT_QINT32=13]=DT_QINT32,e[e.DT_BFLOAT16=14]=DT_BFLOAT16,e[e.DT_QINT16=15]=DT_QINT16,e[e.DT_QUINT16=16]=DT_QUINT16,e[e.DT_UINT16=17]=DT_UINT16,e[e.DT_COMPLEX128=18]=DT_COMPLEX128,e[e.DT_HALF=19]=DT_HALF,e[e.DT_RESOURCE=20]=DT_RESOURCE,e[e.DT_VARIANT=21]=DT_VARIANT,e[e.DT_UINT32=22]=DT_UINT32,e[e.DT_UINT64=23]=DT_UINT64,e[e.DT_FLOAT_REF=101]=DT_FLOAT_REF,e[e.DT_DOUBLE_REF=102]=DT_DOUBLE_REF,e[e.DT_INT32_REF=103]=DT_INT32_REF,e[e.DT_UINT8_REF=104]=DT_UINT8_REF,e[e.DT_INT16_REF=105]=DT_INT16_REF,e[e.DT_INT8_REF=106]=DT_INT8_REF,e[e.DT_STRING_REF=107]=DT_STRING_REF,e[e.DT_COMPLEX64_REF=108]=DT_COMPLEX64_REF,e[e.DT_INT64_REF=109]=DT_INT64_REF,e[e.DT_BOOL_REF=110]=DT_BOOL_REF,e[e.DT_QINT8_REF=111]=DT_QINT8_REF,e[e.DT_QUINT8_REF=112]=DT_QUINT8_REF,e[e.DT_QINT32_REF=113]=DT_QINT32_REF,e[e.DT_BFLOAT16_REF=114]=DT_BFLOAT16_REF,e[e.DT_QINT16_REF=115]=DT_QINT16_REF,e[e.DT_QUINT16_REF=116]=DT_QUINT16_REF,e[e.DT_UINT16_REF=117]=DT_UINT16_REF,e[e.DT_COMPLEX128_REF=118]=DT_COMPLEX128_REF,e[e.DT_HALF_REF=119]=DT_HALF_REF,e[e.DT_RESOURCE_REF=120]=DT_RESOURCE_REF,e[e.DT_VARIANT_REF=121]=DT_VARIANT_REF,e[e.DT_UINT32_REF=122]=DT_UINT32_REF,e[e.DT_UINT64_REF=123]=DT_UINT64_REF}(o(o={})),function(e){var t;(t=e.CheckpointFormatVersion(e.CheckpointFormatVersion={}))[t.LEGACY=0]=LEGACY,t[t.V1=1]=V1,t[t.V2=2]=V2}(s(s={}));var f={};function m(e){return f[e]}function y(e,n,r,a,o){var s=n.inputParams[e];if(s&&void 0!==s.inputIndexStart){var i=s.inputIndexStart,u=0===s.inputIndexEndvoid 0void 0===s.inputIndexEndi+1s.inputIndexEnd,c=i0n.inputNames.length+ii;if(tensor===s.type)return v(n.inputNames[c],r,a,o);if(tensors===s.type){var p=n.inputs.slice(i,u);return n.inputNames.slice(i,u).filter((function(e,t){var n;returnNoOp!==(null===(n=p[t])void 0===nvoid 0n.op)})).map((function(e){return v(e,r,a,o)}))}var l=v(n.inputNames[c],r,a,o),d=l.dataSync();returnnumber===s.typed[0]t.util.toNestedArray(l.shape,d)}var h=n.attrParams[e];return h&&h.value}function v(e,t,n,r){var a=d(N(e,n),2),o=a[0],s=a[1];if(null!=r){var i=r.getHashTableHandleByName(o);if(null!=i)return i}var u=n.currentContextIds.find((function(e){return!!t[x(o,e)]}));return void 0!==ut[x(o,u)][s]void 0}function g(e,t,n){return t[x(e,n.currentContextId)]}function b(e,t){var n=d(N(e,t),3),r=n[0],a=n[1],o=n[2];return[x(r,t&&t.currentContextId),a,o]}function x(e,t){return t.concat(e,-).concat(t)e}function N(e,t){if(===e)return[,0,void 0];var n=null!=t&&null!=t.parseNodeNameCache;if(n){var r=t.parseNodeNameCache.get(e);if(null!=r)return r}var a,o=e.split();if(1===o.length)a=[e,0,void 0];else{var s=o[0],i=3===o.lengtho[1]void 0;a=[s,Number(o[o.length-1]),i]}return n&&t.parseNodeNameCache.set(e,a),a}function w(e,t,n){var r=y(pad,e,t,n);if(explicit===r){r=y(explicitPaddings,e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o4;o++)a[o][0]=r[2o],a[o][1]=r[2o+1];return a}return r}function k(e){return e.keptet.clone(e)}var T={__proto__null,json[{tfOpNameAdd,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAddV2,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAddN,categoryarithmetic,inputs[{start0,end0,nametensors,typetensors}]},{tfOpNameBiasAdd,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0},{tfNamedata_format,namedataFormat,typestring,notSupported!0}]},{tfOpNameSub,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameRealDiv,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameDiv,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameDivNoNan,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameFloorDiv,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameMul,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameMaximum,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameMinimum,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNamePow,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSquaredDifference,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameMod,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameFloorMod,categoryarithmetic,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]}]},S={__proto__null,json[{tfOpNameAbs,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAcos,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAsin,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAtan,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAtan2,categorybasic_math,inputs[{start0,namex,typetensor},{start1,namey,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameCeil,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameClipByValue,categorybasic_math,inputs[{start0,namex,typetensor},{start1,nameclipValueMin,typenumber},{start2,nameclipValueMax,typenumber}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameComplex,categorybasic_math,inputs[{start0,namereal,typetensor},{start1,nameimag,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameComplexAbs,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameCos,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameCosh,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameElu,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameExp,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameFloor,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameLog,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameImag,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0},{tfNameTout,nameoutputType,typedtype,notSupported!0}]},{tfOpNameNeg,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameReal,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0},{tfNameTout,nameoutputType,typedtype,notSupported!0}]},{tfOpNamePrelu,categorybasic_math,inputs[{start0,namex,typetensor},{start1,namealpha,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameRelu,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameRelu6,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSelu,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSigmoid,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSin,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSinh,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSqrt,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameRsqrt,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSquare,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameTan,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameTanh,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSign,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameRound,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameExpm1,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameLog1p,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameReciprocal,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSoftplus,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAsinh,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAcosh,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAtanh,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameErf,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameLeakyRelu,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNamealpha,namealpha,typenumber,defaultValue.2},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameIsNan,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameIsFinite,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameIsInf,categorybasic_math,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]}]},_={__proto__null,json[{tfOpNameEmptyTensorList,categorycontrol,inputs[{start0,nameelementShape,typeshape},{start1,namemaxNumElements,typenumber}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameLoopCond,categorycontrol,inputs[{start0,namepred,typetensor}]},{tfOpNameSwitch,categorycontrol,inputs[{start0,namedata,typetensor},{start1,namepred,typetensor}]},{tfOpNameMerge,categorycontrol,inputs[{start0,end0,nametensors,typetensors}]},{tfOpNameEnter,categorycontrol,inputs[{start0,nametensor,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0},{tfNameframe_name,nameframeName,typestring},{tfNameis_constant,nameisConstant,typebool}]},{tfOpNameExit,categorycontrol,inputs[{start0,nametensor,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameNextIteration,categorycontrol,inputs[{start0,nametensor,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameTensorArrayV3,categorycontrol,inputs[{start0,namesize,typenumber}],attrs[{tfNamedtype,namedtype,typedtype},{tfNameelement_shape,nameelementShape,typeshape},{tfNamedynamic_size,namedynamicSize,typebool},{tfNameclear_after_read,nameclearAfterRead,typebool},{tfNameidentical_element_shapes,nameidenticalElementShapes,typebool},{tfNametensor_array_name,namename,typestring}]},{tfOpNameTensorArrayWriteV3,categorycontrol,inputs[{start0,nametensorArrayId,typetensor},{start1,nameindex,typenumber},{start2,nametensor,typetensor},{start3,nameflowIn,typenumber}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameTensorArrayReadV3,categorycontrol,inputs[{start0,nametensorArrayId,typetensor},{start1,nameindex,typenumber},{start2,nameflowIn,typenumber}],attrs[{tfNamedtype,namedtype,typedtype,notSupported!0}]},{tfOpNameTensorArrayGatherV3,categorycontrol,inputs[{start0,nametensorArrayId,typetensor},{start1,nameindices,typenumber[]},{start2,nameflowIn,typenumber}],attrs[{tfNamedtype,namedtype,typedtype},{tfNameelement_shape,nameelementShape,typeshape}]},{tfOpNameTensorArrayScatterV3,categorycontrol,inputs[{start0,nametensorArrayId,typetensor},{start1,nameindices,typenumber[]},{start2,nametensor,typetensor},{start3,nameflowIn,typenumber}],attrs[{tfNameT,namedtype,typedtype}]},{tfOpNameTensorArrayConcatV3,categorycontrol,inputs[{start0,nametensorArrayId,typetensor},{start1,nameflowIn,typenumber}],attrs[{tfNamedtype,namedtype,typedtype},{tfNameelement_shape_except0,nameelementShapeExcept0,typeshape,notSupported!0}]},{tfOpNameTensorArraySplitV3,categorycontrol,inputs[{start0,nametensorArrayId,typetensor},{start1,nametensor,typetensor},{start2,namelengths,typenumber[]},{start3,nameflowIn,typenumber}],attrs[{tfNameT,namedtype,typedtype}]},{tfOpNameTensorArraySizeV3,categorycontrol,inputs[{start0,nametensorArrayId,typetensor},{start1,nameflowIn,typenumber}]},{tfOpNameTensorArrayCloseV3,categorycontrol,inputs[{start0,nametensorArrayId,typetensor}]},{tfOpNameStatelessIf,categorycontrol,inputs[{start0,namecond,typetensor},{start1,end0,nameargs,typetensors}],attrs[{tfNamethen_branch,namethenBranch,typefunc},{tfNameelse_branch,nameelseBranch,typefunc}]},{tfOpNameIf,categorycontrol,inputs[{start0,namecond,typetensor},{start1,end0,nameargs,typetensors}],attrs[{tfNamethen_branch,namethenBranch,typefunc},{tfNameelse_branch,nameelseBranch,typefunc}]},{tfOpNameStatelessWhile,categorycontrol,inputs[{start0,end0,nameargs,typetensors}],attrs[{tfNamecond,namecond,typefunc},{tfNamebody,namebody,typefunc}]},{tfOpNameWhile,categorycontrol,inputs[{start0,end0,nameargs,typetensors}],attrs[{tfNamecond,namecond,typefunc},{tfNamebody,namebody,typefunc}]},{tfOpNameTensorListScatter,categorycontrol,inputs[{start0,nametensor,typetensor},{start1,nameindices,typenumber[]},{start2,nameelementShape,typeshape}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListScatterV2,categorycontrol,inputs[{start0,nametensor,typetensor},{start1,nameindices,typenumber[]},{start2,nameelementShape,typeshape},{start3,namenumElements,typenumber}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListGather,categorycontrol,inputs[{start0,nametensorListId,typetensor},{start1,nameindices,typenumber[]},{start2,nameelementShape,typeshape}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListGetItem,categorycontrol,inputs[{start0,nametensorListId,typetensor},{start1,nameindex,typenumber},{start2,nameelementShape,typeshape}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListSetItem,categorycontrol,inputs[{start0,nametensorListId,typetensor},{start1,nameindex,typenumber},{start2,nametensor,typetensor}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListReserve,categorycontrol,inputs[{start0,nameelementShape,typeshape},{start1,namenumElements,typenumber}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListFromTensor,categorycontrol,inputs[{start0,nametensor,typetensor},{start1,nameelementShape,typeshape}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListStack,categorycontrol,inputs[{start0,nametensorListId,typetensor},{start1,nameelementShape,typeshape}],attrs[{tfNameelement_dtype,nameelementDType,typedtype},{tfNamenum_elements,namenumElements,typedtype}]},{tfOpNameTensorListSplit,categorycontrol,inputs[{start0,nametensor,typetensor},{start1,nameelementShape,typeshape},{start2,namelengths,typenumber[]}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListConcat,categorycontrol,inputs[{start0,nametensorListId,typetensor}],attrs[{tfNameelement_shape,nameelementShape,typeshape},{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListConcatV2,categorycontrol,inputs[{start0,nametensorListId,typetensor}],attrs[{tfNameelement_shape,nameelementShape,typeshape},{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListPopBack,categorycontrol,inputs[{start0,nametensorListId,typetensor},{start1,nameelementShape,typeshape}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListPushBack,categorycontrol,inputs[{start0,nametensorListId,typetensor},{start1,nametensor,typetensor}],attrs[{tfNameelement_dtype,nameelementDType,typedtype}]},{tfOpNameTensorListLength,categorycontrol,inputs[{start0,nametensorListId,typetensor}]},{tfOpNameTensorListResize,categorycontrol,inputs[{start0,nametensorListId,typetensor},{start1,namesize,typenumber}]}]},E={__proto__null,json[{tfOpNameAvgPool,categoryconvolution,inputs[{start0,namex,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,notSupported!0},{tfNameksize,namekernelSize,typenumber[]},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameMaxPool,categoryconvolution,inputs[{start0,namex,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,notSupported!0},{tfNameksize,namekernelSize,typenumber[]},{tfNameexplicit_paddings,nameexplicitPaddings,typenumber[],defaultValue[],notSupported!0},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameMaxPoolWithArgmax,categoryconvolution,inputs[{start0,namex,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNameksize,namekernelSize,typenumber[]},{tfNameinclude_batch_in_index,nameincludeBatchInIndex,typebool},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameAvgPool3D,categoryconvolution,inputs[{start0,namex,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,notSupported!0},{tfNameksize,namekernelSize,typenumber[]},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameMaxPool3D,categoryconvolution,inputs[{start0,namex,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,notSupported!0},{tfNameksize,namekernelSize,typenumber[]},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameConv1D,categoryconvolution,inputs[{start0,namex,typetensor},{start1,namefilter,typetensor}],attrs[{tfNamestride,namestride,typenumber},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,defaultValueNWC},{tfNameT,namedtype,typedtype,notSupported!0},{tfNamedilation,namedilation,typenumber,defaultValue1}]},{tfOpNameConv2D,categoryconvolution,inputs[{start0,namex,typetensor},{start1,namefilter,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0},{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNameuseCudnnOnGpu,nameuseCudnnOnGpu,typebool},{tfNamedata_format,namedataFormat,typestring,defaultValueNHWC},{tfNameexplicit_paddings,nameexplicitPaddings,typenumber[],defaultValue[]},{tfNamedilations,namedilations,typenumber[]}]},{tfOpName_FusedConv2D,categoryconvolution,inputs[{start0,namex,typetensor},{start1,namefilter,typetensor},{start2,end0,nameargs,typetensors}],attrs[{tfNamenum_args,namenumArgs,typenumber},{tfNameT,namedtype,typedtype,notSupported!0},{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNameexplicit_paddings,nameexplicitPaddings,typenumber[],defaultValue[]},{tfNameuse_cudnn_on_gpu,nameuseCudnnOnGpu,typebool,defaultValue!0},{tfNamedata_format,namedataFormat,typestring,defaultValueNHWC},{tfNamedilations,namedilations,typenumber[],defaultValue[1,1,1,1]},{tfNamefused_ops,namefusedOps,typestring[],defaultValue[]},{tfNameepsilon,nameepsilon,typenumber,defaultValue1e-4},{tfNameleakyrelu_alpha,nameleakyreluAlpha,typenumber,defaultValue.2}]},{tfOpNameConv2DBackpropInput,categoryconvolution,inputs[{start2,namex,typetensor},{start1,namefilter,typetensor},{start0,nameoutputShape,typenumber[]}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,notSupported!0},{tfNameexplicit_paddings,nameexplicitPaddings,typenumber[],defaultValue[]},{tfNamedilations,namedilations,typenumber[],notSupported!0}]},{tfOpNameDepthwiseConv2d,categoryconvolution,inputs[{start0,nameinput,typetensor},{start1,namefilter,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,defaultValueNHWC},{tfNameexplicit_paddings,nameexplicitPaddings,typenumber[],defaultValue[]},{tfNamedilations,namedilations,typenumber[]}]},{tfOpNameDepthwiseConv2dNative,categoryconvolution,inputs[{start0,nameinput,typetensor},{start1,namefilter,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,defaultValueNHWC},{tfNameexplicit_paddings,nameexplicitPaddings,typenumber[],defaultValue[]},{tfNamedilations,namedilations,typenumber[]}]},{tfOpNameFusedDepthwiseConv2dNative,categoryconvolution,inputs[{start0,namex,typetensor},{start1,namefilter,typetensor},{start2,end0,nameargs,typetensors}],attrs[{tfNamenum_args,namenumArgs,typenumber},{tfNameT,namedtype,typedtype,notSupported!0},{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,defaultValueNHWC},{tfNamedilations,namedilations,typenumber[],defaultValue[1,1,1,1]},{tfNamefused_ops,namefusedOps,typestring[],defaultValue[]},{tfNameexplicit_paddings,nameexplicitPaddings,typenumber[],defaultValue[]}]},{tfOpNameConv3D,categoryconvolution,inputs[{start0,namex,typetensor},{start1,namefilter,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamepadding,namepad,typestring},{tfNamedata_format,namedataFormat,typestring,defaultValueNHWC},{tfNamedilations,namedilations,typenumber[]}]},{tfOpNameDilation2D,categoryconvolution,inputs[{start0,namex,typetensor},{start1,namefilter,typetensor}],attrs[{tfNamestrides,namestrides,typenumber[]},{tfNamerates,namedilations,typenumber[]},{tfNamepadding,namepad,typestring}]}]},I={__proto__null,json[{tfOpNameFill,categorycreation,inputs[{start0,nameshape,typenumber[]},{start1,namevalue,typenumber}],attrs[{tfNameT,namedtype,typedtype}]},{tfOpNameLinSpace,categorycreation,inputs[{start0,namestart,typenumber},{start1,namestop,typenumber},{start2,namenum,typenumber}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameOneHot,categorycreation,inputs[{start0,nameindices,typetensor},{start1,namedepth,typenumber},{start2,nameonValue,typenumber,defaultValue1},{start3,nameoffValue,typenumber,defaultValue0}],attrs[{tfNameaxis,nameaxis,typenumber,notSupported!0},{tfNameT,namedtype,typedtype}]},{tfOpNameOnes,categorycreation,inputs[{start0,nameshape,typenumber[]}],attrs[{tfNameT,namedtype,typedtype}]},{tfOpNameOnesLike,categorycreation,inputs[{start0,namex,typetensor}],attrs[{tfNamedtype,namedtype,typedtype}]},{tfOpNameRandomStandardNormal,categorycreation,inputs[{start0,nameshape,typenumber[]}],attrs[{tfNameseed,nameseed,typenumber,defaultValue0},{tfNameseed2,nameseed2,typenumber,defaultValue0,notSupported!0},{tfNamedtype,namedtype,typedtype},{tfNameT,nameT,typenumber,notSupported!0}]},{tfOpNameRandomUniform,categorycreation,inputs[{start0,nameshape,typenumber[]}],attrs[{tfNameminval,nameminval,typenumber,defaultValue0},{tfNamemaxval,namemaxval,typenumber,defaultValue1},{tfNamedtype,namedtype,typedtype},{tfNameseed,nameseed,typenumber,defaultValue0},{tfNameseed2,nameseed2,typenumber,defaultValue0,notSupported!0},{tfNameT,nameT,typenumber,notSupported!0}]},{tfOpNameRandomUniformInt,categorycreation,inputs[{start0,nameshape,typenumber[]}],attrs[{tfNameminval,nameminval,typenumber},{tfNamemaxval,namemaxval,typenumber},{tfNameseed,nameseed,typenumber,defaultValue0},{tfNameseed2,nameseed2,typenumber,defaultValue0,notSupported!0}]},{tfOpNameRange,categorycreation,inputs[{start0,namestart,typenumber},{start1,namestop,typenumber},{start2,namestep,typenumber,defaultValue0}],attrs[{tfNameTidx,namedtype,typedtype}]},{tfOpNameTruncatedNormal,categorycreation,inputs[{start0,nameshape,typenumber[]}],attrs[{tfNamemeans,namemean,typenumber,defaultValue0},{tfNamestddev,namestdDev,typenumber,defaultValue1},{tfNameseed,nameseed,typenumber},{tfNameseed2,nameseed2,typenumber,defaultValue0,notSupported!0},{tfNamedtype,namedtype,typedtype},{tfNameT,nameT,typenumber,notSupported!0}]},{tfOpNameZeros,categorycreation,inputs[{start0,nameshape,typenumber[]}],attrs[{tfNameT,namedtype,typedtype}]},{tfOpNameZerosLike,categorycreation,inputs[{start0,namex,typetensor}],attrs[{tfNameT,namedtype,typedtype}]},{tfOpNameMultinomial,categorycreation,inputs[{start0,namelogits,typetensor},{start1,namenumSamples,typenumber}],attrs[{tfNameseed,nameseed,typenumber},{tfNameseed2,nameseed2,typenumber},{tfNameT,namedtype,typedtype},{tfNameoutput_dtype,nameoutput_dtype,typedtype}]}]},O={__proto__null,json[{tfOpNameNonMaxSuppressionV2,categorydynamic,inputs[{start0,nameboxes,typetensor},{start1,namescores,typetensor},{start2,namemaxOutputSize,typenumber},{start3,nameiouThreshold,typenumber}]},{tfOpNameNonMaxSuppressionV3,categorydynamic,inputs[{start0,nameboxes,typetensor},{start1,namescores,typetensor},{start2,namemaxOutputSize,typenumber},{start3,nameiouThreshold,typenumber},{start4,namescoreThreshold,typenumber}]},{tfOpNameNonMaxSuppressionV4,categorydynamic,inputs[{start0,nameboxes,typetensor},{start1,namescores,typetensor},{start2,namemaxOutputSize,typenumber},{start3,nameiouThreshold,typenumber},{start4,namescoreThreshold,typenumber}],attrs[{tfNameT,namedtype,typedtype,notSupported!0},{tfNameT_threshold,namethreshold,typedtype,notSupported!0},{tfNamepad_to_max_output_size,namepadToMaxOutputSize,typebool}]},{tfOpNameNonMaxSuppressionV5,categorydynamic,inputs[{start0,nameboxes,typetensor},{start1,namescores,typetensor},{start2,namemaxOutputSize,typenumber},{start3,nameiouThreshold,typenumber},{start4,namescoreThreshold,typenumber},{start5,namesoftNmsSigma,typenumber}]},{tfOpNameWhere,categorydynamic,inputs[{start0,namecondition,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameListDiff,categorydynamic,inputs[{start0,namex,typetensor},{start1,namey,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]}]},A={__proto__null,json[{tfOpNameLowerBound,categoryevaluation,inputs[{start0,namesortedSequence,typetensor},{start1,namevalues,typetensor}]},{tfOpNameTopKV2,categoryevaluation,inputs[{start0,namex,typetensor},{start1,namek,typenumber}],attrs[{tfNamesorted,namesorted,typebool}]},{tfOpNameUpperBound,categoryevaluation,inputs[{start0,namesortedSequence,typetensor},{start1,namevalues,typetensor}]},{tfOpNameUnique,categoryevaluation,inputs[{start0,namex,typetensor}]},{tfOpNameUniqueV2,categoryevaluation,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber}]}]},D={__proto__null,json[{tfOpNamePlaceholderWithDefault,categorygraph,inputs[{start0,namedefault,typetensor}],attrs[{tfNameshape,nameshape,typeshape},{tfNamedtype,namedtype,typedtype}]},{tfOpNamePlaceholder,categorygraph,attrs[{tfNameshape,nameshape,typeshape},{tfNamedtype,namedtype,typedtype}]},{tfOpNameConst,categorygraph},{tfOpNameIdentity,categorygraph,inputs[{start0,namex,typetensor}]},{tfOpNameIdentityN,categorygraph,inputs[{start0,end0,namex,typetensors}]},{tfOpNameSnapshot,categorygraph,inputs[{start0,namex,typetensor}]},{tfOpNameRank,categorygraph,inputs[{start0,namex,typetensor}]},{tfOpNameSize,categorygraph,inputs[{start0,namex,typetensor}]},{tfOpNameShape,categorygraph,inputs[{start0,namex,typetensor}]},{tfOpNameShapeN,categorygraph,inputs[{start0,end0,namex,typetensors}]},{tfOpNamePrint,categorygraph,inputs[{start0,namex,typetensor},{start1,namedata,typetensors}],attrs[{tfNamemessage,namemessage,typestring},{tfNamefirst_n,namefirstN,typenumber,notSupported!0},{tfNamesummarize,namesummarize,typenumber,defaultValue3}]},{tfOpNameNoOp,categorygraph,inputs[]},{tfOpNameStopGradient,categorygraph,inputs[{start0,namex,typetensor}]},{tfOpNameFakeQuantWithMinMaxVars,categorygraph,inputs[{start0,namex,typetensor}],attrs[{tfNamemin,namemin,typenumber},{tfNamemax,namemax,typenumber}]}]},M={__proto__null,json[{tfOpNameHashTable,categoryhash_table,inputs[],attrs[{tfNameshared_name,namesharedName,typestring},{tfNameuse_node_name_sharing,nameuseNodeNameSharing,typebool},{tfNamekey_dtype,namekeyDType,typedtype},{tfNamevalue_dtype,namevalueDType,typedtype}]},{tfOpNameHashTableV2,categoryhash_table,inputs[],attrs[{tfNameshared_name,namesharedName,typestring},{tfNameuse_node_name_sharing,nameuseNodeNameSharing,typebool},{tfNamekey_dtype,namekeyDType,typedtype},{tfNamevalue_dtype,namevalueDType,typedtype}]},{tfOpNameLookupTableImport,categoryhash_table,inputs[{start0,nametableHandle,typetensor},{start1,namekeys,typetensor},{start2,namevalues,typetensor}],attrs[{tfNameTin,nametIn,typedtype,notSupported!0},{tfNameTout,nametOut,typedtype,notSupported!0}]},{tfOpNameLookupTableImportV2,categoryhash_table,inputs[{start0,nametableHandle,typetensor},{start1,namekeys,typetensor},{start2,namevalues,typetensor}],attrs[{tfNameTin,nametIn,typedtype,notSupported!0},{tfNameTout,nametOut,typedtype,notSupported!0}]},{tfOpNameLookupTableFind,categoryhash_table,inputs[{start0,nametableHandle,typetensor},{start1,namekeys,typetensor},{start2,namedefaultValue,typetensor}],attrs[{tfNameTin,nametIn,typedtype,notSupported!0},{tfNameTout,nametOut,typedtype,notSupported!0}]},{tfOpNameLookupTableFindV2,categoryhash_table,inputs[{start0,nametableHandle,typetensor},{start1,namekeys,typetensor},{start2,namedefaultValue,typetensor}],attrs[{tfNameTin,nametIn,typedtype,notSupported!0},{tfNameTout,nametOut,typedtype,notSupported!0}]},{tfOpNameLookupTableSize,categoryhash_table,inputs[{start0,nametableHandle,typetensor}]},{tfOpNameLookupTableSizeV2,categoryhash_table,inputs[{start0,nametableHandle,typetensor}]},{tfOpNameInitializeTable,categoryhash_table,inputs[{start0,nametableHandle,typetensor},{start1,namekeys,typetensor},{start2,namevalues,typetensor}]},{tfOpNameInitializeTableV2,categoryhash_table,inputs[{start0,nametableHandle,typetensor},{start1,namekeys,typetensor},{start2,namevalues,typetensor}]}]},C={__proto__null,json[{tfOpNameResizeBilinear,categoryimage,inputs[{start0,nameimages,typetensor},{start1,namesize,typenumber[]}],attrs[{tfNamealign_corners,namealignCorners,typebool},{tfNamehalf_pixel_centers,namehalfPixelCenters,typebool},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameResizeNearestNeighbor,categoryimage,inputs[{start0,nameimages,typetensor},{start1,namesize,typenumber[]}],attrs[{tfNamealign_corners,namealignCorners,typebool},{tfNamehalf_pixel_centers,namehalfPixelCenters,typebool},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameCropAndResize,categoryimage,inputs[{start0,nameimage,typetensor},{start1,nameboxes,typetensor},{start2,nameboxInd,typetensor},{start3,namecropSize,typenumber[]}],attrs[{tfNamemethod,namemethod,typestring},{tfNameextrapolation_value,nameextrapolationValue,typenumber}]},{tfOpNameImageProjectiveTransformV3,categoryimage,inputs[{start0,nameimages,typetensor},{start1,nametransforms,typetensor},{start2,nameoutputShape,typenumber[]},{start3,namefillValue,typenumber}],attrs[{tfNameinterpolation,nameinterpolation,typestring},{tfNamefill_mode,namefillMode,typestring}]}]},F={__proto__null,json[{tfOpNameEqual,categorylogical,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameNotEqual,categorylogical,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameGreater,categorylogical,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameGreaterEqual,categorylogical,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameLess,categorylogical,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameLessEqual,categorylogical,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameLogicalAnd,categorylogical,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameLogicalNot,categorylogical,inputs[{start0,namea,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameLogicalOr,categorylogical,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSelect,categorylogical,inputs[{start0,namecondition,typetensor},{start1,namea,typetensor},{start2,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSelectV2,categorylogical,inputs[{start0,namecondition,typetensor},{start1,namea,typetensor},{start2,nameb,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameBitwiseAnd,categorylogical,inputs[{start0,namex,typetensor},{start1,namey,typetensor}]}]},R={__proto__null,json[{tfOpName_FusedMatMul,categorymatrices,inputs[{start0,namea,typetensor},{start1,nameb,typetensor},{start2,end0,nameargs,typetensors}],attrs[{tfNamenum_args,namenumArgs,typenumber},{tfNamefused_ops,namefusedOps,typestring[],defaultValue[]},{tfNameepsilon,nameepsilon,typenumber,defaultValue1e-4},{tfNametranspose_a,nametransposeA,typebool,defaultValue!1},{tfNametranspose_b,nametransposeB,typebool,defaultValue!1},{tfNameleakyrelu_alpha,nameleakyreluAlpha,typenumber,defaultValue.2},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameMatMul,categorymatrices,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNametranspose_a,nametransposeA,typebool,defaultValue!1},{tfNametranspose_b,nametransposeB,typebool,defaultValue!1},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameBatchMatMul,categorymatrices,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameadj_x,nametransposeA,typebool,defaultValue!1},{tfNameadj_y,nametransposeB,typebool,defaultValue!1},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameBatchMatMulV2,categorymatrices,inputs[{start0,namea,typetensor},{start1,nameb,typetensor}],attrs[{tfNameadj_x,nametransposeA,typebool,defaultValue!1},{tfNameadj_y,nametransposeB,typebool,defaultValue!1},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameTranspose,categorymatrices,inputs[{start0,namex,typetensor},{start1,nameperm,typenumber[]}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameEinsum,categorymatrices,inputs[{start0,end0,nametensors,typetensors}],attrs[{tfNameequation,nameequation,typestring},{tfNameN,namen,typenumber,defaultValue2},{tfNameT,namedtype,typedtype}]},{tfOpNameMatrixBandPart,categorymatrices,inputs[{start0,namea,typetensor},{start1,namenumLower,typetensor},{start1,namenumUpper,typetensor}]}]},z={__proto__null,json[{tfOpNameEuclideanNorm,categorynormalization,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}],attrs[{tfNamekeep_dims,namekeepDims,typebool,defaultValue!1}]},{tfOpNameFusedBatchNorm,categorynormalization,inputs[{start0,namex,typetensor},{start1,namescale,typetensor},{start2,nameoffset,typetensor},{start3,namemean,typetensor},{start4,namevariance,typetensor}],attrs[{tfNameepsilon,nameepsilon,typenumber,defaultValue.001},{tfNamedata_format,namedataFormat,typestring,notSupported!0}]},{tfOpNameFusedBatchNormV2,categorynormalization,inputs[{start0,namex,typetensor},{start1,namescale,typetensor},{start2,nameoffset,typetensor},{start3,namemean,typetensor},{start4,namevariance,typetensor}],attrs[{tfNameepsilon,nameepsilon,typenumber,defaultValue.001},{tfNamedata_format,namedataFormat,typestring,notSupported!0}]},{tfOpNameFusedBatchNormV3,categorynormalization,inputs[{start0,namex,typetensor},{start1,namescale,typetensor},{start2,nameoffset,typetensor},{start3,namemean,typetensor},{start4,namevariance,typetensor}],attrs[{tfNameepsilon,nameepsilon,typenumber,defaultValue.001},{tfNamedata_format,namedataFormat,typestring,notSupported!0}]},{tfOpNameLRN,categorynormalization,inputs[{start0,namex,typetensor}],attrs[{tfNamedepth_radius,nameradius,typenumber,defaultValue5},{tfNamebias,namebias,typenumber,defaultValue1},{tfNamealpha,namealpha,typenumber,defaultValue1},{tfNamebeta,namebeta,typenumber,defaultValue.5}]},{tfOpNameSoftmax,categorynormalization,inputs[{start0,namex,typetensor}]},{tfOpNameLogSoftmax,categorynormalization,inputs[{start0,namex,typetensor}]}]},L={__proto__null,json[{tfOpNameBincount,categoryreduction,inputs[{start0,namex,typetensor},{start1,namesize,typenumber},{start2,nameweights,typetensor}]},{tfOpNameDenseBincount,categoryreduction,inputs[{start0,namex,typetensor},{start1,namesize,typenumber},{start2,nameweights,typetensor}],attrs[{tfNamebinary_output,namebinaryOutput,typebool}]},{tfOpNameMax,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}],attrs[{tfNamekeep_dims,namekeepDims,typebool}]},{tfOpNameMean,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}],attrs[{tfNamekeep_dims,namekeepDims,typebool}]},{tfOpNameMin,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}],attrs[{tfNamekeep_dims,namekeepDims,typebool}]},{tfOpNameSum,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}],attrs[{tfNamekeep_dims,namekeepDims,typebool}]},{tfOpNameAll,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}],attrs[{tfNamekeep_dims,namekeepDims,typebool}]},{tfOpNameAny,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}],attrs[{tfNamekeep_dims,namekeepDims,typebool}]},{tfOpNameArgMax,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber}]},{tfOpNameArgMin,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber}]},{tfOpNameProd,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}],attrs[{tfNamekeep_dims,namekeepDims,typebool},{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameCumprod,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber}],attrs[{tfNameexclusive,nameexclusive,typebool},{tfNamereverse,namereverse,typebool}]},{tfOpNameCumsum,categoryreduction,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber}],attrs[{tfNameexclusive,nameexclusive,typebool},{tfNamereverse,namereverse,typebool}]}]},V={__proto__null,json[{tfOpNameConcatV2,categoryslice_join,inputs[{start0,end-1,nametensors,typetensors},{start-1,nameaxis,typenumber}],attrs[{tfNameN,namen,typenumber,defaultValue2}]},{tfOpNameConcat,categoryslice_join,inputs[{start1,end0,nametensors,typetensors},{start0,nameaxis,typenumber}],attrs[{tfNameN,namen,typenumber,defaultValue2}]},{tfOpNameGatherV2,categoryslice_join,inputs[{start0,namex,typetensor},{start1,nameindices,typetensor},{start2,nameaxis,typenumber,defaultValue0}],attrs[{tfNamebatch_dims,namebatchDims,typenumber,defaultValue0}]},{tfOpNameGather,categoryslice_join,inputs[{start0,namex,typetensor},{start1,nameindices,typetensor}],attrs[{tfNamevalidate_indices,namevalidateIndices,typebool,notSupported!0}]},{tfOpNameReverse,categoryslice_join,inputs[{start0,namex,typetensor},{start1,namedims,typebool[]}]},{tfOpNameReverseV2,categoryslice_join,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber[]}]},{tfOpNameSlice,categoryslice_join,inputs[{start0,namex,typetensor},{start1,namebegin,typenumber[]},{start2,namesize,typenumber[]}]},{tfOpNameStridedSlice,categoryslice_join,inputs[{start0,namex,typetensor},{start1,namebegin,typenumber[]},{start2,nameend,typenumber[]},{start3,namestrides,typenumber[]}],attrs[{tfNamebegin_mask,namebeginMask,typenumber,defaultValue0},{tfNameend_mask,nameendMask,typenumber,defaultValue0},{tfNamenew_axis_mask,namenewAxisMask,typenumber,defaultValue0},{tfNameellipsis_mask,nameellipsisMask,typenumber,defaultValue0},{tfNameshrink_axis_mask,nameshrinkAxisMask,typenumber,defaultValue0}]},{tfOpNamePack,categoryslice_join,inputs[{start0,end0,nametensors,typetensors}],attrs[{tfNameaxis,nameaxis,typenumber,defaultValue0}]},{tfOpNameUnpack,categoryslice_join,inputs[{start0,nametensor,typetensor}],attrs[{tfNameaxis,nameaxis,typenumber,defaultValue0},{tfNamenum,namenum,typenumber,defaultValue0,notSupported!0}]},{tfOpNameTile,categoryslice_join,inputs[{start0,namex,typetensor},{start1,namereps,typenumber[]}]},{tfOpNameSplit,categoryslice_join,inputs[{start0,nameaxis,typenumber,defaultValue0},{start1,namex,typetensor}],attrs[{tfNamenum_split,namenumOrSizeSplits,typenumber,defaultValue1}]},{tfOpNameSplitV,categoryslice_join,inputs[{start0,namex,typetensor},{start1,namenumOrSizeSplits,typenumber[]},{start2,nameaxis,typenumber,defaultValue0}]},{tfOpNameScatterNd,categoryslice_join,inputs[{start0,nameindices,typetensor},{start1,namevalues,typetensor},{start2,nameshape,typenumber[]}]},{tfOpNameGatherNd,categoryslice_join,inputs[{start0,namex,typetensor},{start1,nameindices,typetensor}]},{tfOpNameSparseToDense,categoryslice_join,inputs[{start0,namesparseIndices,typetensor},{start1,nameoutputShape,typenumber[]},{start2,namesparseValues,typetensor},{start3,namedefaultValue,typetensor}],attrs[{tfNamevalidate_indices,namevalidateIndices,typebool,defaultValue!1,notSupported!0}]},{tfOpNameTensorScatterUpdate,categoryslice_join,inputs[{start0,nametensor,typetensor},{start1,nameindices,typetensor},{start2,namevalues,typetensor}]}]},P={__proto__null,json[{tfOpNameSparseFillEmptyRows,categorysparse,inputs[{start0,nameindices,typetensor},{start1,namevalues,typetensor},{start2,namedenseShape,typetensor},{start3,namedefaultValue,typetensor}]},{tfOpNameSparseReshape,categorysparse,inputs[{start0,nameinputIndices,typetensor},{start1,nameinputShape,typetensor},{start2,namenewShape,typetensor}],attrs[{tfNameT,namedtype,typedtype,notSupported!0}]},{tfOpNameSparseSegmentMean,categorysparse,inputs[{start0,namedata,typetensor},{start1,nameindices,typetensor},{start2,namesegmentIds,typetensor}]},{tfOpNameSparseSegmentSum,categorysparse,inputs[{start0,namedata,typetensor},{start1,nameindices,typetensor},{start2,namesegmentIds,typetensor}]}]},B={__proto__null,json[{tfOpNameFFT,categoryspectral,inputs[{start0,namex,typetensor}]},{tfOpNameIFFT,categoryspectral,inputs[{start0,namex,typetensor}]},{tfOpNameRFFT,categoryspectral,inputs[{start0,namex,typetensor},{start1,namefft_length,typenumber,notSupported!0}]},{tfOpNameIRFFT,categoryspectral,inputs[{start0,namex,typetensor},{start1,namefft_length,typenumber,notSupported!0}]}]},K={__proto__null,json[{tfOpNameStaticRegexReplace,categorystring,inputs[{start0,nameinput,typetensor}],attrs[{tfNamepattern,namepattern,typestring},{tfNamerewrite,namerewrite,typestring},{tfNamereplace_global,namereplaceGlobal,typebool}]},{tfOpNameStringNGrams,categorystring,inputs[{start0,namedata,typetensor},{start1,namedataSplits,typetensor}],attrs[{tfNameseparator,nameseparator,typestring},{tfNamengram_widths,namenGramWidths,typenumber[]},{tfNameleft_pad,nameleftPad,typestring},{tfNameright_pad,namerightPad,typestring},{tfNamepad_width,namepadWidth,typenumber},{tfNamepreserve_short_sequences,namepreserveShortSequences,typebool}],outputs[ngrams,ngrams_splits]},{tfOpNameStringSplit,categorystring,inputs[{start0,nameinput,typetensor},{start1,namedelimiter,typetensor}],attrs[{tfNameskip_empty,nameskipEmpty,typebool}],outputs[indices,values,shape]},{tfOpNameStringToHashBucketFast,categorystring,inputs[{start0,nameinput,typetensor}],attrs[{tfNamenum_buckets,namenumBuckets,typenumber}]}]},j={__proto__null,json[{tfOpNameCast,categorytransformation,inputs[{start0,namex,typetensor}],attrs[{tfNameSrcT,namesdtype,typedtype,notSupported!0},{tfNameDstT,namedtype,typedtype}]},{tfOpNameExpandDims,categorytransformation,inputs[{start0,namex,typetensor},{start1,nameaxis,typenumber}]},{tfOpNameMirrorPad,categorytransformation,inputs[{start0,namex,typetensor},{start1,namepadding,typenumber[]}],attrs[{tfNamemode,namemode,typestring}]},{tfOpNamePad,categorytransformation,inputs[{start0,namex,typetensor},{start1,namepadding,typenumber[]}],attrs[{tfNameconstant_value,nameconstantValue,typenumber,defaultValue0}]},{tfOpNamePadV2,categorytransformation,inputs[{start0,namex,typetensor},{start1,namepadding,typenumber[]},{start2,nameconstantValue,typenumber,defaultValue0}]},{tfOpNameReshape,categorytransformation,inputs[{start0,namex,typetensor},{start1,nameshape,typenumber[]}]},{tfOpNameEnsureShape,categorytransformation,inputs[{start0,namex,typetensor},{start1,nameshape,typenumber[]}]},{tfOpNameSqueeze,categorytransformation,inputs[{start0,namex,typetensor}],attrs[{tfNameaxis,tfDeprecatedNamesqueeze_dims,nameaxis,typenumber[]}]},{tfOpNameSpaceToBatchND,categorytransformation,inputs[{start0,namex,typetensor},{start1,nameblockShape,typenumber[]},{start2,namepaddings,typenumber[]}]},{tfOpNameBatchToSpaceND,categorytransformation,inputs[{start0,namex,typetensor},{start1,nameblockShape,typenumber[]},{start2,namecrops,typenumber[]}]},{tfOpNameDepthToSpace,categorytransformation,inputs[{start0,namex,typetensor}],attrs[{tfNameblock_size,nameblockSize,typenumber},{tfNamedata_format,namedataFormat,typestring}]},{tfOpNameBroadcastTo,categorytransformation,inputs[{start0,namex,typetensor},{start1,nameshape,typenumber[]}],attrs[]},{tfOpNameBroadcastArgs,categorytransformation,inputs[{start0,names0,typetensor},{start1,names1,typetensor}],attrs[]}]},q=function(){function e(){var e=[T,S,_,E,I,O,A,D,M,C,F,R,z,L,V,P,B,K,j],t=[].concat.apply([],h([],d(e.map((function(e){return e.json}))),!1));this.opMappers=t.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Object.defineProperty(e,Instance,{getfunction(){return this._instance(this._instance=new this)},enumerable!1,configurable!0}),e.prototype.transformGraph=function(e,t){var n=this;void 0===t&&(t={});var r=e.node,a=[],o=[],s=[],i=r.reduce((function(e,t){return e[t.name]=n.mapNode(t),t.op.startsWith(Placeholder)a.push(e[t.name])Const===t.opo.push(e[t.name])null!=t.input&&0!==t.input.lengths.push(e[t.name]),e}),{}),u=[],c=[],p={},l={};null!=t&&(p=this.mapSignatureEntries(t.inputs),l=this.mapSignatureEntries(t.outputs));var h=Object.keys(i);h.forEach((function(e){var t=i[e];t.inputNames.forEach((function(e,n){var r=d(b(e),3),a=r[0],o=r[2],s=i[a];if(null!=s.outputs){var u=s.outputs.indexOf(o);if(-1!==u){var c=.concat(a,).concat(u);t.inputNames[n]=c}}t.inputs.push(s),s.children.push(t)}))})),0===Object.keys(l).lengthh.forEach((function(e){var t=i[e];0===t.children.length&&c.push(t)}))Object.keys(l).forEach((function(e){var t=d(b(e),1)[0],n=i[t];null!=n&&(n.signatureKey=l[e],c.push(n))})),Object.keys(p).length0Object.keys(p).forEach((function(e){var t=d(b(e),1)[0],n=i[t];n&&(n.signatureKey=p[e],u.push(n))}))u=a;var f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((function(e,t){return e[t.signature.name]=n.mapFunction(t),e}),{}));var m={nodesi,inputsu,outputsc,weightso,placeholdersa,signaturet,functionsf};return s.length0&&(m.initNodes=s),m},e.prototype.mapSignatureEntries=function(e){return Object.keys(e{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})},e.prototype.mapNode=function(e){var t=m(e.op)this.opMappers[e.op]{};null==e.attr&&(e.attr={});var n={namee.name,ope.op,categoryt.category,inputNames(e.input[]).map((function(e){return e.startsWith(^)e.slice(1)e})),inputs[],children[],inputParams{},attrParams{},rawAttrse.attr,outputst.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={typet.type,inputIndexStartt.start,inputIndexEndt.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){casestringvoid 0===(a=W(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=W(e.attr,n.tfDeprecatedName,n.defaultValue));break;casestring[]void 0===(a=te(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=te(e.attr,n.tfDeprecatedName,n.defaultValue));break;casenumbervoid 0===(a=H(e.attr,n.tfName,n.defaultValue0))&&n.tfDeprecatedName&&(a=H(e.attr,n.tfDeprecatedName,n.defaultValue));break;casenumber[]void 0===(a=ee(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ee(e.attr,n.tfDeprecatedName,n.defaultValue));break;caseboolvoid 0===(a=G(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=G(e.attr,n.tfDeprecatedName,n.defaultValue));break;casebool[]void 0===(a=re(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=re(e.attr,n.tfDeprecatedName,n.defaultValue));break;caseshapevoid 0===(a=$(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=$(e.attr,n.tfDeprecatedName,n.defaultValue));break;caseshape[]void 0===(a=ne(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ne(e.attr,n.tfDeprecatedName,n.defaultValue));break;casedtypevoid 0===(a=X(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=X(e.attr,n.tfDeprecatedName,n.defaultValue));break;casedtype[]void 0===(a=Y(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Y(e.attr,n.tfDeprecatedName,n.defaultValue));break;casefuncvoid 0===(a=Q(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Q(e.attr,n.tfDeprecatedName,n.defaultValue));break;casetensorcasetensorsbreak;defaultthrow new Error(Unsupported param type .concat(n.type, for op ).concat(e.op))}return t[n.name]={valuea,typer},t}),{})),n},e.prototype.mapFunction=function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),Const===n.op&&r.push(e[n.name]),e}),{}));var o=[],s=[];e.signature.inputArg.forEach((function(e){var t=d(b(e.name),1)[0],n={namet,opPlaceholder,inputs[],inputNames[],categorygraph,inputParams{},attrParams{dtype{valueZ(e.type),typedtype}},children[]};n.signatureKey=e.name,o.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=d(b(e),3),o=r[0],s=r[2],i=a[o];if(null!=i.outputs){var u=i.outputs.indexOf(s);if(-1!==u){var c=.concat(o,).concat(u);t.inputNames[n]=c}}t.inputs.push(i),i.children.push(t)}))}));var i=e.ret;e.signature.outputArg.forEach((function(e){var t=d(b(i[e.name]),2),n=t[0],r=t[1],o=a[n];null!=o&&(o.defaultOutput=r,s.push(o))}));var u=this.mapArgsToSignature(e);return{nodesa,inputso,outputss,weightsr,placeholders[],signatureu}},e.prototype.mapArgsToSignature=function(e){var t=this;return{methodNamee.signature.name,inputse.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputse.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}},e.prototype.mapArgToTensorInfo=function(e,t){var n=e.name;return null!=t&&(n=t[n]),{namen,dtypee.type}},e}();function U(e,n){var r=Array.isArray(e)String.fromCharCode.apply(null,e)function(e){var n=t.env().global;if(undefined!=typeof n.atob)return n.atob(e);if(undefined!=typeof Buffer)return new Buffer(e,base64).toString();throw new Error(Unable to decode base64 in this environment. Missing built-in atob() or Buffer())}(e);return nrr.toLowerCase()}function W(e,t,n,r){void 0===r&&(r=!1);var a=e[t];return null!=aU(a.s,r)n}function G(e,t,n){var r=e[t];return rr.bn}function H(e,t,n){var r=e[t]{},a=null!=r.ir.inull!=r.fr.fn;returnnumber==typeof aaparseInt(a,10)}function Z(e){switch(string==typeof e&&(e=o[e]),e){case o.DT_FLOATcase o.DT_HALFreturnfloat32;case o.DT_INT32case o.DT_INT64case o.DT_INT8case o.DT_UINT8returnint32;case o.DT_BOOLreturnbool;case o.DT_DOUBLEreturnfloat32;case o.DT_STRINGreturnstring;case o.DT_COMPLEX64case o.DT_COMPLEX128returncomplex64;defaultreturn null}}function Q(e,t,n){var r=e[t];return r&&r.funcr.func.namen}function X(e,t,n){var r=e[t];return r&&r.typeZ(r.type)n}function Y(e,t,n){var r=e[t];return r&&r.list&&r.list.typer.list.type.map((function(e){return Z(e)}))n}function J(e){if(!e.unknownRank)return null!=e.dime.dim.map((function(e){returnnumber==typeof e.sizee.sizeparseInt(e.size,10)}))[]}function $(e,t,n){var r=e[t];return r&&r.shapeJ(r.shape)n}function ee(e,t,n){var r=e[t];return r((r.list.f&&r.list.f.lengthr.list.fr.list.i)[]).map((function(e){returnnumber==typeof eeparseInt(e,10)}))n}function te(e,t,n,r){void 0===r&&(r=!1);var a=e[t];return a&&a.list&&a.list.sa.list.s.map((function(e){return U(e,r)}))n}function ne(e,t,n){var r=e[t];return r&&r.list&&r.list.shaper.list.shape.map((function(e){return J(e)}))n}function re(e,t,n){var r=e[t];return r&&r.list&&r.list.br.list.bn}var ae=function(){function e(e,t,n){var r=this;this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((function(e){return r.getInput(e)})),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((function(e,t){return e[t]=r.getAttr(t),e}),{}))}return e.prototype.getInput=function(e){return v(e,this.tensorMap,this.context)},e.prototype.getAttr=function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return v(e,this.tensorMap,this.context);if(null!=n.inull!=n.f)return H(this.node.rawAttrs,e,t);if(null!=n.s)return W(this.node.rawAttrs,e,t);if(null!=n.b)return G(this.node.rawAttrs,e,t);if(null!=n.shape)return $(this.node.rawAttrs,e,t);if(null!=n.type)return X(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.inull!=n.list.f)return ee(this.node.rawAttrs,e,t);if(null!=n.list.s)return te(this.node.rawAttrs,e,t);if(null!=n.list.shape)return ne(this.node.rawAttrs,e,t);if(null!=n.list.b)return re(this.node.rawAttrs,e,t);if(null!=n.list.type)return Y(this.node.rawAttrs,e,t)}return t},e}(),oe=function(){function e(){}return e.prototype.refCount=function(e){return se(refCount)},e.prototype.incRef=function(e){return se(incRef)},e.prototype.timerAvailable=function(){return!0},e.prototype.time=function(e){return se(time)},e.prototype.read=function(e){return se(read)},e.prototype.readSync=function(e){return se(readSync)},e.prototype.readToGPU=function(e,t){return se(readToGPU)},e.prototype.numDataIds=function(){return se(numDataIds)},e.prototype.disposeData=function(e,t){return se(disposeData)},e.prototype.write=function(e,t,n){return se(write)},e.prototype.move=function(e,t,n,r,a){return se(move)},e.prototype.createTensorFromGPUData=function(e,t,n){return se(createTensorFromGPUData)},e.prototype.memory=function(){return se(memory)},e.prototype.floatPrecision=function(){return se(floatPrecision)},e.prototype.epsilon=function(){return 32===this.floatPrecision()1e-71e-4},e.prototype.dispose=function(){return se(dispose)},e}();function se(e){throw new Error('.concat(e,' not yet implemented or not found in the registry. )+This kernel may not be supported by the tfjs backend you have chosen)}function ie(e,t){if(!e)throw new Error(string==typeof ttt())}function ue(e,t,n){void 0===n&&(n=),ie(le(e,t),(function(){return n+ Shapes .concat(e, and ).concat(t, must match)}))}function ce(e){ie(null!=e,(function(){returnThe input to the tensor constructor must be a non-null value.}))}function pe(e){if(0===e.length)return 1;for(var t=e[0],n=1;ne.length;n++)t=e[n];return t}function le(e,t){if(e===t)return!0;if(null==enull==t)return!1;if(e.length!==t.length)return!1;for(var n=0;ne.length;n++)if(e[n]!==t[n])return!1;return!0}function de(e){return e%1==0}function he(e,t){return t=e.lengthee+ .repeat(t-e.length)}function fe(e,t){var n=t.length;return ie((e=null==et.map((function(e,t){return t}))[].concat(e)).every((function(e){return e=-n&&en})),(function(){returnAll values in axis param must be in range [-.concat(n,, ).concat(n,) but )+got axis .concat(e)})),ie(e.every((function(e){return de(e)})),(function(){returnAll values in axis param must be integers but +got axis .concat(e)})),e.map((function(e){return e0n+ee}))}function me(e,t){var n=null;if(null==efloat32===e)n=new Float32Array(t);else if(int32===e)n=new Int32Array(t);else if(bool===e)n=new Uint8Array(t);else{if(string!==e)throw new Error(Unknown data type .concat(e));n=new Array(t)}return n}function ye(e){if(float32===eint32===e)return 4;if(complex64===e)return 8;if(bool===e)return 1;throw new Error(Unknown dtype .concat(e))}function ve(e){returnstring==typeof ee instanceof String}function ge(e){return Array.isArray(e)ge(e[0])e instanceof Float32Arrayfloat32e instanceof Int32Arraye instanceof Uint8Arraye instanceof Uint8ClampedArrayint32number==typeof efloat32ve(e)stringfunction(e){returnboolean==typeof e}(e)boolfloat32}function be(e){return!!(e&&e.constructor&&e.call&&e.apply)}function xe(e){var t=e.length;if(t2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r=0;--r)n[r]=n[r+1]e[r+1];return n}function Ne(e,t,n,r){void 0===r&&(r=!1);var a=new Array;if(1===t.length)for(var o=t[0](r21),s=0;so;s++)a[s]=n[e+s];else{o=t[0];var i=t.slice(1),u=i.reduce((function(e,t){return et}))(r21);for(s=0;so;s++)a[s]=Ne(e+su,i,n,r)}return a}function we(e,t,n){if(void 0===n&&(n=!1),0===e.length)return t[0];var r=e.reduce((function(e,t){return et}))(n21);if(0===r)return[];if(r!==t.length)throw new Error([.concat(e,] does not match the input size ).concat(t.length).concat(n for a complex tensor,.));return Ne(0,e,t,n)}function ke(e,t){for(var n=Te(e,t),r=0;rn.length;r++)n[r]=1;return n}function Te(e,t){if(null==tfloat32===tcomplex64===t)return new Float32Array(e);if(int32===t)return new Int32Array(e);if(bool===t)return new Uint8Array(e);throw new Error(Unknown data type .concat(t))}function Se(e){e.forEach((function(t){ie(Number.isInteger(t)&&t=0,(function(){returnTensor must have a shape comprised of positive integers but got +shape [.concat(e,].)}))}))}function _e(e){return e&&e.then&&function==typeof e.then}var Ee=tfjsflags,Ie=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Oe,this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&(De().getBool(IS_TEST)De().getBool(PROD)console.warn(Platform .concat(this.platformName, has already been set. )+Overwriting the platform with .concat(e,.))),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFnt,setHookn},null!=this.urlFlags[e]){var r=this.urlFlags[e];De().getBool(IS_TEST)De().getBool(PROD)console.warn(Setting feature override from URL .concat(e, ).concat(r,.)),this.set(e,r)}},e.prototype.getAsync=function(e){return c(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0return e in this.flags[2,this.flags[e]](t=this.flags,n=e,[4,this.evaluateFlag(e)]);case 1return t[n]=r.sent(),[2,this.flags[e]]}}))}))},e.prototype.get=function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(_e(t))throw new Error(Flag .concat(e, cannot be synchronously evaluated. )+Please use getAsync() instead.);return this.flags[e]=t,this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getString=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,features,{getfunction(){return this.flags},enumerable!1,configurable!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error(Cannot set flag .concat(e, as it has not been registered.));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error(Cannot evaluate flag '.concat(e,' no evaluation function found.));return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(undefined!=typeof this.global&&undefined!=typeof this.global.location&&undefined!=typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(Ee in t)t.tfjsflags.split(,).forEach((function(t){var n=d(t.split(),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){var n=t.toLowerCase();returntrue===nfalse===ntrue===n.concat(+n)===n+nt}(0,a)}))}},e}();function Oe(e){var t={};return e.replace([&]([^=&]+)(=([^&]))g,(function(e){for(var n=[],r=1;rarguments.length;r++)n[r-1]=arguments[r];return Ae(t,n[0],n[1]),n.join(=)})),t}function Ae(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n)}function De(){return Ce}var Me,Ce=null;function Fe(){if(null==Me){var e=void 0;if(undefined!=typeof window)e=window;else if(undefined!=typeof global)e=global;else if(undefined!=typeof process)e=process;else{if(undefined==typeof self)throw new Error(Could not find a global object);e=self}Me=e}return Me}function Re(e,t){var n,r=(null==(n=Fe())._tfGlobals&&(n._tfGlobals=new Map),n._tfGlobals);if(r.has(e))return r.get(e);var a=t();return r.set(e,a),r.get(e)}var ze=Cast,Le=Einsum,Ve=Identity,Pe=Tile,Be=Transpose,Ke=_FusedMatMul,je=FusedConv2D,qe=FusedDepthwiseConv2D;function Ue(){for(var e=[],t=0;targuments.length;t++)e[t]=arguments[t];De().getBool(IS_TEST)De().getBool(PROD)console.warn.apply(console,h([],d(e),!1))}var We=Re(kernelRegistry,(function(){return new Map})),Ge=Re(gradRegistry,(function(){return new Map}));function He(e,t){var n=function(e,t){return.concat(t,_).concat(e)}(e,t);return We.get(n)}function Ze(e){return Ge.get(e)}function Qe(e){for(var t=We.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var s=d(o,2),i=s[0],u=s[1];d(i.split(_),1)[0]===e&&n.push(u)}return n}var Xe=undefined!=typeof globalThisglobalThisundefined!=typeof windowwindowundefined!=typeof globalglobalundefined!=typeof selfself{};function Ye(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,default)e.defaulte}function Je(e){if(e.__esModule)return e;var t=e.default;if(function==typeof t){var n=function e(){if(this instanceof e){var n=[null];n.push.apply(n,arguments);var r=Function.bind.apply(t,n);return new r}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,__esModule,{value!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.getr{enumerable!0,getfunction(){return e[t]}})})),n}var $e=tt,et=null;try{et=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function tt(e,t,n){this.low=0e,this.high=0t,this.unsigned=!!n}function nt(e){return!0===(e&&e.__isLong__)}tt.prototype.__isLong__,Object.defineProperty(tt.prototype,__isLong__,{value!0}),tt.isLong=nt;var rt={},at={};function ot(e,t){var n,r,a;return t(a=0=(e=0)&&e256)&&(r=at[e])r(n=it(e,(0e)0-10,!0),a&&(at[e]=n),n)(a=-128=(e=0)&&e128)&&(r=rt[e])r(n=it(e,e0-10,!1),a&&(rt[e]=n),n)}function st(e,t){if(isNaN(e))return tytmt;if(t){if(e0)return yt;if(e=dt)return Nt}else{if(e=-ht)return wt;if(e+1=ht)return xt}return e0st(-e,t).neg()it(e%lt0,elt0,t)}function it(e,t,n){return new tt(e,t,n)}tt.fromInt=ot,tt.fromNumber=st,tt.fromBits=it;var ut=Math.pow;function ct(e,t,n){if(0===e.length)throw Error(empty string);if(NaN===eInfinity===e+Infinity===e-Infinity===e)return mt;if(number==typeof t(n=t,t=!1)t=!!t,(n=n10)236n)throw RangeError(radix);var r;if((r=e.indexOf(-))0)throw Error(interior hyphen);if(0===r)return ct(e.substring(1),t,n).neg();for(var a=st(ut(n,8)),o=mt,s=0;se.length;s+=8){var i=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+i),n);if(i8){var c=st(ut(n,i));o=o.mul(c).add(st(u))}else o=(o=o.mul(a)).add(st(u))}return o.unsigned=t,o}function pt(e,t){returnnumber==typeof est(e,t)string==typeof ect(e,t)it(e.low,e.high,boolean==typeof tte.unsigned)}tt.fromString=ct,tt.fromValue=pt;var lt=4294967296,dt=ltlt,ht=dt2,ft=ot(124),mt=ot(0);tt.ZERO=mt;var yt=ot(0,!0);tt.UZERO=yt;var vt=ot(1);tt.ONE=vt;var gt=ot(1,!0);tt.UONE=gt;var bt=ot(-1);tt.NEG_ONE=bt;var xt=it(-1,2147483647,!1);tt.MAX_VALUE=xt;var Nt=it(-1,-1,!0);tt.MAX_UNSIGNED_VALUE=Nt;var wt=it(0,-2147483648,!1);tt.MIN_VALUE=wt;var kt=tt.prototype;kt.toInt=function(){return this.unsignedthis.low0this.low},kt.toNumber=function(){return this.unsigned(this.high0)lt+(this.low0)this.highlt+(this.low0)},kt.toString=function(e){if((e=e10)236e)throw RangeError(radix);if(this.isZero())return0;if(this.isNegative()){if(this.eq(wt)){var t=st(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return-+this.neg().toString(e)}for(var a=st(ut(e,6),this.unsigned),o=this,s=;;){var i=o.div(a),u=(o.sub(i.mul(a)).toInt()0).toString(e);if((o=i).isZero())return u+s;for(;u.length6;)u=0+u;s=+u+s}},kt.getHighBits=function(){return this.high},kt.getHighBitsUnsigned=function(){return this.high0},kt.getLowBits=function(){return this.low},kt.getLowBitsUnsigned=function(){return this.low0},kt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(wt)64this.neg().getNumBitsAbs();for(var e=0!=this.highthis.highthis.low,t=31;t0&&0==(e&1t);t--);return 0!=this.hight+33t+1},kt.isZero=function(){return 0===this.high&&0===this.low},kt.eqz=kt.isZero,kt.isNegative=function(){return!this.unsigned&&this.high0},kt.isPositive=function(){return this.unsignedthis.high=0},kt.isOdd=function(){return 1==(1&this.low)},kt.isEven=function(){return 0==(1&this.low)},kt.equals=function(e){return nt(e)(e=pt(e)),(this.unsigned===e.unsignedthis.high31!=1e.high31!=1)&&(this.high===e.high&&this.low===e.low)},kt.eq=kt.equals,kt.notEquals=function(e){return!this.eq(e)},kt.neq=kt.notEquals,kt.ne=kt.notEquals,kt.lessThan=function(e){return this.comp(e)0},kt.lt=kt.lessThan,kt.lessThanOrEqual=function(e){return this.comp(e)=0},kt.lte=kt.lessThanOrEqual,kt.le=kt.lessThanOrEqual,kt.greaterThan=function(e){return this.comp(e)0},kt.gt=kt.greaterThan,kt.greaterThanOrEqual=function(e){return this.comp(e)=0},kt.gte=kt.greaterThanOrEqual,kt.ge=kt.greaterThanOrEqual,kt.compare=function(e){if(nt(e)(e=pt(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n-1!t&&n1this.unsignede.high0this.high0e.high===this.high&&e.low0this.low0-11this.sub(e).isNegative()-11},kt.comp=kt.compare,kt.negate=function(){return!this.unsigned&&this.eq(wt)wtthis.not().add(vt)},kt.neg=kt.negate,kt.add=function(e){nt(e)(e=pt(e));var t=this.high16,n=65535&this.high,r=this.low16,a=65535&this.low,o=e.high16,s=65535&e.high,i=e.low16,u=0,c=0,p=0,l=0;return p+=(l+=a+(65535&e.low))16,c+=(p+=r+i)16,u+=(c+=n+s)16,u+=t+o,it((p&=65535)16(l&=65535),(u&=65535)16(c&=65535),this.unsigned)},kt.subtract=function(e){return nt(e)(e=pt(e)),this.add(e.neg())},kt.sub=kt.subtract,kt.multiply=function(e){if(this.isZero())return mt;if(nt(e)(e=pt(e)),et)return it(et.mul(this.low,this.high,e.low,e.high),et.get_high(),this.unsigned);if(e.isZero())return mt;if(this.eq(wt))return e.isOdd()wtmt;if(e.eq(wt))return this.isOdd()wtmt;if(this.isNegative())return e.isNegative()this.neg().mul(e.neg())this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(ft)&&e.lt(ft))return st(this.toNumber()e.toNumber(),this.unsigned);var t=this.high16,n=65535&this.high,r=this.low16,a=65535&this.low,o=e.high16,s=65535&e.high,i=e.low16,u=65535&e.low,c=0,p=0,l=0,d=0;return l+=(d+=au)16,p+=(l+=ru)16,l&=65535,p+=(l+=ai)16,c+=(p+=nu)16,p&=65535,c+=(p+=ri)16,p&=65535,c+=(p+=as)16,c+=tu+ni+rs+ao,it((l&=65535)16(d&=65535),(c&=65535)16(p&=65535),this.unsigned)},kt.mul=kt.multiply,kt.divide=function(e){if(nt(e)(e=pt(e)),e.isZero())throw Error(division by zero);var t,n,r;if(et)return this.unsigned-2147483648!==this.high-1!==e.low-1!==e.highit((this.unsignedet.div_uet.div_s)(this.low,this.high,e.low,e.high),et.get_high(),this.unsigned)this;if(this.isZero())return this.unsignedytmt;if(this.unsigned){if(e.unsigned(e=e.toUnsigned()),e.gt(this))return yt;if(e.gt(this.shru(1)))return gt;r=yt}else{if(this.eq(wt))return e.eq(vt)e.eq(bt)wte.eq(wt)vt(t=this.shr(1).div(e).shl(1)).eq(mt)e.isNegative()vtbt(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(wt))return this.unsignedytmt;if(this.isNegative())return e.isNegative()this.neg().div(e.neg())this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=mt}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()e.toNumber()));for(var a=Math.ceil(Math.log(t)Math.LN2),o=a=481ut(2,a-48),s=st(t),i=s.mul(e);i.isNegative()i.gt(n);)i=(s=st(t-=o,this.unsigned)).mul(e);s.isZero()&&(s=vt),r=r.add(s),n=n.sub(i)}return r},kt.div=kt.divide,kt.modulo=function(e){return nt(e)(e=pt(e)),etit((this.unsignedet.rem_uet.rem_s)(this.low,this.high,e.low,e.high),et.get_high(),this.unsigned)this.sub(this.div(e).mul(e))},kt.mod=kt.modulo,kt.rem=kt.modulo,kt.not=function(){return it(~this.low,~this.high,this.unsigned)},kt.and=function(e){return nt(e)(e=pt(e)),it(this.low&e.low,this.high&e.high,this.unsigned)},kt.or=function(e){return nt(e)(e=pt(e)),it(this.lowe.low,this.highe.high,this.unsigned)},kt.xor=function(e){return nt(e)(e=pt(e)),it(this.low^e.low,this.high^e.high,this.unsigned)},kt.shiftLeft=function(e){return nt(e)&&(e=e.toInt()),0==(e&=63)thise32it(this.lowe,this.highethis.low32-e,this.unsigned)it(0,this.lowe-32,this.unsigned)},kt.shl=kt.shiftLeft,kt.shiftRight=function(e){return nt(e)&&(e=e.toInt()),0==(e&=63)thise32it(this.lowethis.high32-e,this.highe,this.unsigned)it(this.highe-32,this.high=00-1,this.unsigned)},kt.shr=kt.shiftRight,kt.shiftRightUnsigned=function(e){if(nt(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e32it(this.lowet32-e,te,this.unsigned)it(32===ette-32,0,this.unsigned)},kt.shru=kt.shiftRightUnsigned,kt.shr_u=kt.shiftRightUnsigned,kt.toSigned=function(){return this.unsignedit(this.low,this.high,!1)this},kt.toUnsigned=function(){return this.unsignedthisit(this.low,this.high,!0)},kt.toBytes=function(e){return ethis.toBytesLE()this.toBytesBE()},kt.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t8&255,t16&255,t24,255&e,e8&255,e16&255,e24]},kt.toBytesBE=function(){var e=this.high,t=this.low;return[e24,e16&255,e8&255,255&e,t24,t16&255,t8&255,255&t]},tt.fromBytes=function(e,t,n){return ntt.fromBytesLE(e,t)tt.fromBytesBE(e,t)},tt.fromBytesLE=function(e,t){return new tt(e[0]e[1]8e[2]16e[3]24,e[4]e[5]8e[6]16e[7]24,t)},tt.fromBytesBE=function(e,t){return new tt(e[4]24e[5]16e[6]8e[7],e[0]24e[1]16e[2]8e[3],t)};var Tt=Ye($e),St=Ttr({__proto__null,defaultTt},[$e]);function _t(e){return St.fromString(e,!0,16)}function Et(e,t){if(string===t)throw new Error(Cannot convert a string[] to a TypedArray);if(Array.isArray(e)&&(e=Dt(e)),De().getBool(DEBUG)&&function(e,t){for(var n=0;ne.length;n++){var r=e[n];if(isNaN(r)!isFinite(r))throw Error(A tensor of type .concat(t, being uploaded contains ).concat(r,.))}}(e,t),function(e,t){return e instanceof Float32Array&&float32===te instanceof Int32Array&&int32===te instanceof Uint8Array&&bool===t}(e,t))return e;if(null==tfloat32===tcomplex64===t)return new Float32Array(e);if(int32===t)return new Int32Array(e);if(bool===t){for(var n=new Uint8Array(e.length),r=0;rn.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error(Unknown data type .concat(t))}function It(){return De().platform.now()}function Ot(e,t){return void 0===t&&(t=utf-8),t=tutf-8,De().platform.decode(e,t)}function At(e){return null!=De().platform.isTypedArrayDe().platform.isTypedArray(e)function(e){return e instanceof Float32Arraye instanceof Int32Arraye instanceof Uint8Arraye instanceof Uint8ClampedArray}(e)}function Dt(e,t,n){var r,a;if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),boolean==typeof enumber==typeof estring==typeof e_e(e)null==eAt(e)&&n)t.push(e);else if(Array.isArray(e)At(e))for(var o=0;oe.length;++o)Dt(e[o],t,n);else{var s=-1;try{for(var i=l(Object.keys(e)),u=i.next();!u.done;u=i.next()){var c=u.value;^([1-9]+[0-9]0)$.test(c)&&(s=Math.max(s,Number(c)))}}catch(e){r={errore}}finally{try{u&&!u.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}for(o=0;o=s;o++)Dt(e[o],t,n)}return t}_t(c3a5c85c97cb3127),_t(b492b66fbe98f273),_t(9ae16a3b2f90404f);var Mt=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Ct)}return e.prototype.profileKernel=function(e,t,n){var r,a,o,s,i=function(){o=n()},u=It();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();try{for(var c=l(o),p=c.next();!p.done;p=c.next()){p.value.dataSync()}}catch(e){r={errore}}finally{try{p&&!p.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}s=Promise.resolve({kernelMsIt()-u})}if(De().getBool(CHECK_COMPUTATION_FOR_ERRORS))for(var d=function(t){var n=o[t];n.data().then((function(t){!function(e,t,n){if(float32!==t)return!1;for(var r=0;re.length;r++){var a=e[r];if(isNaN(a)!isFinite(a))return console.warn(Found .concat(a, in the result of ').concat(n,')),!0}}(t,n.dtype,e)}))},h=0;ho.length;h++)d(h);return{kernelNamee,outputso,inputst,timeMss.then((function(e){return e.kernelMs})),extraInfos.then((function(e){return null!=e.getExtraProfileInfoe.getExtraProfileInfo()}))}},e.prototype.logKernelProfile=function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,s=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,s]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))},e}();var Ct=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,a,o){var s=number==typeof rhe(.concat(r,ms),9)r.error,i=he(e,25),u=t.rank,c=t.size,p=he(t.shape.toString(),14),l=;for(var d in a){var h=a[d];if(null!=h){var f=h.shapet.shape,m=f.length;l+=.concat(d, ).concat(m,D ).concat(m0f, )}}console.log(%c.concat(i,t%c).concat(s,t%c).concat(u,D ).concat(p,t%c).concat(c,t%c).concat(l,t%c).concat(o),font-weightbold,colorred,colorblue,color orange,color green,color steelblue)},e}();function Ft(e,t,n,r){var a=xe(t),o=function(e,t,n,r){var a=pe(t),o=r[r.length-1],s=new Array(o).fill(0),i=t.length,u=complex64===nVt(e)e;if(i1)for(var c=0;cao;c++)for(var p=co,l=0;lo;l++)s[l]=Math.max(s[l],Rt(u[p+l],0,n).length);return s}(e,t,n,a),s=t.length,i=Lt(e,t,n,a,o),u=[Tensor];return r&&(u.push(  dtype .concat(n)),u.push(  rank .concat(s)),u.push(  shape [.concat(t,])),u.push(  values)),u.push(i.map((function(e){return    +e})).join(n)),u.join(n)}function Rt(e,t,n){return he(Array.isArray(e).concat(parseFloat(e[0].toFixed(7)), + )+.concat(parseFloat(e[1].toFixed(7)),j)ve(e)'.concat(e,')bool===nzt(e)parseFloat(e.toFixed(7)).toString(),t)}function zt(e){return 0===efalsetrue}function Lt(e,t,n,r,a,o){void 0===o&&(o=!0);var s=complex64===n21,i=t[0],u=t.length;if(0===u)returncomplex64===n[Rt(Vt(e)[0],0,n)]bool===n[zt(e[0])][e[0].toString()];if(1===u){if(i20){var c=3s,p=Array.from(e.slice(0,c)),l=Array.from(e.slice((i-3)s,is));returncomplex64===n&&(p=Vt(p),l=Vt(l)),[[+p.map((function(e,t){return Rt(e,a[t],n)})).join(, )+, ..., +l.map((function(e,t){return Rt(e,a[i-3+t],n)})).join(, )+]]}return[[+(complex64===nVt(e)Array.from(e)).map((function(e,t){return Rt(e,a[t],n)})).join(, )+]]}var f=t.slice(1),m=r.slice(1),y=r[0]s,v=[];if(i20){for(var g=0;g3;g++){var b=(x=gy)+y;v.push.apply(v,h([],d(Lt(e.slice(x,b),f,n,m,a,!1)),!1))}v.push(...);for(g=i-3;gi;g++){b=(x=gy)+y;v.push.apply(v,h([],d(Lt(e.slice(x,b),f,n,m,a,g===i-1)),!1))}}else for(g=0;gi;g++){var x;b=(x=gy)+y;v.push.apply(v,h([],d(Lt(e.slice(x,b),f,n,m,a,g===i-1)),!1))}var N=2===u,;v[0]=[+(i0v[0]+N);for(g=1;gv.length-1;g++)v[g]= +v[g]+N;var w=,n;for(g=2;gu;g++)w+=n;return v[v.length-1]= +v[v.length-1]+]+(ow),v}function Vt(e){for(var t=[],n=0;ne.length;n+=2)t.push([e[n],e[n+1]]);return t}var Pt=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=pe(e),null!=n){var a=n.length;ie(a===this.size,(function(){returnLength of values '.concat(a,' does not match the size )+inferred by the shape '.concat(r.size,'.)}))}if(complex64===t)throw new Error(complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).);this.values=nme(t,this.size),this.strides=xe(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;rarguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),ie(n.length===this.rank,(function(){returnThe number of provided coordinates (.concat(n.length,) must )+match the rank (.concat(t.rank,))}));var a=this.locToIndex(n);this.values[a]=e},e.prototype.get=function(){for(var e,t,n=[],r=0;rarguments.length;r++)n[r]=arguments[r];0===n.length&&(n=[0]);var a=0;try{for(var o=l(n),s=o.next();!s.done;s=o.next()){var i=s.value;if(i0i=this.shape[a]){var u=Requested out of range element at .concat(n,. )+  Buffer shape=.concat(this.shape);throw new Error(u)}a++}}catch(t){e={errort}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}for(var c=n[n.length-1],p=0;pn.length-1;++p)c+=this.strides[p]n[p];return this.values[c]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;ne.length-1;++n)t+=this.strides[n]e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;nt.length-1;++n)t[n]=Math.floor(ethis.strides[n]),e-=t[n]this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,rank,{getfunction(){return this.shape.length},enumerable!1,configurable!0}),e.prototype.toTensor=function(){return Bt().makeTensor(this.values,this.shape,this.dtype)},e}(),Bt=null,Kt=null;var jt=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=tfloat32,this.size=pe(e),this.strides=xe(e),this.dataId=n,this.id=r,this.rankType=this.rank5this.rank.toString()higher}return Object.defineProperty(e.prototype,rank,{getfunction(){return this.shape.length},enumerable!1,configurable!0}),e.prototype.buffer=function(){return c(this,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0return[4,this.data()];case 1return e=t.sent(),[2,Kt.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return Kt.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return c(this,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0return[4,this.data()];case 1return e=t.sent(),[2,we(this.shape,e,complex64===this.dtype)]}}))}))},e.prototype.arraySync=function(){return we(this.shape,this.dataSync(),complex64===this.dtype)},e.prototype.data=function(){return c(this,void 0,void 0,(function(){var e,t;return p(this,(function(n){switch(n.label){case 0return this.throwIfDisposed(),e=Bt().read(this.dataId),string!==this.dtype[3,2][4,e];case 1t=n.sent();try{return[2,t.map((function(e){return Ot(e)}))]}catch(e){throw new Error(Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().)}n.label=2;case 2return[2,e]}}))}))},e.prototype.dataToGPU=function(e){return this.throwIfDisposed(),Bt().readToGPU(this.dataId,e)},e.prototype.dataSync=function(){this.throwIfDisposed();var e=Bt().readSync(this.dataId);if(string===this.dtype)try{return e.map((function(e){return Ot(e)}))}catch(e){throw new Error(Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().)}return e},e.prototype.bytes=function(){return c(this,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0return this.throwIfDisposed(),[4,Bt().read(this.dataId)];case 1return e=t.sent(),string===this.dtype[2,e][2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed(this.kerasMask&&this.kerasMask.dispose(),Bt().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,isDisposed,{getfunction(){return this.isDisposedInternal},enumerable!1,configurable!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error(Tensor is disposed.)},e.prototype.print=function(e){return void 0===e&&(e=!1),Kt.print(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Kt.clone(this)},e.prototype.toString=function(e){return void 0===e&&(e=!1),Ft(this.dataSync(),this.shape,this.dtype,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Kt.cast(this,e)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Bt().makeVariable(this,e,t,n)},e}();function qt(){return Re(Tensor,(function(){return jt}))}Object.defineProperty(jt,Symbol.hasInstance,{valuefunction(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),qt();var Ut,Wt,Gt,Ht,Zt,Qt=function(e){function t(t,n,r,a){var o=e.call(this,t.shape,t.dtype,t.dataId,a)this;return o.trainable=n,o.name=r,o}return u(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error(dtype of the new value (.concat(e.dtype,) and )+previous value (.concat(this.dtype,) must match));if(!le(e.shape,this.shape))throw new Error(shape of the new value (.concat(e.shape,) and )+previous value (.concat(this.shape,) must match));Bt().disposeTensor(this),this.dataId=e.dataId,Bt().incRef(this,null)},t.prototype.dispose=function(){Bt().disposeVariable(this),this.isDisposedInternal=!0},t}(jt);Object.defineProperty(Qt,Symbol.hasInstance,{valuefunction(e){return e instanceof jt&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0=R0,e.R1=R1,e.R2=R2,e.R3=R3,e.R4=R4,e.R5=R5,e.R6=R6}(Ut(Ut={})),function(e){e.float32=float32,e.int32=int32,e.bool=int32,e.complex64=complex64}(Wt(Wt={})),function(e){e.float32=float32,e.int32=int32,e.bool=bool,e.complex64=complex64}(Gt(Gt={})),function(e){e.float32=float32,e.int32=float32,e.bool=float32,e.complex64=complex64}(Ht(Ht={})),function(e){e.float32=complex64,e.int32=complex64,e.bool=complex64,e.complex64=complex64}(Zt(Zt={}));var Xt={float32Ht,int32Wt,boolGt,complex64Zt};function Yt(e){return null!=e&&object==typeof e&&texturein e&&e.texture instanceof WebGLTexture}function Jt(e){returnundefined!=typeof GPUBuffer&&null!=e&&object==typeof e&&bufferin e&&e.buffer instanceof GPUBuffer}function $t(e,t){if(e.dtype===t.dtype)return[e,t];var n=function(e,t){if(string===estring===t){if(string===e&&string===t)returnstring;throw new Error(Can not upcast .concat(e, with ).concat(t))}return Xt[e][t]}(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function en(e){var t=[];return tn(e,t,new Set),t}function tn(e,t,n){if(null!=e)if(e instanceof jt)t.push(e);else if(r=e,Array.isArray(r)object==typeof r){var r,a=e;for(var o in a){var s=a[o];n.has(s)(n.add(s),tn(s,t,n))}}}function nn(e){return null!=e.kernelName}var rn=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes0,newTensors0,peakBytes0,kernels[],resultnull,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),an=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new rn}return e.prototype.ready=function(){return c(this,void 0,void 0,(function(){var e,t,n;return p(this,(function(r){switch(r.label){case 0if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1return te.length(n=e[t],[4,this.initializeBackend(n).success])[3,5];case 2return r.sent()[4,this.setBackend(n)][3,4];case 3return r.sent(),[2];case 4return t++,[3,1];case 5throw new Error(Could not initialize any backends, all backend initializations failed.)}}))}))},Object.defineProperty(e.prototype,backend,{getfunction(){if(null!=this.pendingBackendInit)throw new Error(Backend '.concat(this.backendName,' has not yet been initialized. Make )+sure to await tf.ready() or await tf.setBackend() before calling other methods);if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error(The highest priority backend '.concat(t,' has not yet been )+initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods);this.setBackend(t)}return this.backendInstance},enumerable!1,configurable!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactorythis.registryFactory[e].factorynull},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory(Ue(.concat(e, backend was already registered. )+Reusing existing backend factory.),!1)(this.registryFactory[e]={factoryt,priorityn},!0)},e.prototype.setBackend=function(e){return c(this,void 0,void 0,(function(){var t,n,r;return p(this,(function(a){switch(a.label){case 0if(null==this.registryFactory[e])throw new Error(Backend name '.concat(e,' not found in registry));return this.backendName=e,null!=this.registry[e][3,4](this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit[4,n][3,2]);case 1return r=a.sent(),[3,3];case 2r=n,a.label=3;case 3if(!r)return[2,!1];a.label=4;case 4return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Mt(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;Qe(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;Qe(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error(Cannot initialize backend .concat(e,, no registration found.));try{var r=n.factory();if(!rr instanceof oefunction!=typeof r.then)return this.registry[e]=r,{success!0,asyncInit!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(at.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return at.pendingBackendInitId(t.pendingBackendInit=null,Ue(Initialization of backend .concat(e, failed)),Ue(n.stackn.message)),!1}));return this.pendingBackendInit=o,{successo,asyncInit!0}}catch(t){return Ue(Initialization of backend .concat(e, failed)),Ue(t.stackt.message),{success!1,asyncInit!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(.concat(e, backend not found in registry));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error(No backend found in registry.);return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;te.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(oa)return{namen,asyncInito}}throw new Error(Could not initialize any backends, all backend initializations failed.)},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,a=null;if(null==t){if(function!=typeof e)throw new Error(Please provide a function to tidy());t=e}else{if(string!=typeof e&&!(e instanceof String))throw new Error(When calling with two arguments, the first argument to tidy() must be a string);if(function!=typeof t)throw new Error(When calling with two arguments, the 2nd argument to tidy() must be a function);a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error(Cannot return a Promise inside of tidy.),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=on.runKernel(Ve,{xe}),n={xe};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{xfunction(){var t={xe},n={dtypefloat32};return on.runKernel(ze,t,n)}}}),[],{}),t},e.prototype.runKernel=function(e,t,n){if(null==this.backendName&&this.backend,!(null!=He(e,this.backendName)))throw new Error(Kernel '.concat(e,' not registered for backend ').concat(this.backendName,'));return this.runKernelFunc({kernelNamee,inputst,attrsn})},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool(IS_TEST)},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+=complex64===e.dtype31}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-t-a-o;if(s0)throw new Error(Backend '.concat(this.backendName,' has an internal memory leak )+(.concat(s, data ids) after running ').concat(e,'))},e.prototype.runKernelFunc=function(e){var t,n,r,a=this,o=[],s=this.isTapeOn(),i=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=nn(e)e.kernelNamenull!=this.state.activeScopethis.state.activeScope.name;if(nn(e)){var p=e.kernelName,l=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var h=He(p,this.backendName);ie(null!=h,(function(){returnCannot find registered kernel '.concat(p,' for backend ').concat(a.backendName,')})),n=function(){var e=a.backend.numDataIds();r=h.kernelFunc({inputsl,attrsd,backenda.backend});var t=Array.isArray(r)r[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(p,e,t);var n=t.map((function(e){return null!=e.rankea.makeTensorFromTensorInfo(e)}));if(s){var i=a.getTensorsForGradient(p,l,n);o=a.saveTensorsForBackwardMode(i)}return n}}else{var f=e.forwardFunc,m=function(e){s&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return f(a.backend,m)}));var t=Array.isArray(r)r[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var y,v=e.inputs,g=e.attrs,b=nn(e)nulle.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool(DEBUG)a.state.profiling(y=a.profiler.profileKernel(c,v,(function(){return n()})),a.ENV.getBool(DEBUG)&&a.profiler.logKernelProfile(y),t=y.outputs)t=n()})),s&&this.addTapeNode(c,v,t,b,o,g),this.state.profiling&&this.state.activeProfile.kernels.push({namec,bytesAddedthis.state.numBytes-i,totalBytesSnapshotthis.state.numBytes,tensorsAddedthis.state.numTensors-u,totalTensorsSnapshotthis.state.numTensors,inputShapesObject.keys(v).map((function(e){return null!=v[e]v[e].shapenull})),outputShapest.map((function(e){return e.shape})),kernelTimeMsy.timeMs,extraInfoy.extraInfo}),Array.isArray(r)tt[0]},e.prototype.saveTensorsForBackwardMode=function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n},e.prototype.getTensorsForGradient=function(e,t,n){var r=Ze(e);if(null!=r){var a=r.inputsToSave[],o=r.outputsToSave[],s=void 0;r.saveAllInputs(ie(Array.isArray(t),(function(){returnsaveAllInputs is true, expected inputs to be an array.})),s=Object.keys(t).map((function(e){return t[e]})))s=a.map((function(e){return t[e]}));var i=n.filter((function(e,t){return o[t]}));return s.concat(i)}return[]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error(Values passed to engine.makeTensor() are null);n=nfloat32,r=rthis.backend;var a=e;string===n&&ve(e[0])&&(a=e.map((function(e){return t=e,void 0===n&&(n=utf-8),n=nutf-8,De().platform.encode(t,n);var t,n})));var o=r.write(a,t,n),s=new jt(t,n,o,this.nextTensorId());if(this.trackTensor(s,r),string===n){var i=this.state.tensorInfo.get(o),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-i.bytes,i.bytes=u}return s},e.prototype.makeTensorFromDataId=function(e,t,n,r){var a={dataIde,shapet,dtypen=nfloat32};return this.makeTensorFromTensorInfo(a,r)},e.prototype.makeTensorFromTensorInfo=function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,o=new jt(r,a,n,this.nextTensorId());return this.trackTensor(o,t),o},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=nthis.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new Qt(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(Variable with name .concat(a.name, was already registered));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.trackTensor=function(e,t){this.state.numTensors++,string===e.dtype&&this.state.numStringTensors++;var n=0;complex64!==e.dtype&&string!==e.dtype&&(n=e.sizeye(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backendtthis.backend,dtypee.dtype,shapee.shape,bytesn})),e instanceof Qtthis.track(e)},e.prototype.incRef=function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)},e.prototype.removeDataId=function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,string===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),complex64!==e.dtype&&string!==e.dtype){var n=e.sizeye(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push(Memory usage by string tensors is approximate (2 bytes per character))),e},e.prototype.profile=function(e){return c(this,void 0,void 0,(function(){var t,n,r,a,o,s,i,u,c,f,m;return p(this,(function(p){switch(p.label){case 0return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],r=this.state.activeProfile,[4,e()];case 1r.result=p.sent(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,h([],d(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),!1)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,p.label=2;case 2p.trys.push([2,8,9,10]),a=l(this.state.activeProfile.kernels),o=a.next(),p.label=3;case 3return o.done[3,7](s=o.value,i=s,[4,s.kernelTimeMs]);case 4return i.kernelTimeMs=p.sent(),u=s,[4,s.extraInfo];case 5u.extraInfo=p.sent(),p.label=6;case 6return o=a.next(),[3,3];case 7return[3,10];case 8return c=p.sent(),f={errorc},[3,10];case 9try{o&&!o.done&&(m=a.return)&&m.call(a)}finally{if(f)throw f.error}return[7];case 10return[2,this.state.activeProfile]}}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,a,o){var s=this,i={idthis.state.nextTapeNodeId++,kernelNamee,inputst,outputsn,saveda},u=Ze(e);null!=u&&(r=u.gradFunc),null!=r&&(i.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Te(r.size,r.dtype);return s.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length1ee[0],a,o)}),this.state.activeTape.push(i)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track[],nameunnamed scope,idthis.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=en(e),r=new Set(n.map((function(e){return e.id}))),a=0;athis.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.keptr.has(o.id)o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.lengthnullthis.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kepte.scopeId!==s.idt.track(e)}))},e.prototype.gradients=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),ie(t.length0,(function(){returngradients() received an empty list of xs.})),null!=n&&float32!==n.dtype)throw new Error(dy must have 'float32' dtype, but has '.concat(n.dtype,'));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy(forward,e)}));ie(o instanceof jt,(function(){returnThe result y returned by f() must be a tensor.}));var s=function(e,t,n){for(var r={},a={},o=0;ot.length;o++)r[t[o].id]=!0;for(o=0;oe.length;o++){var s=(f=e[o]).inputs;for(var i in s){for(var u=s[i],c=!1,p=0;pt.length;p++)if(r[u.id]){f.outputs.forEach((function(e){return r[e.id]=!0})),c=!0,a[f.id]=!0;break}if(c)break}}var l={};l[n.id]=!0;var d={};for(o=e.length-1;o=0;o--)for(s=(f=e[o]).inputs,p=0;pf.outputs.length;p++)if(l[f.outputs[p].id]){for(var i in s)l[s[i].id]=!0,d[f.id]=!0;break}var h=[];for(o=0;oe.length;o++){var f;if(a[(f=e[o]).id]&&d[f.id]){var m={};for(var i in f.inputs){var y=f.inputs[i];r[y.id]&&(m[i]=y)}var v=Object.assign({},f);v.inputs=m,v.outputs=f.outputs,h.push(v)}}return h}(this.state.activeTape,t,o);if(!r&&0===s.length&&t.length0)throw new Error(Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.);return this.tidy(backward,(function(){var e,r,i={};i[o.id]=null==n(e=o.shape,r=ke(pe(e),float32),on.makeTensor(r,e,float32))n,function(e,t,n,r){for(var a=function(a){var o=t[a],s=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=ns.push(n)s.push(null)})),null==o.gradient)throw new Error(Cannot compute gradient gradient function not found +for .concat(o.kernelName,.));var i=o.gradient(s),u=function(t){if(!(t in i))throw new Error(Cannot backprop through input .concat(t,. )+Available gradients found .concat(Object.keys(i),.));var a=n((function(){return i[t]()}));if(float32!==a.dtype)throw new Error(Error in gradient for op .concat(o.kernelName,. The gradient of input )+.concat(t, must have 'float32' dtype, but has ').concat(a.dtype,'));var s=o.inputs[t];if(!le(a.shape,s.shape))throw new Error(Error in gradient for op .concat(o.kernelName,. The gradient of input )+'.concat(t,' has shape ').concat(a.shape,', which does not match )+the shape of the input '.concat(s.shape,'));if(null==e[s.id])e[s.id]=a;else{var u=e[s.id];e[s.id]=r(u,a),u.dispose()}};for(var c in o.inputs)u(c)},o=t.length-1;o=0;o--)a(o)}(i,s,(function(e){return a.tidy(e)}),sn);var u=t.map((function(e){return i[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n;try{for(var r=l(e.saved),a=r.next();!a.done;a=r.next()){a.value.dispose()}}catch(e){t={errore}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),a.state.activeTape=null),{valueo,gradsu}}))},e.prototype.customGrad=function(e){var t=this;return ie(be(e),(function(){returnThe f passed in customGrad(f) must be a function.})),function(){for(var n,r=[],a=0;aarguments.length;a++)r[a]=arguments[a];ie(r.every((function(e){return e instanceof jt})),(function(){returnThe args passed in customGrad(f)(x1, x2,...) must all be tensors}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,a){return ie((n=e.apply(void 0,h([],d(h(h([],d(r),!1),[a],!1)),!1))).value instanceof jt,(function(){returnThe function f passed in customGrad(f) must return an object where `obj.value` is a tensor})),ie(be(n.gradFunc),(function(){returnThe function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.})),n.value},i=function(e,t){var a=n.gradFunc(e,t),o=Array.isArray(a)a[a];ie(o.length===r.length,(function(){returnThe function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).})),ie(o.every((function(e){return e instanceof jt})),(function(){returnThe function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.}));var s={};return o.forEach((function(e,t){s[t]=function(){return e}})),s};return t.runKernelFunc({forwardFuncs,backwardsFunci,inputso})}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.readToGPU=function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)},e.prototype.time=function(e){return c(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0return t=It(),[4,this.backend.time(e)];case 1return(n=r.sent()).wallMs=It()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,registeredVariables,{getfunction(){return this.state.registeredVariables},enumerable!1,configurable!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new rn,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e}();an.nextTensorId=0,an.nextVariableId=0;var on=function(){var e=Fe();if(null==e._tfengine){var t=new Ie(e);e._tfengine=new an(t)}return function(e){Ce=e}(e._tfengine.ENV),Bt=function(){return e._tfengine},e._tfengine}();function sn(e,t){var n={ae,bt};return on.runKernel(Add,n)}function un(e,t){var n=e;if(At(e))returnstring===t[][e.length];if(Yt(e)){var r=e.channelsRGBA;return[e.height,e.widthr.length]}if(Jt(e))return[e.buffer.size(null==t4ye(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)At(n)&&string!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&De().getBool(TENSORLIKE_CHECK_SHAPE_CONSISTENCY)&&cn(e,a,[]),a}function cn(e,t,n){if(n=n[],Array.isArray(e)At(e)){ie(t.length0,(function(){returnElement arr[.concat(n.join(][),] should be a primitive, )+but is an array of .concat(e.length, elements)})),ie(e.length===t[0],(function(){returnElement arr[.concat(n.join(][),] should have ).concat(t[0], )+elements, but has .concat(e.length, elements)}));for(var r=t.slice(1),a=0;ae.length;++a)cn(e[a],r,n.concat(a))}else ie(0===t.length,(function(){returnElement arr[.concat(n.join(][),] is a primitive, )+but should be an arrayTypedArray of .concat(t[0], elements)}))}function pn(e,t,n,r){if(string_or_numeric!==e){if(null==e)throw new Error(Expected dtype cannot be null.);if(numeric!==e&&e!==tnumeric===e&&string===t)throw new Error(Argument '.concat(n,' passed to ').concat(r,' must )+be .concat(e, tensor, but got ).concat(t, tensor))}}function ln(e,t,n,r){if(void 0===r&&(r=numeric),e instanceof qt())return pn(r,e.dtype,t,n),e;var a=ge(e);if(string!==a&&[bool,int32,float32].indexOf(r)=0&&(a=r),pn(r,a,t,n),null==e!At(e)&&!Array.isArray(e)&&number!=typeof e&&boolean!=typeof e&&string!=typeof e){var o=null==enulle.constructor.name;throw new Error(Argument '.concat(t,' passed to ').concat(n,' must be a )+Tensor or TensorLike, but got '.concat(o,'))}var s=un(e,a);At(e)Array.isArray(e)(e=[e]);var i=string!==aEt(e,a)Dt(e,[],!0);return on.makeTensor(i,s,a)}function dn(e,t,n,r){if(void 0===r&&(r=numeric),!Array.isArray(e))throw new Error(Argument .concat(t, passed to ).concat(n, must be a )+`Tensor[]` or `TensorLike[]`);return e.map((function(e,a){return ln(e,.concat(t,[).concat(a,]),n,r)}))}var hn=__op;function fn(e){var t=Object.keys(e);if(1!==t.length)throw new Error(Please provide an object with a single key (operation name) mapping to a function. Got an object with +.concat(t.length, keys.));var n=t[0],r=e[n];n.endsWith(_)&&(n=n.substring(0,n.length-1)),n+=hn;var a=function(){for(var e=[],t=0;targuments.length;t++)e[t]=arguments[t];on.startScope(n);try{var a=r.apply(void 0,h([],d(e),!1));return _e(a)&&console.error(Cannot return a Promise inside of tidy.),on.endScope(a),a}catch(e){throw on.endScope(null),e}};return Object.defineProperty(a,name,{valuen,configurable!0}),a}var mn=fn({abs_function(e){var t=ln(e,x,abs);if(complex64===t.dtype){var n={xt};return on.runKernel(ComplexAbs,n)}return n={xt},on.runKernel(Abs,n)}});var yn=fn({acos_function(e){var t={xln(e,x,acos)};return on.runKernel(Acos,t)}});var vn=fn({acosh_function(e){var t={xln(e,x,acosh)};return on.runKernel(Acosh,t)}});var gn=fn({add_function(e,t){var n,r=ln(e,a,add),a=ln(t,b,add),o={ar=(n=d($t(r,a),2))[0],ba=n[1]};return on.runKernel(Add,o)}});var bn=fn({addN_function(e){ie(Array.isArray(e),(function(){returnThe argument passed to tf.addN() must be a list of tensors})),ie(e.length=1,(function(){returnMust pass at least one tensor to tf.addN(), but got +.concat(e.length)}));var t=e.map((function(e,t){return ln(e,tensors.concat(t),addN)})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error(All tensors passed to tf.addN() must have the same dtype)})),t.forEach((function(e){if(!le(e.shape,n.shape))throw new Error(All tensors passed to tf.addN() must have the same shape)}));var r=t;return on.runKernel(AddN,r)}});var xn=fn({all_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={xln(e,x,all,bool)},a={axist,keepDimsn};return on.runKernel(All,r,a)}});var Nn=fn({any_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={xln(e,x,any,bool)},a={axist,keepDimsn};return on.runKernel(Any,r,a)}});var wn=fn({argMax_function(e,t){void 0===t&&(t=0);var n={xln(e,x,argMax)},r={axist};return on.runKernel(ArgMax,n,r)}});var kn=fn({argMin_function(e,t){void 0===t&&(t=0);var n={xln(e,x,argMin)},r={axist};return on.runKernel(ArgMin,n,r)}});var Tn=fn({asin_function(e){var t={xln(e,x,asin)};return on.runKernel(Asin,t)}});var Sn=fn({asinh_function(e){var t={xln(e,x,asinh)};return on.runKernel(Asinh,t)}});var _n=fn({atan_function(e){var t={xln(e,x,atan)};return on.runKernel(Atan,t)}});var En=fn({atan2_function(e,t){var n,r=ln(e,a,atan2),a=ln(t,b,atan2),o={ar=(n=d($t(r,a),2))[0],ba=n[1]};return on.runKernel(Atan2,o)}});var In=fn({atanh_function(e){var t={xln(e,x,atanh)};return on.runKernel(Atanh,t)}});var On=fn({cast_function(e,t){var n=ln(e,x,cast);if(!function(e){returnbool===ecomplex64===efloat32===eint32===estring===e}(t))throw new Error(Failed to cast to unknown dtype .concat(t));if(string===t&&string!==n.dtypestring!==t&&string===n.dtype)throw new Error(Only strings can be casted to strings);var r={xn},a={dtypet};return on.runKernel(ze,r,a)}});function An(e,t,n,r,a,o,s,i){var u,c;void 0===s&&(s=!1),void 0===i&&(i=channelsLast);var p=d([-1,-1,-1,-1],4),l=p[0],h=p[1],f=p[2],m=p[3];if(channelsLast===i)l=(u=d(e,4))[0],h=u[1],f=u[2],m=u[3];else{if(channelsFirst!==i)throw new Error(Unknown dataFormat .concat(i));l=(c=d(e,4))[0],m=c[1],h=c[2],f=c[3]}var y,v=d(t,4),g=v[0],b=v[1],x=v[3],N=d(Dn(n),2),w=N[0],k=N[1],T=d(Dn(r),2),S=T[0],_=T[1],E=Mn(g,S),I=Mn(b,_),O=function(e,t,n,r,a,o,s,i,u){var c,p,l;if(number==typeof e){c={tope,bottome,lefte,righte,type0===eVALIDNUMBER};var d=function(e,t,n,r,a){null==r&&(r=function(e,t,n,r){void 0===r&&(r=1);var a=Mn(t,r);return Math.floor((e[0](n-1)-n+a)2)}(e,t,n));var o=e[0],s=e[1],i=Cn((o-t+2r)n+1,a),u=Cn((s-t+2r)n+1,a);return[i,u]}([t,n],o,r,e,i);p=d[0],l=d[1]}else if(same===e){p=Math.ceil(tr),l=Math.ceil(na);var h=Math.max(0,(p-1)r+o-t),f=Math.max(0,(l-1)a+s-n);c={topm=Math.floor(h2),bottomy=h-m,leftv=Math.floor(f2),rightg=f-v,typeSAME}}else if(valid===e)c={top0,bottom0,left0,right0,typeVALID},p=Math.ceil((t-o+1)r),l=Math.ceil((n-s+1)a);else{if(object!=typeof e)throw Error(Unknown padding parameter .concat(e));var m,y,v,g;c={topm=channelsLast===ue[1][0]e[2][0],bottomy=channelsLast===ue[1][1]e[2][1],leftv=channelsLast===ue[2][0]e[3][0],rightg=channelsLast===ue[2][1]e[3][1],type0===m&&0===y&&0===v&&0===gVALIDEXPLICIT},p=Cn((t-o+m+y)r+1,i),l=Cn((n-s+v+g)a+1,i)}return{padInfoc,outHeightp,outWidthl}}(a,h,f,w,k,E,I,o,i),A=O.padInfo,D=O.outHeight,M=O.outWidth,C=sxmx;returnchannelsFirst===iy=[l,C,D,M]channelsLast===i&&(y=[l,D,M,C]),{batchSizel,dataFormati,inHeighth,inWidthf,inChannelsm,outHeightD,outWidthM,outChannelsC,padInfoA,strideHeightw,strideWidthk,filterHeightg,filterWidthb,effectiveFilterHeightE,effectiveFilterWidthI,dilationHeightS,dilationWidth_,inShapee,outShapey,filterShapet}}function Dn(e){returnnumber==typeof e[e,e,e]2===e.length[e[0],e[1],1]e}function Mn(e,t){return t=1ee+(e-1)(t-1)}function Cn(e,t){if(!t)return Math.trunc(e);switch(t){caseroundreturn Math.round(e);caseceilreturn Math.ceil(e);casefloorreturn Math.floor(e);defaultthrow new Error(Unknown roundingMode .concat(t))}}function Fn(e){var t=d(Dn(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function Rn(e,t){return Fn(e)Fn(t)}function zn(e){return Dn(e).every((function(e){return e0}))}function Ln(e,t,n){if(null!=n){if(string==typeof t)throw Error(Error in .concat(e, pad must be an integer when using )+dimRoundingMode .concat(n, but got pad ).concat(t,.));if(number==typeof t)ie(de(t),(function(){returnError in .concat(e, pad must be an integer when using )+dimRoundingMode .concat(n, but got pad ).concat(t,.)}));else{if(object!=typeof t)throw Error(Error in .concat(e, Unknown padding parameter ).concat(t));t.forEach((function(t){t.forEach((function(t){ie(de(t),(function(){returnError in .concat(e, pad must be an integer when using )+dimRoundingMode .concat(n, but got pad ).concat(t,.)}))}))}))}}}var Vn=fn({reshape_function(e,t){var n={xln(e,x,reshape,string_or_numeric)},r={shapet};return on.runKernel(Reshape,n,r)}});var Pn=fn({avgPool_function(e,t,n,r,a){var o=ln(e,x,avgPool,float32);ie(Rn(n,1),(function(){returnError in avgPool Either strides or dilations must be 1. +Got strides .concat(n, and dilations ').concat(1,')}));var s=o,i=!1;3===o.rank&&(i=!0,s=Vn(o,[1,o.shape[0],o.shape[1],o.shape[2]])),ie(4===s.rank,(function(){returnError in avgPool x must be rank 4 but got rank .concat(s.rank,.)})),Ln(avgPool,r,a);var u={xs},c={filterSizet,stridesn,padr,dimRoundingModea},p=on.runKernel(AvgPool,u,c);return p=On(p,o.dtype),iVn(p,[p.shape[1],p.shape[2],p.shape[3]])p}});var Bn=fn({avgPool3d_function(e,t,n,r,a,o){void 0===o&&(o=NDHWC);var s=ln(e,x,avgPool3d,float32),i=s,u=!1;4===s.rank&&(u=!0,i=Vn(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),ie(5===i.rank,(function(){returnError in avgPool3d x must be rank 5 but got rank .concat(i.rank,.)})),ie(NDHWC===o,(function(){returnError in avgPool3d Only NDHWC is currently supported, +but got dataFormat of .concat(o)})),ie(number==typeof n&&n0Array.isArray(n)&&n[0]0&&n[1]0&&n[2]0,(function(){returnError in avgPool3d Stride must be  0, but got '.concat(n,')})),Ln(avgPool3d,r,a);var c={xi},p={filterSizet,stridesn,padr,dimRoundingModea,dataFormato},l=on.runKernel(AvgPool3D,c,p);return l=On(l,i.dtype),uVn(l,[l.shape[1],l.shape[2],l.shape[3],l.shape[4]])l}});var Kn=fn({clone_function(e){var t={xln(e,x,clone,string_or_numeric)};return on.runKernel(Ve,t)}});var jn=fn({concat_function(e,t){void 0===t&&(t=0),ie(e.length=1,(function(){returnPass at least one tensor to concat}));var n=dn(e,tensors,concat,string_or_numeric);if(complex64===n[0].dtype&&n.forEach((function(e){if(complex64!==e.dtype)throw new Error(Cannot concatenate complex64 tensors with a tensorn          with dtype .concat(e.dtype,. ))})),1===n.length)return Kn(n[0]);var r=n,a={axist};return on.runKernel(Concat,r,a)}});var qn=fn({matMul_function(e,t,n,r){var a;void 0===n&&(n=!1),void 0===r&&(r=!1);var o=ln(e,a,matMul),s=ln(t,b,matMul),i={ao=(a=d($t(o,s),2))[0],bs=a[1]},u={transposeAn,transposeBr};return on.runKernel(BatchMatMul,i,u)}});var Un=fn({mul_function(e,t){var n,r=ln(e,a,mul),a=ln(t,b,mul),o={ar=(n=d($t(r,a),2))[0],ba=n[1]};return on.runKernel(Multiply,o)}});var Wn=fn({sigmoid_function(e){var t={xln(e,x,sigmoid,float32)};return on.runKernel(Sigmoid,t)}});var Gn=fn({slice_function(e,t,n){var r=ln(e,x,slice,string_or_numeric);if(0===r.rank)throw new Error(Slicing scalar is not possible);var a={xr},o={begint,sizen};return on.runKernel(Slice,a,o)}});var Hn=fn({tanh_function(e){var t={xln(e,x,tanh,float32)};return on.runKernel(Tanh,t)}});var Zn=fn({basicLSTMCell_function(e,t,n,r,a,o){var s=ln(e,forgetBias,basicLSTMCell),i=ln(t,lstmKernel,basicLSTMCell),u=ln(n,lstmBias,basicLSTMCell),c=ln(r,data,basicLSTMCell),p=ln(a,c,basicLSTMCell),l=ln(o,h,basicLSTMCell),d=jn([c,l],1),h=qn(d,i),f=gn(h,u),m=f.shape[0],y=f.shape[1]4,v=[m,y],g=Gn(f,[0,0],v),b=Gn(f,[0,y],v),x=Gn(f,[0,2y],v),N=Gn(f,[0,3y],v),w=gn(Un(Wn(g),Hn(b)),Un(p,Wn(gn(s,x))));return[w,Un(Hn(w),Wn(N))]}});var Qn=fn({batchToSpaceND_function(e,t,n){var r=ln(e,x,batchToSpaceND),a=t.reduce((function(e,t){return et}));ie(r.rank=1+t.length,(function(){returninput rank is .concat(r.rank, but should be  than blockShape.length ).concat(t.length)})),ie(n.length===t.length,(function(){returncrops.length is .concat(n.length, but should be equal to blockShape.length  ).concat(t.length)})),ie(r.shape[0]%a==0,(function(){returninput tensor batch is .concat(r.shape[0], but is not divisible by the product of )+the elements of blockShape .concat(t.join(  ), === ).concat(a)}));var o={xr},s={blockShapet,cropsn};return on.runKernel(BatchToSpaceND,o,s)}});var Xn=fn({batchNorm_function(e,t,n,r,a,o){null==o&&(o=.001);var s,i,u=ln(e,x,batchNorm),c=ln(t,mean,batchNorm),p=ln(n,variance,batchNorm);null!=a&&(s=ln(a,scale,batchNorm)),null!=r&&(i=ln(r,offset,batchNorm)),ie(c.rank===p.rank,(function(){returnBatch normalization gradient requires mean and variance to have equal ranks.})),ie(null==ic.rank===i.rank,(function(){returnBatch normalization gradient requires mean and offset to have equal ranks.})),ie(null==sc.rank===s.rank,(function(){returnBatch normalization gradient requires mean and scale to have equal ranks.}));var l=function(e){return 0===e.rank1===e.rankVn(e,[1,1,1,e.size])2===e.rankVn(e,[1,1,e.shape[0],e.shape[1]])3===e.rankVn(e,[1,e.shape[0],e.shape[1],e.shape[2]])e}(u),d={xl,scales,offseti,meanc,variancep},h={varianceEpsilono},f=on.runKernel(FusedBatchNorm,d,h);return Vn(f,u.shape)}});var Yn=fn({batchNorm2d_function(e,t,n,r,a,o){var s,i,u=ln(e,x,batchNorm),c=ln(t,mean,batchNorm),p=ln(n,variance,batchNorm);return null!=a&&(s=ln(a,scale,batchNorm)),null!=r&&(i=ln(r,offset,batchNorm)),ie(2===u.rank,(function(){returnError in batchNorm2D x must be rank 2 but got rank +.concat(u.rank,.)})),ie(2===c.rank1===c.rank,(function(){returnError in batchNorm2D mean must be rank 2 or rank 1 but +got rank .concat(c.rank,.)})),ie(2===p.rank1===p.rank,(function(){returnError in batchNorm2D variance must be rank 2 or rank 1 +but got rank .concat(p.rank,.)})),null!=s&&ie(2===s.rank1===s.rank,(function(){returnError in batchNorm2D scale must be rank 2 or rank 1 +but got rank .concat(s.rank,.)})),null!=i&&ie(2===i.rank1===i.rank,(function(){returnError in batchNorm2D offset must be rank 2 or rank 1 +but got rank .concat(i.rank,.)})),Xn(u,c,p,i,s,o)}});var Jn=fn({batchNorm3d_function(e,t,n,r,a,o){var s,i,u=ln(e,x,batchNorm),c=ln(t,mean,batchNorm),p=ln(n,variance,batchNorm);return null!=a&&(s=ln(a,scale,batchNorm)),null!=r&&(i=ln(r,offset,batchNorm)),ie(3===u.rank,(function(){returnError in batchNorm3D x must be rank 3 but got rank +.concat(u.rank,.)})),ie(3===c.rank1===c.rank,(function(){returnError in batchNorm3D mean must be rank 3 or rank 1 but +got rank .concat(c.rank,.)})),ie(3===p.rank1===p.rank,(function(){returnError in batchNorm3D variance must be rank 3 or rank 1 +but got rank .concat(p.rank,.)})),null!=s&&ie(3===s.rank1===s.rank,(function(){returnError in batchNorm3D scale must be rank 3 or rank 1 +but got rank .concat(s.rank,.)})),null!=i&&ie(3===i.rank1===i.rank,(function(){returnError in batchNorm3D offset must be rank 3 or rank 1 +but got rank .concat(i.rank,.)})),Xn(u,c,p,i,s,o)}});var $n=fn({batchNorm4d_function(e,t,n,r,a,o){var s,i,u=ln(e,x,batchNorm),c=ln(t,mean,batchNorm),p=ln(n,variance,batchNorm);return null!=a&&(s=ln(a,scale,batchNorm)),null!=r&&(i=ln(r,offset,batchNorm)),ie(4===u.rank,(function(){returnError in batchNorm4D x must be rank 4 but got rank +.concat(u.rank,.)})),ie(4===c.rank1===c.rank,(function(){returnError in batchNorm4D mean must be rank 4 or rank 1 but +got rank .concat(c.rank,.)})),ie(4===p.rank1===p.rank,(function(){returnError in batchNorm4D variance must be rank 4 or rank 1 +but got rank .concat(p.rank,.)})),null!=s&&ie(4===s.rank1===s.rank,(function(){returnError in batchNorm4D scale must be rank 4 or rank 1 +but got rank .concat(s.rank,.)})),null!=i&&ie(4===i.rank1===i.rank,(function(){returnError in batchNorm4D offset must be rank 4 or rank 1 +but got rank .concat(i.rank,.)})),Xn(u,c,p,i,s,o)}});var er=fn({bincount_function(e,t,n){var r=ln(e,x,bincount),a=ln(t,weights,bincount);ie(int32===r.dtype,(function(){returnError in bincount input +dtype must be int32, but got .concat(r.dtype)})),ie(n=0,(function(){returnsize must be non-negative, but got .concat(n,.)})),ie(a.size===r.size0===a.size,(function(){returnError in bincount weights must have the same size as input or+0-length, but got input shape .concat(r.shape,, weights shape )+.concat(a.shape,.)}));var o={xr,weightsa},s={sizen};return on.runKernel(Bincount,o,s)}});var tr=fn({bitwiseAnd_function(e,t){var n=ln(e,x,bitwiseAnd),r=ln(t,y,bitwiseAnd);if(!le(n.shape,r.shape))throw new Error(BitwiseAnd Tensors must have the same shape. x .concat(n.shape,, y ).concat(r.shape));if(int32!==n.dtypeint32!==r.dtype)throw new Error(BitwiseAnd Only supports 'int32' values in tensor, found type of x .concat(n.dtype, and type of y ).concat(r.dtype));var a={an,br};return on.runKernel(BitwiseAnd,a)}});var nr=fn({broadcastArgs_function(e,t){var n=ln(e,s0,broadcastArgs,int32),r=ln(t,s1,broadcastArgs,int32);if(1!==n.rank)throw new Error(broadcastArgs() first input must be a vector (rank=1). +Has rank .concat(n.rank));if(1!==r.rank)throw new Error(broadcastArgs() second input must be a vector (rank=1). +Has rank .concat(r.rank));var a={s0n,s1r};return on.runKernel(BroadcastArgs,a)}});var rr=fn({broadcastTo_function(e,t){var n=ln(e,broadcastTo,x),r=n.shape;if(Se(t),t.lengthn.rank)throw new Error(broadcastTo() shape.length=.concat(t.length,  input.rank=).concat(n.rank,.));if(t.lengthn.rank){for(var a=n.shape.slice();a.lengtht.length;)a.unshift(1);n=Vn(n,a)}for(var o=n.shape,s=Array.from(t),i=t.length-1;i=0;i--)if(o[i]===t[i])s[i]=1;else if(1!==n.shape[i])throw new Error(broadcastTo() [.concat(r,] cannot be broadcast to [).concat(t,].));var u=s.map((function(e,t){return e1t-1})).filter((function(e){return e=0}));if(0===u.length)return Kn(n);var c={xn},p={repss};return on.runKernel(Pe,c,p)}});function ar(e,t,n){return void 0===t&&(t=float32),t=tfloat32,Se(e),new Pt(e,t,n)}var or=fn({ceil_function(e){var t={xln(e,x,ceil,float32)};return on.runKernel(Ceil,t)}});function sr(e,t,n){Se(e);var r={shapee,valuet,dtypen=nge(t)};return on.runKernel(Fill,{},r)}var ir=fn({clipByValue_function(e,t,n){var r=ln(e,x,clipByValue);if(ie(t=n,(function(){returnError in clip min (.concat(t,) must be )+less than or equal to max (.concat(n,).)})),t===n)return sr(r.shape,t,r.dtype);var a={xr},o={clipValueMint,clipValueMaxn};return on.runKernel(ClipByValue,a,o)}});var ur=fn({complex_function(e,t){var n=ln(e,real,complex),r=ln(t,imag,complex);ue(n.shape,r.shape,real and imag shapes, .concat(n.shape, and ).concat(r.shape,, )+must match in call to tf.complex().);var a={realn,imagr};return on.runKernel(Complex,a)}});var cr=fn({concat1d_function(e){return jn(e,0)}});var pr=fn({concat2d_function(e,t){return jn(e,t)}});var lr=fn({concat3d_function(e,t){return jn(e,t)}});var dr=fn({concat4d_function(e,t){return jn(e,t)}});var hr=fn({conv2d_function(e,t,n,r,a,o,s){void 0===a&&(a=NHWC),void 0===o&&(o=[1,1]);var i=ln(e,x,conv2d,float32),u=ln(t,filter,conv2d,float32),c=i,p=!1;3===i.rank&&(p=!0,c=Vn(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ie(4===c.rank,(function(){returnError in conv2d input must be rank 4, but got rank .concat(c.rank,.)})),ie(4===u.rank,(function(){returnError in conv2d filter must be rank 4, but got rank +.concat(u.rank,.)})),Ln(conv2d,r,s);var l=NHWC===ac.shape[3]c.shape[1];ie(l===u.shape[2],(function(){returnError in conv2d depth of input (.concat(l,) must match )+input depth for filter .concat(u.shape[2],.)})),ie(Rn(n,o),(function(){returnError in conv2D Either strides or dilations must be 1. +Got strides .concat(n, and dilations ').concat(o,')})),ie(zn(o),(function(){returnError in conv2D Dilated rates should be larger than 0.})),ie(zn(n),(function(){returnError in conv2D Strides should be larger than 0.}));var d={xc,filteru},h={stridesn,padr,dataFormata,dilationso,dimRoundingModes},f=on.runKernel(Conv2D,d,h);return pVn(f,[f.shape[1],f.shape[2],f.shape[3]])f}});var fr=fn({conv1d_function(e,t,n,r,a,o,s){void 0===a&&(a=NWC),void 0===o&&(o=1);var i=ln(e,x,conv1d),u=ln(t,filter,conv1d),c=i,p=!1;2===i.rank&&(p=!0,c=Vn(i,[1,i.shape[0],i.shape[1]])),ie(3===c.rank,(function(){returnError in conv1d input must be rank 3, but got rank .concat(c.rank,.)})),ie(3===u.rank,(function(){returnError in conv1d filter must be rank 3, but got rank +.concat(u.rank,.)})),Ln(conv1d,r,s),ie(c.shape[2]===u.shape[1],(function(){returnError in conv1d depth of input (.concat(c.shape[2],) must match )+input depth for filter .concat(u.shape[1],.)})),ie(Rn(n,o),(function(){returnError in conv1D Either stride or dilation must be 1. +Got stride .concat(n, and dilation ').concat(o,')})),ie(zn(o),(function(){returnError in conv1D Dilated rates should be larger than 0.})),ie(zn(n),(function(){returnError in conv1D Stride should be larger than 0.})),ie(NWC===a,(function(){returnError in conv1d got dataFormat of .concat(a, but only NWC is currently supported.)}));var l=Vn(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=Vn(c,[c.shape[0],1,c.shape[1],c.shape[2]]),h=hr(d,l,[1,n],r,NHWC,[1,o],s);return Vn(h,p[h.shape[2],h.shape[3]][h.shape[0],h.shape[2],h.shape[3]])}});var mr=fn({conv2DBackpropInput_function(e,t,n,r,a,o,s){void 0===o&&(o=NHWC),ie(e.length===t.rank,(function(){returnLength of inShape +(.concat(e.length,) and rank of dy ().concat(t.rank,) must match)}));var i=e,u=t,c=!1;3===t.rank&&(c=!0,u=Vn(t,[1,t.shape[0],t.shape[1],t.shape[2]]),i=[1,e[0],e[1],e[2]]),ie(4===i.length,(function(){returnError in conv2dDerInput inShape must be length 4, but got length +.concat(i.length,.)})),ie(4===u.rank,(function(){returnError in conv2dDerInput dy must be rank 4, but got +rank .concat(u.rank)})),ie(4===n.rank,(function(){returnError in conv2dDerInput filter must be rank 4, but got +rank .concat(n.rank)}));var p=NHWC===oi[3]i[1],l=NHWC===ou.shape[3]u.shape[1];ie(p===n.shape[2],(function(){returnError in conv2dDerInput depth of input (.concat(p,) must )+match input depth for filter .concat(n.shape[2],.)})),ie(l===n.shape[3],(function(){returnError in conv2dDerInput depth of output (.concat(l,) must )+match output depth for filter .concat(n.shape[3],.)})),Ln(conv2dDerInput,a,s);var d={dyu,filtern},h={stridesr,pada,dataFormato,dimRoundingModes,inputShapei},f=on.runKernel(Conv2DBackpropInput,d,h);return cVn(f,[f.shape[1],f.shape[2],f.shape[3]])f}});var yr=fn({conv2dTranspose_function(e,t,n,r,a,o){var s=ln(e,x,conv2dTranspose),i=ln(t,filter,conv2dTranspose);return mr(n,s,i,r,a,NHWC,o)}});var vr=fn({conv3d_function(e,t,n,r,a,o){void 0===a&&(a=NDHWC),void 0===o&&(o=[1,1,1]);var s=ln(e,x,conv3d),i=ln(t,filter,conv3d),u=s,c=!1;4===s.rank&&(c=!0,u=Vn(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),ie(5===u.rank,(function(){returnError in conv3d input must be rank 5, but got rank .concat(u.rank,.)})),ie(5===i.rank,(function(){returnError in conv3d filter must be rank 5, but got rank +.concat(i.rank,.)})),ie(u.shape[4]===i.shape[3],(function(){returnError in conv3d depth of input (.concat(u.shape[4],) must match )+input depth for filter .concat(i.shape[3],.)})),ie(Rn(n,o),(function(){returnError in conv3D Either strides or dilations must be 1. +Got strides .concat(n, and dilations ').concat(o,')})),ie(NDHWC===a,(function(){returnError in conv3d got dataFormat of .concat(a, but only NDHWC is currently supported.)})),ie(zn(o),(function(){returnError in conv3D Dilated rates should be larger than 0.})),ie(zn(n),(function(){returnError in conv3D Strides should be larger than 0.}));var p={xu,filteri},l={stridesn,padr,dataFormata,dilationso},d=on.runKernel(Conv3D,p,l);return cVn(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]])d}});var gr=fn({conv3DBackpropInput_function(e,t,n,r,a){ie(e.length===t.rank,(function(){returnLength of inShape +(.concat(e.length,) and rank of dy ().concat(t.rank,) must match)}));var o=e,s=t,i=!1;4===t.rank&&(i=!0,s=Vn(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);var u=o[4],c=s.shape[4];ie(5===o.length,(function(){returnError in conv3dDerInput inShape must be length 5, but got length +.concat(o.length,.)})),ie(5===s.rank,(function(){returnError in conv3dDerInput dy must be rank 5, but got +rank .concat(s.rank)})),ie(5===n.rank,(function(){returnError in conv3dDerInput filter must be rank 5, but got +rank .concat(n.rank)})),ie(u===n.shape[3],(function(){returnError in conv3dDerInput depth of input (.concat(u,) must )+match input depth for filter .concat(n.shape[3],.)})),ie(c===n.shape[4],(function(){returnError in conv3dDerInput depth of output (.concat(c,) must )+match output depth for filter .concat(n.shape[4],.)}));var p={dys,filtern},l={pada,stridesr,inputShapeo},d=on.runKernel(Conv3DBackpropInputV2,p,l);return iVn(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]])d}});var br=fn({conv3dTranspose_function(e,t,n,r,a){var o=ln(e,x,conv3dTranspose),s=ln(t,filter,conv3dTranspose);return gr(n,o,s,r,a)}});var xr=fn({cos_function(e){var t={xln(e,x,cos,float32)};return on.runKernel(Cos,t)}});var Nr=fn({cosh_function(e){var t={xln(e,x,cosh,float32)};return on.runKernel(Cosh,t)}});var wr=fn({cumprod_function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a={xln(e,x,cumprod)},o={axist,exclusiven,reverser};return on.runKernel(Cumprod,a,o)}});var kr=fn({cumsum_function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a={xln(e,x,cumsum)},o={axist,exclusiven,reverser};return on.runKernel(Cumsum,a,o)}});var Tr=fn({denseBincount_function(e,t,n,r){void 0===r&&(r=!1);var a=ln(e,x,denseBincount),o=ln(t,weights,denseBincount);ie(int32===a.dtype,(function(){returnError in denseBincount input +dtype must be int32, but got .concat(a.dtype)})),ie(a.rank=2,(function(){returnError in denseBincount input must be at most rank 2, but got +rank .concat(a.rank,.)})),ie(n=0,(function(){returnsize must be non-negative, but got .concat(n,.)})),ie(o.size===a.size0===o.size,(function(){returnError in denseBincount weights must have the same shape as x or +0-length, but got x shape .concat(a.shape,, weights shape )+.concat(o.shape,.)}));var s={xa,weightso},i={sizen,binaryOutputr};return on.runKernel(DenseBincount,s,i)}});var Sr=fn({depthToSpace_function(e,t,n){void 0===n&&(n=NHWC);var r=ln(e,x,depthToSpace,float32),a=NHWC===nr.shape[1]r.shape[2],o=NHWC===nr.shape[2]r.shape[3],s=NHWC===nr.shape[3]r.shape[1];ie(t1,(function(){returnblockSize should be  1 for depthToSpace, but was .concat(t)})),ie(at=0,(function(){returnNegative dimension size caused by overflow when multiplyingn    .concat(a, and ).concat(t,  for depthToSpace with input shapen    ).concat(r.shape)})),ie(ot=0,(function(){returnNegative dimension size caused by overflow when multiplyingn    .concat(o, and ).concat(t, for depthToSpace with input shapen        ).concat(r.shape)})),ie(s%(tt)==0,(function(){returnDimension size must be evenly divisible by .concat(tt, but is ).concat(s, for depthToSpace with input shape ).concat(r.shape)}));var i={xr},u={blockSizet,dataFormatn};return on.runKernel(DepthToSpace,i,u)}});var _r=fn({depthwiseConv2d_function(e,t,n,r,a,o,s){void 0===a&&(a=NHWC),void 0===o&&(o=[1,1]);var i=ln(e,x,depthwiseConv2d,float32),u=ln(t,filter,depthwiseConv2d,float32),c=i,p=!1;3===i.rank&&(p=!0,c=Vn(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ie(4===c.rank,(function(){returnError in depthwiseConv2d input must be rank 4, but got +rank .concat(c.rank,.)})),ie(4===u.rank,(function(){returnError in depthwiseConv2d filter must be rank 4, but got rank +.concat(u.rank,.)}));var l=NHWC===ac.shape[3]c.shape[1];ie(l===u.shape[2],(function(){returnError in depthwiseConv2d number of input channels +(.concat(l,) must match the inChannels dimension in )+filter .concat(u.shape[2],.)})),Ln(depthwiseConv2d,r,s);var d={xc,filteru},h={stridesn,padr,dataFormata,dilationso,dimRoundingModes},f=on.runKernel(DepthwiseConv2dNative,d,h);return pVn(f,[f.shape[1],f.shape[2],f.shape[3]])f}});var Er=fn({diag_function(e){var t={xln(e,x,diag)};return on.runKernel(Diag,t)}});var Ir=fn({dilation2d_function(e,t,n,r,a,o){void 0===a&&(a=[1,1]),void 0===o&&(o=NHWC);var s=ln(e,x,dilation2d),i=ln(t,filter,dilation2d);ie(3===s.rank4===s.rank,(function(){returnError in dilation2d input must be rank 3 or 4, but got rank +.concat(s.rank,.)})),ie(3===i.rank,(function(){returnError in dilation2d filter must be rank 3, but got rank +.concat(i.rank,.)})),ie(NHWC===o,(function(){returnError in dilation2d Only NHWC is currently supported, +but got dataFormat of .concat(o)}));var u=s,c=!1;3===s.rank&&(u=Vn(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),ie(u.shape[3]===i.shape[2],(function(){returnError in dilation2d  input and filter must have the same depth .concat(u.shape[3], vs ).concat(i.shape[2])}));var p={xu,filteri},l={stridesn,padr,dilationsa},d=on.runKernel(Dilation2D,p,l);return cVn(d,[d.shape[1],d.shape[2],d.shape[3]])d}});var Or=fn({floorDiv_function(e,t){var n,r=ln(e,a,floorDiv),a=ln(t,b,floorDiv),o={ar=(n=d($t(r,a),2))[0],ba=n[1]};return on.runKernel(FloorDiv,o)}});var Ar=fn({div_function(e,t){var n,r=ln(e,a,div),a=ln(t,b,div);if(r=(n=d($t(r,a),2))[0],a=n[1],int32===r.dtype&&int32===a.dtype)return Or(r,a);var o={ar,ba};return on.runKernel(RealDiv,o,{})}});function Dr(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;an;a++){var o=e[e.length-a-1];null==o&&(o=1);var s=t[t.length-a-1];if(null==s&&(s=1),1===o)r[n-a-1]=s;else if(1===s)r[n-a-1]=o;else{if(o!==s){var i=Operands could not be broadcast together with shapes +.concat(e, and ).concat(t,.);throw Error(i)}r[n-a-1]=o}}return r}var Mr=fn({equal_function(e,t){var n,r=ln(e,a,equal,string_or_numeric),a=ln(t,b,equal,string_or_numeric);r=(n=d($t(r,a),2))[0],a=n[1],Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(Equal,o)}});var Cr=fn({where_function(e,t,n){var r=ln(t,a,where),a=ln(n,b,where),o=ln(e,condition,where,bool),s=Dr(Dr(o.shape,r.shape),a.shape),i={conditionrr(o,s),trr(r,s),err(a,s)};return on.runKernel(Select,i)}});var Fr=fn({zerosLike_function(e){var t={xln(e,x,zerosLike)};return on.runKernel(ZerosLike,t)}});var Rr=fn({divNoNan_function(e,t){var n,r=ln(e,a,div),a=ln(t,b,div);r=(n=d($t(r,a),2))[0],a=n[1];var o=Ar(r,a),s=Fr(o),i=Mr(a,s);return Cr(i,s,o)}});var zr=fn({dot_function(e,t){var n=ln(e,t1,dot),r=ln(t,t2,dot);ie(!(1!==n.rank&&2!==n.rank1!==r.rank&&2!==r.rank),(function(){returnError in dot inputs must all be rank 1 or 2, but got ranks +.concat(n.rank, and ).concat(r.rank,.)}));var a=1===n.rankn.sizen.shape[1],o=1===r.rankr.sizer.shape[0];if(ie(a===o,(function(){returnError in dot inner dimensions of inputs must match, but got +.concat(a, and ).concat(o,.)})),1===n.rank&&1===r.rank){var s=Vn(n,[1,-1]),i=Vn(r,[-1,1]),u=qn(s,i);return Vn(u,[])}if(1===n.rank&&2===r.rank){s=Vn(n,[1,-1]),i=Vn(r,[r.shape[0],r.shape[1]]),u=qn(s,i);return Vn(u,[u.size])}if(2===n.rank&&1===r.rank){i=Vn(r,[-1,1]),u=qn(n,i);return Vn(u,[u.size])}return i=Vn(r,[r.shape[0],r.shape[1]]),u=qn(n,i)}});var Lr=fn({einsum_function(e){for(var t=[],n=1;narguments.length;n++)t[n-1]=arguments[n];var r=t.map((function(e,t){return ln(e,tensors.concat(t),einsum)})),a={equatione};return on.runKernel(Le,r,a)}});var Vr=fn({elu_function(e){var t={xln(e,x,elu,float32)};return on.runKernel(Elu,t)}});var Pr=fn({ensureShape_function(e,t){var n=ln(e,x,ensureShape,string_or_numeric);if(!function(e,t){if(e===t)return!0;if(null==enull==t)return!1;if(e.length!==t.length)return!1;for(var n=0;ne.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}(n.shape,t))throw new Error(EnsureShape Shape of tensor .concat(n.shape, is not compatible with expected shape ).concat(t));return e}});var Br=fn({erf_function(e){var t=ln(e,x,erf);ie(int32===t.dtypefloat32===t.dtype,(function(){returnInput dtype must be `int32` or `float32`.})),int32===t.dtype&&(t=On(t,float32));var n={xt};return on.runKernel(Erf,n)}});function Kr(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],o=0,s=0,i=0;ir;i++)-1===n.indexOf(i)a.push(e[o++])a.push(t[s++]);return a}(e,t.map((function(e){return 1})),t)}var jr=fn({max_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={xln(e,x,max)},a={reductionIndicest,keepDimsn};return on.runKernel(Max,r,a)}});var qr=fn({min_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={xln(e,x,min)},a={axist,keepDimsn};return on.runKernel(Min,r,a)}});var Ur=fn({pow_function(e,t){var n,r=ln(e,base,pow),a=ln(t,exp,pow),o={ar=(n=d($t(r,a),2))[0],ba=n[1]};return on.runKernel(Pow,o)}});function Wr(e,t,n,r){if(null==r)r=ge(e);else if(complex64===r)throw new Error(Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).);if(Jt(e)Yt(e)){if(float32!==r&&int32!==r)throw new Error(Creating tensor from GPU data only supports +'float32''int32' dtype, while the dtype is .concat(r,.));return on.backend.createTensorFromGPUData(e,tn,r)}if(!At(e)&&!Array.isArray(e)&&number!=typeof e&&boolean!=typeof e&&string!=typeof e)throw new Error(values passed to tensor(values) must be a numberbooleanstring or an array of numbersbooleansstrings, or a TypedArray);if(null!=t){Se(t);var a=pe(t),o=pe(n);ie(a===o,(function(){returnBased on the provided shape, [.concat(t,], the tensor should have )+.concat(a, values but has ).concat(o)}));for(var s=0;sn.length;++s){var i=n[s],u=s!==n.length-1i!==pe(t.slice(s));ie(n[s]===t[s]!u,(function(){returnError creating a new Tensor. Inferred shape +(.concat(n,) does not match the provided )+shape (.concat(t,). )}))}}return At(e)Array.isArray(e)(e=[e]),t=tn,e=string!==rEt(e,r)Dt(e,[],!0),on.makeTensor(e,t,r)}function Gr(e,t){if((At(e)&&string!==tArray.isArray(e))&&complex64!==t)throw new Error(Error creating a new Scalar value must be a primitive (numberbooleanstring));if(string===t&&At(e)&&!(e instanceof Uint8Array))throw new Error(When making a scalar from encoded string, the value must be `Uint8Array`.);return Wr(e,[],[],t)}var Hr=fn({sqrt_function(e){var t={xln(e,x,sqrt,float32)};return on.runKernel(Sqrt,t)}});var Zr=fn({square_function(e){var t=ln(e,x,square);return on.runKernel(Square,{xt},{})}});var Qr=fn({sum_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ln(e,x,sum);bool===r.dtype&&(r=On(r,int32));var a={xr},o={axist,keepDimsn};return on.runKernel(Sum,a,o)}});function Xr(e,t,n){if(void 0===n&&(n=null),0===e.rank)return mn(e);if(1!==e.rank&&null===n)return Xr(Vn(e,[-1]),t,n);if(1===e.ranknumber==typeof nArray.isArray(n)&&1===n.length){if(1===t)return Qr(mn(e),n);if(t===10)return jr(mn(e),n);if(t===-10)return qr(mn(e),n);if(euclidean===t2===t)return Hr(Qr(Ur(mn(e),Gr(2,int32)),n));throw new Error(Error in norm invalid ord value .concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return jr(Qr(mn(e),n[0]),n[1]-1);if(t===10)return jr(Qr(mn(e),n[1]),n[0]);if(t===-10)return qr(Qr(mn(e),n[1]),n[0]);if(fro===teuclidean===t)return Hr(Qr(Zr(e),n));throw new Error(Error in norm invalid ord value .concat(t))}throw new Error(Error in norm invalid axis .concat(n))}var Yr=fn({norm_function(e,t,n,r){void 0===t&&(t=euclidean),void 0===n&&(n=null),void 0===r&&(r=!1);var a=Xr(e=ln(e,x,norm),t,n),o=a.shape;if(r){var s=fe(n,e.shape);o=Kr(a.shape,s)}return Vn(a,o)}});var Jr=fn({euclideanNorm_function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=!1),Yr(e,euclidean,t,n)}});var $r=fn({exp_function(e){var t={xln(e,x,exp)};return on.runKernel(Exp,t)}});var ea=fn({expandDims_function(e,t){void 0===t&&(t=0);var n=ln(e,x,expandDims,string_or_numeric);ie(t=n.rank,(function(){returnAxis must be = rank of the tensor}));var r={inputn},a={dimt};return on.runKernel(ExpandDims,r,a)}});var ta=fn({expm1_function(e){var t={xln(e,x,expm1)};return on.runKernel(Expm1,t)}});var na=fn({tile_function(e,t){var n=ln(e,x,tile,string_or_numeric);ie(n.rank===t.length,(function(){returnError in transpose rank of input .concat(n.rank, )+must match length of reps .concat(t,.)}));var r={xn},a={repst};return on.runKernel(Pe,r,a)}});var ra=fn({eye_function(e,t,n,r){void 0===r&&(r=float32),null==t&&(t=e);for(var a=ar([e,t],r),o=e=tet,s=0;so;++s)a.set(1,s,s);var i=Vn(a.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return na(ea(i,0),[n[0],1,1]);if(2===n.length)return na(ea(ea(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return na(ea(ea(ea(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(eye() currently supports only 1D and 2D +batchShapes, but received .concat(n.length,D.))}});var aa=fn({floor_function(e){var t={xln(e,x,floor,float32)};return on.runKernel(Floor,t)}});var oa=fn({gather_function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var a={xln(e,x,gather),indicesln(t,indices,gather,int32)},o={axisn,batchDimsr};return on.runKernel(GatherV2,a,o)}});var sa=fn({greater_function(e,t){var n,r=ln(e,a,greater,string_or_numeric),a=ln(t,b,greater,string_or_numeric);r=(n=d($t(r,a),2))[0],a=n[1],Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(Greater,o)}});var ia=fn({greaterEqual_function(e,t){var n,r=ln(e,a,greaterEqual,string_or_numeric),a=ln(t,b,greaterEqual,string_or_numeric);r=(n=d($t(r,a),2))[0],a=n[1],Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(GreaterEqual,o)}});var ua=fn({imag_function(e){var t={inputln(e,input,imag)};return on.runKernel(Imag,t)}});var ca=fn({isFinite_function(e){var t={xln(e,x,isFinite)};return on.runKernel(IsFinite,t)}});var pa=fn({isInf_function(e){var t={xln(e,x,isInf)};return on.runKernel(IsInf,t)}});var la=fn({isNaN_function(e){var t={xln(e,x,isNaN)};return on.runKernel(IsNan,t)}});var da=fn({leakyRelu_function(e,t){void 0===t&&(t=.2);var n={xln(e,x,leakyRelu)},r={alphat};return on.runKernel(LeakyRelu,n,r)}});var ha=fn({less_function(e,t){var n,r=ln(e,a,less,string_or_numeric),a=ln(t,b,less,string_or_numeric);r=(n=d($t(r,a),2))[0],a=n[1],Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(Less,o)}});var fa=fn({lessEqual_function(e,t){var n,r=ln(e,a,lessEqual,string_or_numeric),a=ln(t,b,lessEqual,string_or_numeric);r=(n=d($t(r,a),2))[0],a=n[1],Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(LessEqual,o)}});var ma=fn({localResponseNormalization_function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var o=ln(e,x,localResponseNormalization);ie(4===o.rank3===o.rank,(function(){returnError in localResponseNormalization x must be rank 3 or 4 but gotn               rank .concat(o.rank,.)})),ie(de(t),(function(){returnError in localResponseNormalization depthRadius must be an +integer but got depthRadius .concat(t,.)}));var s=o,i=!1;3===o.rank&&(i=!0,s=Vn(o,[1,o.shape[0],o.shape[1],o.shape[2]]));var u={xs},c={depthRadiust,biasn,alphar,betaa},p=on.runKernel(LRN,u,c);return iVn(p,[p.shape[1],p.shape[2],p.shape[3]])p}});var ya=fn({log_function(e){var t={xln(e,x,log,float32)};return on.runKernel(Log,t)}});var va=fn({log1p_function(e){var t={xln(e,x,log1p)};return on.runKernel(Log1p,t)}});function ga(e){return on.customGrad(e)}var ba=fn({neg_function(e){var t={xln(e,x,neg)};return on.runKernel(Neg,t)}});var xa=fn({softplus_function(e){var t={xln(e,x,softplus)};return on.runKernel(Softplus,t)}});var Na=fn({logSigmoid_function(e){var t=ln(e,x,logSigmoid),n=ga((function(e){return{valueba(xa(ba(e))),gradFuncfunction(t){return Un(t,Wn(ba(e)))}}}));return n(t)}});var wa=fn({sub_function(e,t){var n,r=ln(e,a,sub),a=ln(t,b,sub),o={ar=(n=d($t(r,a),2))[0],ba=n[1]};return on.runKernel(Sub,o)}});var ka=fn({logSoftmax_function(e,t){void 0===t&&(t=-1);var n=ln(e,logits,logSoftmax);if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(Log Softmax along a non-last dimension is not yet supported. +Logits was rank .concat(n.rank, and axis was ).concat(t));var r=ga((function(e,n){var r=jr(e,t,!0),a=wa(e,r),o=wa(On(a,float32),ya(Qr($r(a),t,!0)));n([o]);return{valueo,gradFuncfunction(e,n){var r=d(n,1)[0],a=$r(r);return wa(e,Un(Qr(e,t,!0),a))}}}));return r(n)}});var Ta=fn({logSumExp_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ln(e,x,logSumExp),a=fe(t,r.shape),o=jr(r,a,!0),s=wa(r,o),i=$r(s),u=Qr(i,a),c=ya(u),p=gn(Vn(o,c.shape),c);if(n){var l=Kr(p.shape,a);return Vn(p,l)}return p}});var Sa=fn({logicalAnd_function(e,t){var n=ln(e,a,logicalAnd,bool),r=ln(t,b,logicalAnd,bool);Dr(n.shape,r.shape);var a={an,br};return on.runKernel(LogicalAnd,a)}});var _a=fn({logicalNot_function(e){var t={xln(e,x,logicalNot,bool)};return on.runKernel(LogicalNot,t)}});var Ea=fn({logicalOr_function(e,t){var n=ln(e,a,logicalOr,bool),r=ln(t,b,logicalOr,bool);Dr(n.shape,r.shape);var a={an,br};return on.runKernel(LogicalOr,a)}});var Ia=fn({logicalXor_function(e,t){var n=ln(e,a,logicalXor,bool),r=ln(t,b,logicalXor,bool);return Dr(n.shape,r.shape),Sa(Ea(e,t),_a(Sa(e,t)))}}),Oa=2147483648;var Aa=fn({searchSorted_function(e,t,n){void 0===n&&(n=left);var r=ln(e,sortedSequence,searchSorted),a=ln(t,values,searchSorted),o=r.shape[r.shape.length-1],s=a.shape[a.shape.length-1],i=Vn(r,[-1,o]),u=Vn(a,[-1,s]);if(i.rank2)throw new Error(Sorted input argument must be at least 2-dimensional);if(i.shape[0]!==u.shape[0])throw new Error(Leading dimension of 'sortedSequence' and 'values' must match.);if(pe(u.shape)=Oa)throw new Error(values tensor size must less than .concat(Oa));if(i.shape[1]=Oa)throw new Error(trailing dim_size must less than .concat(Oa, for int32 output type, was ).concat(i.shape[1]));var c={sortedSequencei,valuesu},p={siden};return on.runKernel(SearchSorted,c,p)}});var Da=fn({maxPool_function(e,t,n,r,a){var o=ln(e,x,maxPool),s=o,i=!1;3===o.rank&&(i=!0,s=Vn(o,[1,o.shape[0],o.shape[1],o.shape[2]])),ie(4===s.rank,(function(){returnError in maxPool input must be rank 4 but got rank .concat(s.rank,.)})),ie(Rn(n,1),(function(){returnError in maxPool Either strides or dilations must be 1. +Got strides .concat(n, and dilations ').concat(1,')})),Ln(maxPool,r,a);var u={xs},c={filterSizet,stridesn,padr,dimRoundingModea},p=on.runKernel(MaxPool,u,c);return iVn(p,[p.shape[1],p.shape[2],p.shape[3]])p}});var Ma=fn({maxPool3d_function(e,t,n,r,a,o){void 0===t&&(t=[1,1,1]),void 0===o&&(o=NDHWC);var s=ln(e,x,maxPool3d),i=s,u=!1;4===s.rank&&(u=!0,i=Vn(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),ie(5===i.rank,(function(){returnError in maxPool3d x must be rank 5 but got rank .concat(i.rank,.)})),ie(NDHWC===o,(function(){returnError in maxPool3d Only NDHWC is currently supported, +but got dataFormat of .concat(o)})),Ln(maxPool3d,r,a);var c={xi},p={filterSizet,stridesn,padr,dimRoundingModea,dataFormato},l=on.runKernel(MaxPool3D,c,p);return uVn(l,[l.shape[1],l.shape[2],l.shape[3],l.shape[4]])l}});var Ca=fn({maxPoolWithArgmax_function(e,t,n,r,a){void 0===a&&(a=!1);var o={xln(e,x,maxPoolWithArgmax)},s={filterSizet,stridesn,padr,includeBatchInIndexa},i=on.runKernel(MaxPoolWithArgmax,o,s);return{resulti[0],indexesi[1]}}});var Fa=fn({maximum_function(e,t){var n,r=ln(e,a,maximum),a=ln(t,b,maximum);r=(n=d($t(r,a),2))[0],a=n[1],bool===r.dtype&&(r=On(r,int32),a=On(a,int32)),Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(Maximum,o)}});var Ra=fn({mean_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={xln(e,x,mean)},a={axist,keepDimsn};return on.runKernel(Mean,r,a)}});function za(e,t){if(void 0===t&&(t=float32),Se(e),complex64===t){var n=za(e,float32),r=za(e,float32);return ur(n,r)}var a=Te(pe(e),t);return on.makeTensor(a,e,t)}function La(e,t){if(void 0===t&&(t=float32),Se(e),complex64===t){var n=La(e,float32),r=za(e,float32);return ur(n,r)}var a=ke(pe(e),t);return on.makeTensor(a,e,t)}var Va=fn({minimum_function(e,t){var n,r=ln(e,a,minimum),a=ln(t,b,minimum);r=(n=d($t(r,a),2))[0],a=n[1],bool===r.dtype&&(r=On(r,int32),a=On(a,int32)),Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(Minimum,o)}});var Pa=fn({mirrorPad_function(e,t,n){ie(reflect===nsymmetric===n,(function(){returnInvalid mode. Mode must be either reflect or symmetric. +Got .concat(n,.)}));var r=ln(e,x,mirrorPad);if(0===r.rank)throw new Error(mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad);ie(t.length===r.rank,(function(){returnPadding doesn't match input. Must be .concat(r.rank,. )+Got .concat(t.length,.)}));for(var a=reflect===n10,o=function(e){ie(2===t[e].length,(function(){returnInvalid number of paddings. Must be length of 2 each.})),ie(t[e][0]=0&&t[e][0]=r.shape[e]-a&&t[e][1]=0&&t[e][1]=r.shape[e]-a,(function(){returnPadding in dimension .concat(e, cannot be greater than or equal )+to .concat(r.shape[e]-a, or less than 0 for input of )+shape .concat(r.shape)}))},s=0;sr.rank;s++)o(s);var i={paddingst,moden},u={xr};return on.runKernel(MirrorPad,u,i)}});var Ba=fn({mod_function(e,t){var n,r=ln(e,a,mod),a=ln(t,b,mod),o={ar=(n=d($t(r,a),2))[0],ba=n[1]};return on.runKernel(Mod,o)}});var Ka=fn({moments_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=fe(t,(e=ln(e,x,moments)).shape),a=Ra(e,r,n),o=a.shape;n(o=Kr(a.shape,r));var s=Zr(wa(On(e,float32),Vn(a,o)));return{meana,varianceRa(s,r,n)}}});var ja=fn({multiRNNCell_function(e,t,n,r){for(var a=ln(t,data,multiRNNCell),o=dn(n,c,multiRNNCell),s=dn(r,h,multiRNNCell),i=a,u=[],c=0;ce.length;c++){var p=e[c](i,o[c],s[c]);u.push(p[0]),u.push(p[1]),i=p[1]}var l=[],d=[];for(c=0;cu.length;c+=2)l.push(u[c]),d.push(u[c+1]);return[l,d]}});var qa=fn({multinomial_function(e,t,n,r){void 0===r&&(r=!1);var a=ln(e,logits,multinomial),o=a.size,s=a.rank;if(o2)throw new Error(Error in multinomial you need at least 2 outcomes, but got +.concat(o,.));if(s2)throw new Error(Rank of probabilities must be 1 or 2, but is .concat(s));n=nMath.random();var i={logits1===sVn(a,[1,-1])a},u={numSamplest,seedn,normalizedr},c=on.runKernel(Multinomial,i,u);return 1===sVn(c,[c.size])c}});var Ua=fn({notEqual_function(e,t){var n,r=ln(e,a,notEqual,string_or_numeric),a=ln(t,b,notEqual,string_or_numeric);r=(n=d($t(r,a),2))[0],a=n[1],Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(NotEqual,o)}});var Wa=fn({oneHot_function(e,t,n,r,a){if(void 0===n&&(n=1),void 0===r&&(r=0),void 0===a&&(a=int32),t2)throw new Error(Error in oneHot depth must be =2, but it is .concat(t));var o={indicesln(e,indices,oneHot,int32)},s={dtypea,deptht,onValuen,offValuer};return on.runKernel(OneHot,o,s)}});var Ga=fn({onesLike_function(e){var t={xln(e,x,onesLike)};return on.runKernel(OnesLike,t)}});var Ha=fn({outerProduct_function(e,t){var n=ln(e,v1,outerProduct),r=ln(t,v2,outerProduct);ie(1===n.rank&&1===r.rank,(function(){returnError in outerProduct inputs must be rank 1, but got ranks +.concat(n.rank, and ).concat(r.rank,.)}));var a=Vn(n,[-1,1]),o=Vn(r,[1,-1]);return qn(a,o)}});var Za=fn({pad_function(e,t,n){void 0===n&&(n=0);var r=ln(e,x,pad);if(0===r.rank)throw new Error(pad(scalar) is not defined. Pass non-scalar to pad);var a={paddingst,constantValuen},o={xr};return on.runKernel(PadV2,o,a)}});var Qa=fn({pad1d_function(e,t,n){return void 0===n&&(n=0),ie(2===t.length,(function(){returnInvalid number of paddings. Must be length of 2.})),Za(e,[t],n)}});var Xa=fn({pad2d_function(e,t,n){return void 0===n&&(n=0),ie(2===t.length&&2===t[0].length&&2===t[1].length,(function(){returnInvalid number of paddings. Must be length of 2 each.})),Za(e,t,n)}});var Ya=fn({pad3d_function(e,t,n){return void 0===n&&(n=0),ie(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){returnInvalid number of paddings. Must be length of 2 each.})),Za(e,t,n)}});var Ja=fn({pad4d_function(e,t,n){return void 0===n&&(n=0),ie(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){returnInvalid number of paddings. Must be length of 2 each.})),Za(e,t,n)}});var $a=fn({spaceToBatchND_function(e,t,n){var r=ln(e,x,spaceToBatchND);ie(r.rank=1+t.length,(function(){returninput rank .concat(r.rank, should be  than [blockShape] ).concat(t.length)})),ie(n.length===t.length,(function(){returnpaddings.shape[0] .concat(n.length, must be equal to [blockShape] ).concat(t.length)})),ie(r.shape.reduce((function(e,r,a){return a0&&a=t.lengthe&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0e}),!0),(function(){returninput spatial dimensions .concat(r.shape.slice(1), with paddings ).concat(n.toString(), must be divisible by blockShapes ).concat(t.toString())}));var a={xr},o={blockShapet,paddingsn};return on.runKernel(SpaceToBatchND,a,o)}});var eo=fn({pool_function(e,t,n,r,a,o,s){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r=valid);var i=ln(e,x,maxPool),u=i,c=!1;3===i.rank&&(c=!0,u=Vn(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ie(Rn(o,a),(function(){returnError in pool Either strides or dilations must be 1. +Got strides .concat(o, and dilations ').concat(a,')}));var p,l=function(e,t,n,r,a,o,s){void 0===s&&(s=channelsLast);var i,u=d(Dn(t),2),c=u[0],p=u[1];if(channelsLast===s)i=[c,p,e[3],e[3]];else{if(channelsFirst!==s)throw new Error(Unknown dataFormat .concat(s));i=[c,p,e[1],e[1]]}return An(e,i,n,r,a,o,!1,s)}(u.shape,t,o,a,r),h=[l.dilationHeight,l.dilationWidth];p=same===rfunction(e,t){var n=e.map((function(e,n){return e+(e-1)(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([l.filterHeight,l.filterWidth],h)[[0,0],[0,0]];var f=1===h[0]&&1===h[1],m=d(function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),s=t.map((function(e,t){return(e-o[t]%e)%e})),i=a.map((function(e,t){return e+s[t]})),u=t.map((function(e,t){return[r[t],i[t]]})),c=t.map((function(e,t){return[0,s[t]]}));return[u,c]}([l.inHeight,l.inWidth],h,p),2),y=m[0],v=m[1],g=frvalid,b=fu$a(u,h,y),x=(avg===nfunction(){return Pn(b,t,o,g,s)}function(){return Da(b,t,o,g,s)})(),N=fxQn(x,h,v);return cVn(N,[N.shape[1],N.shape[2],N.shape[3]])N}});var to=fn({prelu_function(e,t){var n={xln(e,x,prelu),alphaln(t,alpha,prelu)};return on.runKernel(Prelu,n)}});var no=fn({prod_function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ln(e,x,prod);bool===r.dtype&&(r=On(r,int32));var a={xr},o={axist,keepDimsn};return on.runKernel(Prod,a,o)}});var ro=fn({raggedGather_function(e,t,n,r){var a={paramsNestedSplitse.map((function(e,t){return ln(e,tensors.concat(t),raggedGather,int32)})),paramsDenseValuesln(t,paramsDenseValues,raggedGather),indicesln(n,indices,raggedGather,int32)},o={outputRaggedRankr},s=on.runKernel(RaggedGather,a,o);return{outputNestedSplitss.slice(0,s.length-1),outputDenseValuess[s.length-1]}}});var ao=fn({raggedRange_function(e,t,n){var r=ln(e,starts,raggedRange),a={startsr,limitsln(t,limits,raggedRange,r.dtype),deltasln(n,deltas,raggedRange,r.dtype)},o=on.runKernel(RaggedRange,a);return{rtNestedSplitso[0],rtDenseValueso[1]}}});var oo=fn({raggedTensorToTensor_function(e,t,n,r,a){var o=ln(e,shape,raggedTensorToTensor,int32),s=ln(t,values,raggedTensorToTensor),i={shapeo,valuess,defaultValueln(n,defaultValue,raggedTensorToTensor,s.dtype),rowPartitionTensorsr.map((function(e,t){return ln(e,tensors.concat(t),raggedTensorToTensor,int32)}))},u={rowPartitionTypesa};return on.runKernel(RaggedTensorToTensor,i,u)}});var so=fn({rand_function(e,t,n){Se(e);var r=pe(e),a=null;if(null==nfloat32===n)a=new Float32Array(r);else if(int32===n)a=new Int32Array(r);else{if(bool!==n)throw new Error(Unknown data type .concat(n));a=new Uint8Array(r)}for(var o=0;or;o++)a[o]=t();return on.makeTensor(a,e,n)}}),io={exports{}};!function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;ne.length;n++){var r=.02519603282416938(t+=e.charCodeAt(n));r-=t=r0,t=(r=t)0,t+=4294967296(r-=t)}return 2.3283064365386963e-10(t0)});n.next=function(){var e=2091639n.s0+2.3283064365386963e-10n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0e)},n.c=1,n.s0=r( ),n.s1=r( ),n.s2=r( ),n.s0-=r(e),n.s00&&(n.s0+=1),n.s1-=r(e),n.s10&&(n.s1+=1),n.s2-=r(e),n.s20&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,s=n.next;return s.int32=function(){return 4294967296n.next()0},s.double=function(){return s()+11102230246251565e-32(2097152s()0)},s.quick=s,o&&(object==typeof o&&a(o,n),s.state=function(){return a(n,{})}),s}t&&t.exportst.exports=on&&n.amdn((function(){return o}))this.alea=o}(0,e,!1)}(io);var uo=io.exports,co={exports{}};!function(e){!function(e,t,n){function r(e){var t=this,n=;t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w19^e^e8},e===(0e)t.x=en+=e;for(var r=0;rn.length+64;r++)t.x^=0n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,s=function(){return(n.next()0)4294967296};return s.double=function(){do{var e=((n.next()11)+(n.next()0)4294967296)(121)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&(object==typeof o&&a(o,n),s.state=function(){return a(n,{})}),s}t&&t.exportst.exports=on&&n.amdn((function(){return o}))this.xor128=o}(0,e,!1)}(co);var po=co.exports,lo={exports{}};!function(e){!function(e,t,n){function r(e){var t=this,n=;t.next=function(){var e=t.x^t.x2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+3624370)+(t.v=t.v^t.v4^e^e1)0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0e)t.x=en+=e;for(var r=0;rn.length+64;r++)t.x^=0n.charCodeAt(r),r==n.length&&(t.d=t.x10^t.x4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,s=function(){return(n.next()0)4294967296};return s.double=function(){do{var e=((n.next()11)+(n.next()0)4294967296)(121)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&(object==typeof o&&a(o,n),s.state=function(){return a(n,{})}),s}t&&t.exportst.exports=on&&n.amdn((function(){return o}))this.xorwow=o}(0,e,!1)}(lo);var ho=lo.exports,fo={exports{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e7)^e24,n^=(e=r[a+1&7])^e10,n^=(e=r[a+3&7])^e3,n^=(e=r[a+4&7])^e7,e=r[a+7&7],n^=(e^=e13)^e9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0t))r[0]=t;else for(t=+t,n=0;nt.length;++n)r[7&n]=r[7&n]15^t.charCodeAt(n)+r[n+1&7]13;for(;r.length8;)r.push(0);for(n=0;n8&&0===r[n];++n);for(8==nr[7]=-1r[n],e.x=r,e.i=0,n=256;n0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,s=function(){return(n.next()0)4294967296};return s.double=function(){do{var e=((n.next()11)+(n.next()0)4294967296)(121)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&(o.x&&a(o,n),s.state=function(){return a(n,{})}),s}t&&t.exportst.exports=on&&n.amdn((function(){return o}))this.xorshift7=o}(0,e,!1)}(fo);var mo=fo.exports,yo={exports{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+16405315270,n=a[o+34&127],e=a[o=o+1&127],n^=n13,e^=e17,n^=n15,e^=e12,n=a[o]=n^e,t.i=o,n+(r^r16)0},function(e,t){var n,r,a,o,s,i=[],u=128;for(t===(0t)(r=t,t=null)(t+=0,r=0,u=Math.max(u,t.length)),a=0,o=-32;ou;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(s=r),r^=r10,r^=r15,r^=r4,r^=r13,o=0&&(s=s+16405315270,a=0==(n=i[127&o]^=r+s)a+10);for(a=128&&(i[127&(t&&t.length0)]=-1),a=127,o=512;o0;--o)r=i[a+34&127],n=i[a=a+1&127],r^=r13,n^=n17,r^=r15,n^=n12,i[a]=r^n;e.w=s,e.X=i,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,s=function(){return(n.next()0)4294967296};return s.double=function(){do{var e=((n.next()11)+(n.next()0)4294967296)(121)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&(o.X&&a(o,n),s.state=function(){return a(n,{})}),s}t&&t.exportst.exports=on&&n.amdn((function(){return o}))this.xor4096=o}(0,e,!1)}(yo);var vo=yo.exports,go={exports{}};!function(e){!function(e,t,n){function r(e){var t=this,n=;t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e25^e7^n,n=n-r0,r=r24^r8^a,a=a-e0,t.b=e=e20^e12^n,t.c=n=n-r0,t.d=r16^n16^a,t.a=a-e0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)(t.a=e42949672960,t.b=0e)n+=e;for(var r=0;rn.length+20;r++)t.b^=0n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,s=function(){return(n.next()0)4294967296};return s.double=function(){do{var e=((n.next()11)+(n.next()0)4294967296)(121)}while(0===e);return e},s.int32=n.next,s.quick=s,o&&(object==typeof o&&a(o,n),s.state=function(){return a(n,{})}),s}t&&t.exportst.exports=on&&n.amdn((function(){return o}))this.tychei=o}(0,e,!1)}(go);var bo=go.exports,xo={exports{}},No=Je({__proto__null,default{}});!function(e){!function(t,n,r){var a,o=256,s=r.pow(o,6),i=r.pow(2,52),u=2i,c=255;function p(e,c,p){var y=[],v=f(h((c=1==c{entropy!0}c{}).entropy[e,m(n)]null==efunction(){try{var e;return a&&(e=a.randomBytes)e=e(o)(e=new Uint8Array(o),(t.cryptot.msCrypto).getRandomValues(e)),m(e)}catch(e){var r=t.navigator,s=r&&r.plugins;return[+new Date,t,s,t.screen,m(n)]}}()e,3),y),g=new l(y),b=function(){for(var e=g.g(6),t=s,n=0;ei;)e=(e+n)o,t=o,n=g.g(1);for(;e=u;)e=2,t=2,n=1;return(e+n)t};return b.int32=function(){return 0g.g(4)},b.quick=function(){return g.g(4)4294967296},b.double=b,f(m(g.S),n),(c.passpfunction(e,t,n,a){return a&&(a.S&&d(a,g),e.state=function(){return d(g,{})}),n(r.random=e,t)e})(b,v,globalin cc.globalthis==r,c.state)}function l(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,i=r.S=[];for(n(e=[n++]);ao;)i[a]=a++;for(a=0;ao;a++)i[a]=i[s=c&s+e[a%n]+(t=i[a])],i[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,i=r.S;e--;)t=i[a=c&a+1],n=no+i[c&(i[a]=i[s=c&s+t])+(i[s]=t)];return r.i=a,r.j=s,n})(o)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){var n,r=[],a=typeof e;if(t&&object==a)for(n in e)try{r.push(h(e[n],t-1))}catch(e){}return r.lengthrstring==aee+0}function f(e,t){for(var n,r=e+,a=0;ar.length;)t[c&a]=c&(n^=19t[c&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(f(r.random(),n),e.exports){e.exports=p;try{a=No}catch(e){}}else r.seedrandom=p}(undefined!=typeof selfselfXe,[],Math)}(xo);var wo=uo,ko=po,To=ho,So=mo,_o=vo,Eo=bo,Io=xo.exports;Io.alea=wo,Io.xor128=ko,Io.xorwow=To,Io.xorshift7=So,Io.xor4096=_o,Io.tychei=Eo;var Oo=Io,Ao=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2this.stdDev,this.lower=this.mean-2this.stdDev);var o=aMath.random();this.random=Oo.alea(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,s=void 0;do{s=(a=2this.random()-1)a+(o=2this.random()-1)o}while(s=10===s);var i=Math.sqrt(-2Math.log(s)s);t=this.mean+this.stdDevai,n=this.mean+this.stdDevoi,this.truncated&&!this.isValidTruncated(t)(r=!0)}return this.truncated&&!this.isValidTruncated(n)(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtypefloat32===this.dtypeeMath.round(e)},e.prototype.isValidTruncated=function(e){return e=this.upper&&e=this.lower},e}(),Do=function(){function e(e,t,n,r){this.alpha=e,this.beta=1t,this.dtype=n;var a=rMath.random();this.randu=Oo.alea(a.toString()),this.randn=new Ao(0,1,n,!1,this.randu()),this.d=e1e+23e-13,this.c=1Math.sqrt(9this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,a,o;;){do{r=this.randn.nextValue(),o=1+this.cr}while(o=0);if(o=oo,t=1-.331(e=rr)e,n=.5e+this.d(1-o+Math.log(o)),(a=this.randu())tMath.log(a)n)break}return o=1this.betathis.do,this.alpha1&&(o=Math.pow(this.randu(),1this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(e){returnfloat32===this.dtypeeMath.round(e)},e}(),Mo=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=1);var a=this;if(this.canReturnFloat=function(){return null==a.dtypefloat32===a.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),number==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range=1)throw new Error(The difference between .concat(e, - ).concat(t, = 1 and dtype is not float));this.random=Oo.alea(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()eMath.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.rangethis.random())},e}();var Co=fn({randomGamma_function(e,t,n,r,a){if(void 0===n&&(n=1),void 0===r&&(r=float32),Se(e),null==n&&(n=1),null==r&&(r=float32),float32!==r&&int32!==r)throw new Error(Unsupported data type .concat(r));for(var o=new Do(t,n,r,a),s=ar(e,r),i=0;is.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}});var Fo=fn({randomNormal_function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),Se(e),null!=r&&bool===r)throw new Error(Unsupported data type .concat(r));for(var o=new Ao(t,n,r,!1,a),s=ar(e,r),i=0;is.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}});var Ro=fn({randomStandardNormal_function(e,t,n){if(null!=t&&bool===t)throw new Error(Unsupported data type .concat(t));return Fo(e,0,1,t,n)}});var zo=fn({randomUniform_function(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=float32),Se(e);for(var o=ar(e,r),s=new Mo(t,n,null,a),i=0;io.values.length;i++)o.values[i]=s.nextValue();return o.toTensor()}});var Lo=fn({randomUniformInt_function(e,t,n,r){return zo(e,t,n,int32,r)}});function Vo(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=float32),0===n)throw new Error(Cannot have a step of zero);var a={starte,stopt,stepn,dtyper};return on.runKernel(Range,{},a)}var Po=fn({real_function(e){var t={inputln(e,input,real)};return on.runKernel(Real,t)}});var Bo=fn({reciprocal_function(e){var t={xln(e,x,reciprocal)};return on.runKernel(Reciprocal,t)}});var Ko=fn({relu_function(e){var t={xln(e,x,relu)};return on.runKernel(Relu,t)}});var jo=fn({relu6_function(e){var t={xln(e,x,relu6)};return on.runKernel(Relu6,t)}});var qo=fn({reverse_function(e,t){var n={xln(e,x,reverse)},r={dimst};return on.runKernel(Reverse,n,r)}});var Uo=fn({reverse1d_function(e){var t=ln(e,x,reverse);return ie(1===t.rank,(function(){returnError in reverse1D x must be rank 1 but got rank .concat(t.rank,.)})),qo(t,0)}});var Wo=fn({reverse2d_function(e,t){var n=ln(e,x,reverse);return ie(2===n.rank,(function(){returnError in reverse2D x must be rank 2 but got rank .concat(n.rank,.)})),qo(n,t)}});var Go=fn({reverse3d_function(e,t){var n=ln(e,x,reverse);return ie(3===n.rank,(function(){returnError in reverse3D x must be rank 3 but got rank .concat(n.rank,.)})),qo(n,t)}});var Ho=fn({reverse4d_function(e,t){var n=ln(e,x,reverse);return ie(4===n.rank,(function(){returnError in reverse4D x must be rank 4 but got rank .concat(n.rank,.)})),qo(n,t)}});var Zo=fn({round_function(e){var t={xln(e,x,round)};return on.runKernel(Round,t)}});var Qo=fn({rsqrt_function(e){var t={xln(e,x,rsqrt,float32)};return on.runKernel(Rsqrt,t)}});var Xo=fn({selu_function(e){var t={xln(e,x,selu)};return on.runKernel(Selu,t)}});var Yo=fn({separableConv2d_function(e,t,n,r,a,o,s){void 0===o&&(o=[1,1]),void 0===s&&(s=NHWC);var i=ln(e,x,separableConv2d),u=ln(t,depthwiseFilter,separableConv2d),c=ln(n,pointwiseFilter,separableConv2d),p=i,l=!1;if(3===i.rank&&(l=!0,p=Vn(i,[1,i.shape[0],i.shape[1],i.shape[2]])),NCHW===s)throw new Error(separableConv2d currently does not support dataFormat NCHW; only NHWC is supported);ie(4===p.rank,(function(){returnError in separableConv2d input must be rank 4, but got +rank .concat(p.rank,.)})),ie(4===u.rank,(function(){returnError in separableConv2d depthwise filter must be rank 4, but +got rank .concat(u.rank,.)})),ie(4===c.rank,(function(){returnError in separableConv2d pointwise filter must be rank 4, but +got rank .concat(u.rank,.)})),ie(1===c.shape[0],(function(){returnError in separableConv2d the first dimension of pointwise filter + must be 1, but got .concat(c.shape[0],.)})),ie(1===c.shape[1],(function(){returnError in separableConv2d the second dimension of pointwise +filter must be 1, but got .concat(c.shape[1],.)}));var d=u.shape[2],h=u.shape[3];ie(c.shape[2]===dh,(function(){returnError in separableConv2d the third dimension of pointwise filter +must be .concat(dh,, )+but got .concat(c.shape[2],.)}));var f=_r(p,u,r,a,s,o),m=hr(f,c,1,valid,s);return lVn(m,[m.shape[1],m.shape[2],m.shape[3]])m}});var Jo=function(e,t){return c(this,void 0,void 0,(function(){var n,r,a,o,s,i,u,c,l,d;return p(this,(function(p){switch(p.label){case 0return n=ln(e,x,setdiff1d),r=ln(t,y,setdiff1d),ie(n.dtype===r.dtype,(function(){returnx and y should have the same dtype, but got x (.concat(n.dtype,) and y ().concat(r.dtype,).)})),ie(1===n.rank,(function(){returnx should be 1D tensor, but got x (.concat(n.shape,).)})),ie(1===r.rank,(function(){returny should be 1D tensor, but got y (.concat(r.shape,).)})),[4,n.data()];case 1return a=p.sent(),[4,r.data()];case 2for(o=p.sent(),s=new Set(o),i=0,l=0;la.length;l++)s.has(a[l])i++;for(u=new Pt([i],n.dtype),c=new Pt([i],int32),l=0,d=0;la.length;l++)s.has(a[l])(u.values[d]=a[l],c.values[d]=l,d++);return[2,[u.toTensor(),c.toTensor()]]}}))}))};var $o=fn({sign_function(e){var t={xln(e,x,sign)};return on.runKernel(Sign,t)}});var es=fn({sin_function(e){var t={xln(e,x,sin,float32)};return on.runKernel(Sin,t)}});var ts=fn({sinh_function(e){var t={xln(e,x,sinh)};return on.runKernel(Sinh,t)}});var ns=fn({slice1d_function(e,t,n){var r=ln(e,x,slice1d);return ie(1===r.rank,(function(){returnslice1d expects a rank-1 tensor, but got a rank-.concat(r.rank, tensor)})),Gn(r,[t],[n])}});var rs=fn({slice2d_function(e,t,n){var r=ln(e,x,slice2d);return ie(2===r.rank,(function(){returnslice2d expects a rank-2 tensor, but got a rank-.concat(r.rank, tensor)})),Gn(r,t,n)}});var as=fn({slice3d_function(e,t,n){var r=ln(e,x,slice3d);return ie(3===r.rank,(function(){returnslice3d expects a rank-3 tensor, but got a rank-.concat(r.rank, tensor)})),Gn(r,t,n)}});var os=fn({slice4d_function(e,t,n){var r=ln(e,x,slice4d);return ie(4===r.rank,(function(){returnslice4d expects a rank-4 tensor, but got a rank-.concat(r.rank, tensor)})),Gn(r,t,n)}});var ss=fn({softmax_function(e,t){void 0===t&&(t=-1);var n=ln(e,logits,softmax,float32);if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(Softmax along a non-last dimension is not yet supported. +Logits was rank .concat(n.rank, and dim was ).concat(t));var r={logitsn},a={dimt};return on.runKernel(Softmax,r,a)}});var is=fn({fft_function(e){ie(complex64===e.dtype,(function(){returnThe dtype for tf.spectral.fft() must be complex64 +but got .concat(e.dtype,.)}));var t={inpute};return on.runKernel(FFT,t)}});var us=fn({ifft_function(e){ie(complex64===e.dtype,(function(){returnThe dtype for tf.spectral.ifft() must be complex64 +but got .concat(e.dtype,.)}));var t={inpute};return on.runKernel(IFFT,t)}});var cs=fn({irfft_function(e){var t,n=e.shape[e.shape.length-1],r=e.sizen;if(n=2){var a=Vn(e,[r,n]);t=us(a)}else{var o=[r,2(n-1)],s=Vn(Po(e),[r,n]),i=Vn(ua(e),[r,n]),u=qo(Gn(s,[0,1],[r,n-2]),1),c=Un(qo(Gn(i,[0,1],[r,n-2]),1),Gr(-1)),p=jn([s,u],1),l=jn([i,c],1);a=Vn(ur(p,l),[o[0],o[1]]);t=us(a)}if(t=Po(t),3===e.rank&&0!==e.shape[0]){var d=t,h=e.shape[0];t=Vn(t,[h,t.shape[0]h,t.shape[1]]),d.dispose()}return t}});var ps=fn({split_function(e,t,n){void 0===n&&(n=0);var r={xln(e,x,split)},a={numOrSizeSplitst,axisn};return on.runKernel(SplitV,r,a)}});var ls=fn({rfft_function(e,t){ie(float32===e.dtype,(function(){returnThe dtype for rfft() must be real value but got .concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.sizer;if(null!=t&&tr){var o=e.shape.map((function(e){return 0})),s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t,n=Gn(e,o,s),r=t}else if(null!=t&&tr){var i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t-r,n=jn([e,za(i)],e.shape.length-1),r=t}else n=e;var u=Fr(n),c=Vn(ur(n,u),[a,r]),p=is(c),l=Math.floor(r2)+1,d=Po(p),h=ua(p),f=ps(d,[l,r-l],d.shape.length-1),m=ps(h,[l,r-l],h.shape.length-1),y=n.shape.slice();return y[n.shape.length-1]=l,Vn(ur(f[0],m[0]),y)}});var ds=fn({squaredDifference_function(e,t){var n,r=ln(e,a,squaredDifference),a=ln(t,b,squaredDifference);r=(n=d($t(r,a),2))[0],a=n[1],Dr(r.shape,a.shape);var o={ar,ba};return on.runKernel(SquaredDifference,o,{})}});var hs=fn({squeeze_function(e,t){var n=ln(e,x,squeeze,string_or_numeric);return Vn(n,function(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==tanullfe(t,e).sort(),s=0,i=0;ie.length;++i){if(null!=o){if(o[s]===i&&1!==e[i])throw new Error(Can't squeeze axis .concat(i, since its dim ').concat(e[i],' is not 1));(null==o[s]o[s]i)&&1===e[i]&&(n.push(e[i]),r.push(i)),o[s]=i&&s++}1!==e[i]&&(n.push(e[i]),r.push(i))}return{newShapen,keptDimsr}}(n.shape,t).newShape)}});var fs=fn({stack_function(e,t){void 0===t&&(t=0);var n=dn(e,tensors,stack,string_or_numeric);ie(n.length=1,(function(){returnPass at least one tensor to tf.stack})),n.length0&&ie(t=n[0].rank,(function(){returnAxis must be = rank of the tensor}));var r=n,a={axist};return on.runKernel(Pack,r,a)}});var ms=fn({step_function(e,t){void 0===t&&(t=0);var n={xln(e,x,step)},r={alphat};return on.runKernel(Step,n,r)}});var ys=fn({stridedSlice_function(e,t,n,r,a,o,s,i,u){void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===i&&(i=0),void 0===u&&(u=0);var c={xln(e,x,stridedSlice,string_or_numeric)},p={begint,endn,stridesr,beginMaska,endMasko,ellipsisMasks,newAxisMaski,shrinkAxisMasku};return on.runKernel(StridedSlice,c,p)}});var vs=fn({tan_function(e){var t={xln(e,x,tan,float32)};return on.runKernel(Tan,t)}});function gs(e,t,n){return Wr(e,t,un(e,n),n)}function bs(e,t){ce(e);var n=un(e,t);if(1!==n.length)throw new Error(tensor1d() requires values to be a flatTypedArray);return Wr(e,null,n,t)}function xs(e,t,n){if(ce(e),null!=t&&2!==t.length)throw new Error(tensor2d() requires shape to have two numbers);var r=un(e,n);if(2!==r.length&&1!==r.length)throw new Error(tensor2d() requires values to be number[][] or flatTypedArray);if(1===r.length&&null==t)throw new Error(tensor2d() requires shape to be provided when `values` are a flatTypedArray);return Wr(e,t,r,n)}function Ns(e,t,n){if(t.rank1)throw new Error(tf.scatterND() expects the indices to be rank 1 or higher,+ but the rank was .concat(t.rank,.));if(e.rank1)throw new Error(tf.scatterND() expects the updates to be rank 1 or higher,+ but the rank was .concat(e.rank,.));if(int32!==t.dtype)throw new Error(The dtype of 'indices' should be int32, but got dtype .concat(t.dtype));if(n.length1)throw new Error(Output rank must be greater or equal to 1, but got shape .concat(n));if(0===n.length){if(0===t.size)throw new Error(Indices specified for empty output. indices shape .concat(t.shape));if(0===e.size)throw new Error(Updates specified for empty output. updates shape .concat(e.shape))}!function(e,t,n){var r=t.rank1t.shape[t.rank-1]1,a=t.rank1t.rank-11,o=Must have updates.shape = indices.shape[batchDim] + +shape[sliceDim], got updates.shape .concat(n.shape)+, indices.shape .concat(t.shape,, shape ).concat(e)+, sliceDim .concat(r,, and batchDim ).concat(a,.);if(n.ranka)throw new Error(o+ update.rank  .concat(a,. ));if(e.lengthr+(n.rank-a))throw new Error(o+ Output shape length  .concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+ update.rank != .concat(a+e.length-r));for(var s=0;sa;++s)if(n.shape[s]!==t.shape[s])throw new Error(o+ updates.shape[.concat(s,] ().concat(n.shape[s],) != indices.shape[).concat(s,] ().concat(t.shape[s],).));for(s=0;sn.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+ updates.shape[.concat(s+a,] ().concat(n.shape[s+a],) != shape[).concat(s+a,] ().concat(e[s+a],)))}(n,t,e)}var ws=fn({tensorScatterUpdate_function(e,t,n){var r=ln(e,tensor,tensorScatterupdate),a=ln(t,indices,tensorScatterupdate,int32),o=ln(n,updates,tensorScatterupdate);if(Ns(o,a,r.shape),r.dtype!==o.dtype)throw new Error(tensor and updates must have the same dtype, instead they are .concat(r.dtype, and ).concat(o.dtype,.));var s={tensorr,indicesa,updateso};return on.runKernel(TensorScatterUpdate,s,{})}});var ks=fn({topk_function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=ln(e,x,topk);if(0===r.rank)throw new Error(topk() expects the input to be of rank 1 or higher);var a=r.shape[r.shape.length-1];if(t0)throw new Error('k' passed to topk() must be = 0 but got .concat(t));if(ta)throw new Error('k' passed to topk() must be = the last dimension (.concat(a,) )+but got .concat(t));var o={xr},s={kt,sortedn},i=d(on.runKernel(TopK,o,s),2);return{valuesi[0],indicesi[1]}}});var Ts=fn({truncatedNormal_function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),Se(e),null!=r&&bool===r)throw new Error(Unsupported data type $ { dtype });for(var o=new Ao(t,n,r,!0,a),s=ar(e,r),i=0;is.values.length;i++)s.values[i]=o.nextValue();return s.toTensor()}});var Ss=fn({unique_function(e,t){void 0===t&&(t=0);var n=ln(e,x,unique,string_or_numeric);ie(n.rank0,(function(){returnThe input tensor must be at least 1D}));var r={xn},a={axist},o=d(on.runKernel(Unique,r,a),2);return{valueso[0],indiceso[1]}}});var _s=fn({unsortedSegmentSum_function(e,t,n){var r=ln(e,x,unsortedSegmentSum),a=ln(t,segmentIds,unsortedSegmentSum,int32);ie(de(n),(function(){returnnumSegments must be of dtype int}));var o={xr,segmentIdsa},s={numSegmentsn};return on.runKernel(UnsortedSegmentSum,o,s)}});var Es=fn({unstack_function(e,t){void 0===t&&(t=0);var n=ln(e,x,unstack,string_or_numeric);ie(t=-n.shape.length&&tn.shape.length,(function(){returnAxis = .concat(t, is not in [-).concat(n.shape.length,, ).concat(n.shape.length,))}));var r={valuen},a={axist};return on.runKernel(Unpack,r,a)}});var Is=function(e){return c(this,void 0,void 0,(function(){var t,n,r;return p(this,(function(a){switch(a.label){case 0return[4,(t=ln(e,condition,whereAsync,bool)).data()];case 1return n=a.sent(),r=function(e,t){for(var n=[],r=0;rt.length;r++)t[r]&&n.push(r);var a=ar(e,int32),o=ar([n.length,e.length],int32);for(r=0;rn.length;r++){var s=a.indexToLoc(n[r]),i=re.length;o.values.set(s,i)}return o.toTensor()}(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))};var Os=function(e,t,n){return c(this,void 0,void 0,(function(){var r,a,o,s,i,u,c,l,d,h,f,m,y;return p(this,(function(p){switch(p.label){case 0for(r=ln(e,tensor,boolMask),a=ln(t,mask,boolMask,bool),o=null==n0n,s=a.rank,i=r.shape,ie(s0,(function(){returnmask cannot be scalar})),ue(i.slice(o,o+s),a.shape,mask's shape must match the first K dimensions of tensor's shape,),u=1,c=o;co+s;c++)u=i[c];return l=i.slice(0,o).concat([u],i.slice(o+s)),d=Vn(r,l),h=Vn(a,[-1]),[4,Is(h)];case 1return f=p.sent(),m=hs(f,[1]),y=oa(d,m,o),e!==r&&r.dispose(),t!==a&&a.dispose(),m.dispose(),d.dispose(),h.dispose(),f.dispose(),[2,y]}}))}))};var As=fn({transpose_function(e,t,n){var r=ln(e,x,transpose);if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),ie(r.rank===t.length,(function(){returnError in transpose rank of input .concat(r.rank, )+must match length of perm .concat(t,.)})),t.forEach((function(e){ie(e=0&&er.rank,(function(){returnAll entries in 'perm' must be between 0 and .concat(r.rank-1)+ but got .concat(t)}))})),r.rank=1)return r.clone();var a,o,s={xr},i={permt};returncomplex64===r.dtype(a=function(){var e=Po(r),t=ua(r);return e=on.runKernel(Be,{xe},i),t=on.runKernel(Be,{xt},i),n&&(t=ba(t)),ur(e,t)},on.tidy(a,o))on.runKernel(Be,s,i)}});var Ds=fn({movingAverage_function(e,t,n,r,a){void 0===a&&(a=!0);var o,s,i=ln(e,v,movingAverage),u=ln(t,x,movingAverage),c=ln(n,decay,movingAverage);s=u,ie((o=i).dtype===s.dtype,(function(){returnThe dtypes of the first(.concat(o.dtype,) and)+ second(.concat(s.dtype,) input must match)})),ie(le(i.shape,u.shape),(function(){returnShape mismatch in v and x}));var p=Gr(1),l=wa(p,c),d=Un(wa(u,i),l);if(a){ie(null!=r,(function(){returnWhen using zeroDebias true, step is required.}));var h=ln(r,step,movingAverage);d=Ar(d,wa(p,Ur(c,h)))}return gn(i,d)}});var Ms=fn({scatterND_function(e,t,n){Se(n);var r=ln(e,indices,scatterND,int32),a=ln(t,updates,scatterND);Ns(a,r,n);var o={indicesr,updatesa},s={shapen};return on.runKernel(ScatterNd,o,s)}});var Cs=fn({sparseToDense_function(e,t,n,r){void 0===r&&(r=0),Se(n);var a=ln(e,sparseIndices,sparseToDense,int32),o=ln(t,sparseValues,sparseToDense,string_or_numeric),s=ln(r,defaultValue,sparseToDense,o.dtype);!function(e,t,n,r){if(int32!==e.dtype)throw new Error(tf.sparseToDense() expects the indices to be int32 type,+ but the dtype was .concat(e.dtype,.));if(e.rank2)throw new Error(sparseIndices should be a scalar, vector, or matrix,+ but got shape .concat(e.shape,.));var a=e.rank0e.shape[0]1,o=e.rank1e.shape[1]1;if(n.length!==o)throw new Error(outputShape has incorrect number of elements,+ .concat(n.length,, should be ).concat(o,.));var s=t.size;if(0!==t.rank&&(1!==t.ranks!==a))throw new Error(sparseValues has incorrect shape +.concat(t.shape,, should be [] or [).concat(a,]));if(t.dtype!==r.dtype)throw new Error(sparseValues.dtype must match defaultValues.dtype)}(a,o,n,s);var i={sparseIndicesa,sparseValueso,defaultValues},u={outputShapen};return on.runKernel(SparseToDense,i,u)}});var Fs=fn({gatherND_function(e,t){var n=ln(t,indices,gatherND,int32),r={paramsln(e,x,gatherND,string_or_numeric),indicesn};return on.runKernel(GatherNd,r)}});var Rs=fn({dropout_function(e,t,n,r){var a=ln(e,x,dropout);if(ie(float32===a.dtype,(function(){returnx has to be a floating point tensor since it's going to be +scaled, but got a .concat(a.dtype, tensor instead.)})),ie(t=0&&t1,(function(){returnrate must be a float in the range [0, 1), but got .concat(t,.)})),0===t)return e instanceof jta.clone()a;var o=function(e,t){if(null==t)return e.shape.slice();if(le(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;re.shape.length;r++)null==t[r]&&null!=e.shape[r]n.push(e.shape[r])n.push(t[r]);return n}return t}(a,n),s=1-t,i=Ar(aa(gn(zo(o,0,1,float32,r),s)),s);return Un(a,i)}});function zs(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)Math.log(2))))}function Ls(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;oe;++o){var s=2Math.PIo(e+r-1);a[o]=t-nMath.cos(s)}return bs(a,float32)}var Vs=function(e,t,n){return void 0===n&&(n=1),c(this,void 0,void 0,(function(){var r,a,o,s,i,u,c,l,h,f,m,y,v,g;return p(this,(function(p){switch(p.label){case 0return r=ln(e,predictions,inTopK),a=ln(t,targets,inTopK),ie(r.rank1,(function(){returninTopK() expects the predictions to be of rank 2 or higher, +but got .concat(r.rank)})),ie(r.rank-1===a.rank,(function(){returnpredictions rank should be 1 larger than targets rank, but got predictions rank +.concat(r.rank, and targets rank ).concat(a.rank)})),ue(r.shape.slice(0,r.shape.length-1),a.shape,predictions's shape should be align with the targets' shape, except the last dimension.),o=r.shape[r.shape.length-1],ie(n0&&n=o,(function(){return'k' passed to inTopK() must be  0 && = the predictions last +dimension (.concat(o,), but got ).concat(n)})),[4,r.data()];case 1return s=p.sent(),[4,a.data()];case 2for(i=p.sent(),u=d([s.lengtho,o],2),c=u[0],l=u[1],h=function(e,t){return me(e,t)}(bool,c),f=0;fc;f++){for(m=fl,y=s.subarray(m,m+l),v=[],g=0;gy.length;g++)v.push({valuey[g],indexg});for(v.sort((function(e,t){return t.value-e.value})),h[f]=0,g=0;gn;g++)if(v[g].index===i[f]){h[f]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,gs(h,a.shape,bool)]}}))}))};var Ps=fn({conv2DBackpropFilter_function(e,t,n,r,a,o,s){void 0===o&&(o=NHWC);var i=e;3===e.rank&&(i=Vn(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Vn(t,[1,t.shape[0],t.shape[1],t.shape[2]])),ie(4===i.rank,(function(){returnError in conv2dDerFilter input must be rank 4, but got shape +.concat(i.shape,.)})),ie(4===u.rank,(function(){returnError in conv2dDerFilter dy must be rank 4, but got shape +.concat(u.shape,.)})),ie(4===n.length,(function(){returnError in conv2dDerFilter filterShape must be length 4, but got +.concat(n,.)}));var c=NHWC===oi.shape[3]i.shape[1],p=NHWC===ou.shape[3]u.shape[1];ie(c===n[2],(function(){returnError in conv2dDerFilter depth of input .concat(c,) must )+match input depth in filter (.concat(n[2],.)})),ie(p===n[3],(function(){returnError in conv2dDerFilter depth of dy (.concat(p,) must )+match output depth for filter (.concat(n[3],).)})),Ln(conv2dDerFilter,a,s);var l={xi,dyu},d={stridesr,pada,dataFormato,dimRoundingModes,filterShapen};return on.runKernel(Conv2DBackpropFilter,l,d)}});function Bs(e,t,n){if(null==nlinear===n)return e;if(relu===n)return Un(e,ms(t));throw new Error(Cannot compute gradient for fused activation .concat(n,.))}function Ks(e,t){var n=t,r=function(e,t){for(var n=[],r=0;rt.length;r++){var a=e[e.length-r-1],o=t.length-r-1,s=t[o];(null==a1===a&&s1)&&n.unshift(o)}return n}(e.shape,t.shape);return r.length0&&(n=Qr(n,r)),Vn(n,e.shape)}function js(e,t,n,r){if(linear===t)return e;if(relu===t)return Ko(e);if(elu===t)return Vr(e);if(relu6===t)return jo(e);if(prelu===t)return to(e,n);if(leakyrelu===t)return da(e,r);if(sigmoid===t)return Wn(e);throw new Error(Unknown fused activation .concat(t,.))}var qs=function(e,t){return!(e0)linear===t};var Us=fn({fusedConv2d_function(e){var t,n=e.x,r=e.filter,a=e.strides,o=e.pad,s=e.dataFormat,i=void 0===sNHWCs,u=e.dilations,c=void 0===u[1,1]u,p=e.dimRoundingMode,l=e.bias,h=e.activation,f=void 0===hlinearh,m=e.preluActivationWeights,y=e.leakyreluAlpha;if(f=flinear,!1===qs(on.state.gradientDepth,f)){ie(NHWC===i,(function(){returnError in fused conv2d got dataFormat of .concat(i, but )+only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.}));var v=hr(n,r,a,o,i,c,p);return null!=l&&(v=gn(v,l)),js(v,f,m,y)}var g=ln(n,x,conv2d,float32),b=ln(r,filter,conv2d,float32),x=g,N=!1;3===g.rank&&(N=!0,x=Vn(g,[1,g.shape[0],g.shape[1],g.shape[2]])),ie(4===x.rank,(function(){returnError in fused conv2d input must be rank 4, but got rank +.concat(x.rank,.)})),ie(4===b.rank,(function(){returnError in fused conv2d filter must be rank 4, but got rank +.concat(b.rank,.)})),Ln(fused conv2d,o,p);var w=NHWC===ix.shape[3]x.shape[1];ie(b.shape[2]===w,(function(){returnError in conv2d depth of input (.concat(w,) must match )+input depth for filter .concat(b.shape[2],.)})),ie(Rn(a,c),(function(){returnError in conv2D Either strides or dilations must be 1. +Got strides .concat(a, and dilations ').concat(c,')}));var k,T,S=An(x.shape,b.shape,a,c,o,p);if(null!=l&&(t=d($t(k=ln(l,bias,fused conv2d),g),1),k=t[0],NHWC===iDr(S.outShape,k.shape)(ie(k.shape.length=1,(function(){returnError in fused conv2d only supports scalar or 1-D Tensor bias for NCHW format but got the bias of +rank-.concat(k.shape.length,.)})),ie(0===k.shape.lengthk.shape[0]===S.outChannels1===k.shape[0],(function(){returnError in fused conv2d bias shape (.concat(k.shape,) is not )+compatible with the number of output channels +(.concat(S.outChannels,))})))),null!=m){var _=m.shape;if(ie(_.length=13===_.length,(function(){returnError in fused conv2d only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of +rank-.concat(_.length,.)})),1===_.length)ie(1===_[0]_[0]===S.outChannels,(function(){returnError in fused conv2d PReLU activation weights +(.concat(_,) is not compatible with the number of output )+channels (.concat(S.outChannels,).)}));else if(3===_.length)try{Dr(_,S.outShape)}catch(e){var E=Error in fused conv2d PReLU activation weights (.concat(_,) )+is not compatible with the output shape of the conv2d +(.concat(S.outShape,).);throw Error(E)}T=ln(m,prelu weights,fused conv2d)}var I=function(e,t){ie(NHWC===i,(function(){returnError in gradient of fused conv2D got dataFormat of .concat(i, but only NHWC is currently supported.)}));var n=d(t,4),r=n[0],s=n[1],u=n[2],p=n[3],l=Bs(e,u,f);ie(Fn(c),(function(){returnError in gradient of fused conv2D dilation rates greater than 1 +are not yet supported in gradients. Got dilations '.concat(c,')}));var h=[mr(s.shape,l,r,a,o),Ps(s,l,r.shape,a,o)];if(null!=p){var m=Ks(p,l);h.push(m)}return h},O={xx,filterb,biask,preluActivationWeightsT},A={stridesa,pado,dataFormati,dilationsc,dimRoundingModep,activationf,leakyreluAlphay};if(null==l){var D=ga((function(e,t,n){var r=on.runKernel(je,O,A);return n([t,e,r]),N&&(r=Vn(r,[r.shape[1],r.shape[2],r.shape[3]])),{valuer,gradFuncI}}));return D(x,b)}var M=ga((function(e,t,n,r){var a=on.runKernel(je,O,A);return r([t,e,a,n]),N&&(a=Vn(a,[a.shape[1],a.shape[2],a.shape[3]])),{valuea,gradFuncI}}));return M(x,b,k)}});var Ws=fn({depthwiseConv2dNativeBackpropFilter_function(e,t,n,r,a,o,s){void 0===o&&(o=[1,1]);var i=e;3===e.rank&&(i=Vn(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Vn(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={xi,dyu},p={stridesr,pada,dimRoundingModes,dilationso,filterShapen};return on.runKernel(DepthwiseConv2dNativeBackpropFilter,c,p)}});var Gs=fn({depthwiseConv2dNativeBackpropInput_function(e,t,n,r,a,o,s){void 0===o&&(o=[1,1]);var i=t,u=!1;3===t.rank&&(u=!0,i=Vn(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dyi,filtern},p={stridesr,pada,dimRoundingModes,dilationso,inputShapee},l=on.runKernel(DepthwiseConv2dNativeBackpropInput,c,p);return uVn(l,[l.shape[1],l.shape[2],l.shape[3]])l}});var Hs=fn({fusedDepthwiseConv2d_function(e){var t,n=e.x,r=e.filter,a=e.strides,o=e.pad,s=e.dataFormat,i=void 0===sNHWCs,u=e.dilations,c=void 0===u[1,1]u,p=e.dimRoundingMode,l=e.bias,h=e.activation,f=void 0===hlinearh,m=e.preluActivationWeights,y=e.leakyreluAlpha;if(!1===qs(on.state.gradientDepth,f)){var v=_r(n,r,a,o,i,c,p);return null!=l&&(v=gn(v,l)),js(v,f,m,y)}var g=ln(n,x,depthwiseConv2d,float32),b=ln(r,filter,depthwiseConv2d,float32),x=g,N=!1;3===g.rank&&(N=!0,x=Vn(g,[1,g.shape[0],g.shape[1],g.shape[2]])),ie(4===x.rank,(function(){returnError in fused depthwiseConv2d input must be rank 4, but got +rank .concat(x.rank,.)})),ie(4===b.rank,(function(){returnError in fused depthwiseConv2d filter must be rank 4, +but got rank .concat(b.rank,.)})),ie(x.shape[3]===b.shape[2],(function(){returnError in fused depthwiseConv2d number of input channels +(.concat(x.shape[3],) must match the inChannels dimension in )+filter .concat(b.shape[2],.)})),null==c&&(c=[1,1]),ie(Rn(a,c),(function(){returnError in fused depthwiseConv2d Either strides or dilations must +be 1. Got strides .concat(a, and dilations ').concat(c,')})),Ln(fused depthwiseConv2d,o,p);var w,k,T=An(x.shape,b.shape,a,c,o,p,!0);null!=l&&(t=d($t(w=ln(l,bias,fused conv2d),g),1),w=t[0],Dr(T.outShape,w.shape)),null!=m&&(k=ln(m,prelu weights,fused depthwiseConv2d));var S=function(e,t){ie(Fn(c),(function(){returnError in gradient of fused depthwiseConv2d dilation rates greater than 1 are not yet supported. Got dilations +'.concat(c,')}));var n=d(t,4),r=n[0],s=n[1],i=n[2],u=n[3],l=Bs(e,i,f),h=Gs(s.shape,l,r,a,o,c,p),m=Ws(s,l,r.shape,a,o,c,p);return null!=u[h,m,Ks(w,l)][h,m]},_={xx,filterb,biasw,preluActivationWeightsk},E={stridesa,pado,dataFormati,dilationsc,dimRoundingModep,activationf,leakyreluAlphay};if(null==l){var I=ga((function(e,t,n){var r=on.runKernel(qe,_,E);return n([t,e,r]),N&&(r=Vn(r,[r.shape[1],r.shape[2],r.shape[3]])),{valuer,gradFuncS}}));return I(x,b)}var O=ga((function(e,t,n,r){var a=on.runKernel(qe,_,E);return r([t,e,a,n]),N&&(a=Vn(a,[a.shape[1],a.shape[2],a.shape[3]])),{valuea,gradFuncS}}));return O(x,b,w)}});var Zs={__proto__null,conv2dUs,depthwiseConv2dHs,matMulfn({fusedMatMul_function(e){var t,n=e.a,r=e.b,a=e.transposeA,o=void 0!==a&&a,s=e.transposeB,i=void 0!==s&&s,u=e.bias,c=e.activation,p=void 0===clinearc,l=e.preluActivationWeights,h=e.leakyreluAlpha,f=void 0===h.2h;if(!1===qs(on.state.gradientDepth,p)){var m=qn(n,r,o,i);return null!=u&&(m=gn(m,u)),js(m,p,l,f)}var y=ln(n,a,fused matMul),v=ln(r,b,fused matMul);t=d($t(y,v),2),y=t[0],v=t[1];var g=oy.shape[y.rank-2]y.shape[y.rank-1],b=iv.shape[v.rank-1]v.shape[v.rank-2],x=oy.shape[y.rank-1]y.shape[y.rank-2],N=iv.shape[v.rank-2]v.shape[v.rank-1],w=y.shape.slice(0,-2),k=v.shape.slice(0,-2),T=pe(w),S=pe(k);ie(g===b,(function(){returnError in fused matMul inner shapes (.concat(g,) and ()+.concat(b,) of Tensors with shapes ).concat(y.shape, and )+.concat(v.shape, and transposeA=).concat(o)+ and transposeB=.concat(i, must match.)}));var _,E,I=Dr(y.shape.slice(0,-2),v.shape.slice(0,-2)).concat([x,N]),O=Vn(y,o[T,g,x][T,x,g]),A=Vn(v,i[S,N,b][S,b,N]);null!=u&&(_=d($t(_=ln(u,bias,fused matMul),y),1)[0],Dr(I,_.shape)),null!=l&&(E=ln(l,prelu weights,fused matMul));var D=function(e,t){var n,r,a=d(t,4),s=a[0],c=a[1],l=a[2],h=a[3],f=Bs(Vn(e,l.shape),l,p);return oi!o&&i(n=qn(f,c,!1,!1),r=qn(f,s,!0,!1))o&&!i(n=qn(c,f,!1,!0),r=qn(s,f,!1,!1))(n=qn(c,f,!0,!0),r=qn(f,s,!0,!0))(n=qn(f,c,!1,!0),r=qn(s,f,!0,!1)),null!=u[n,r,Ks(h,f)][n,r]},M={aO,bA,bias_,preluActivationWeightsE},C={transposeAo,transposeBi,activationp,leakyreluAlphaf};if(null==u){var F=ga((function(e,t,n){var r=on.runKernel(Ke,M,C);return n([e,t,r]),{valueVn(r,I),gradFuncD}}));return F(O,A)}var R=ga((function(e,t,n,r){var a=on.runKernel(Ke,M,C);return r([e,t,a,n]),{valueVn(a,I),gradFuncD}}));return R(O,A,_)}})};var Qs=fn({hammingWindow_function(e){return Ls(e,.54,.46)}});var Xs=fn({hannWindow_function(e){return Ls(e,.5,.5)}});var Ys=fn({frame_function(e,t,n,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var o=0,s=[];o+t=e.size;)s.push(Gn(e,o,t)),o+=n;if(r)for(;oe.size;){var i=o+t-e.size,u=jn([Gn(e,o,t-i),sr([i],a)]);s.push(u),o+=n}return 0===s.lengthxs([],[0,t])Vn(jn(s),[s.length,t])}});var Js=fn({stft_function(e,t,n,r,a){void 0===a&&(a=Xs),null==r&&(r=zs(t));var o=Ys(e,t,n),s=Un(o,a(t));return ls(s,r)}});var $s=fn({cropAndResize_function(e,t,n,r,a,o){void 0===a&&(a=bilinear),void 0===o&&(o=0);var s=ln(e,image,cropAndResize),i=ln(t,boxes,cropAndResize,float32),u=ln(n,boxInd,cropAndResize,int32),c=i.shape[0];ie(4===s.rank,(function(){returnError in cropAndResize image must be rank 4,+but got rank .concat(s.rank,.)})),ie(2===i.rank&&4===i.shape[1],(function(){returnError in cropAndResize boxes must be have size [.concat(c,,4] )+but had shape .concat(i.shape,.)})),ie(1===u.rank&&u.shape[0]===c,(function(){returnError in cropAndResize boxInd must be have size [.concat(c,] )+but had shape .concat(i.shape,.)})),ie(2===r.length,(function(){returnError in cropAndResize cropSize must be of length 2, but got +length .concat(r.length,.)})),ie(r[0]=1&&r[1]=1,(function(){returncropSize must be atleast [1,1], but was .concat(r)})),ie(bilinear===anearest===a,(function(){returnmethod must be bilinear or nearest, but was .concat(a)}));var p={images,boxesi,boxIndu},l={methoda,extrapolationValueo,cropSizer};return on.runKernel(CropAndResize,p,l)}});var ei=fn({flipLeftRight_function(e){var t=ln(e,image,flipLeftRight,float32);ie(4===t.rank,(function(){returnError in flipLeftRight image must be rank 4,+but got rank .concat(t.rank,.)}));var n={imaget};return on.runKernel(FlipLeftRight,n,{})}});var ti=fn({grayscaleToRGB_function(e){var t=ln(e,image,grayscaleToRGB),n=t.rank-1,r=t.shape[n];ie(t.rank=2,(function(){returnError in grayscaleToRGB images must be at least rank 2, +but got rank .concat(t.rank,.)})),ie(1===r,(function(){returnError in grayscaleToRGB last dimension of a grayscale image +should be size 1, but got size .concat(r,.)}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,na(t,a)}});var ni=fn({rgbToGrayscale_function(e){var t=ln(e,image,RGBToGrayscale),n=t.rank-1,r=t.shape[n];ie(t.rank=2,(function(){returnError in RGBToGrayscale images must be at least rank 2, +but got rank .concat(t.rank,.)})),ie(3===r,(function(){returnError in RGBToGrayscale last dimension of an RGB image +should be size 3, but got size .concat(r,.)}));var a,o=t.dtype,s=On(t,float32),i=bs([.2989,.587,.114]);switch(t.rank){case 2a=Lr(ij,j-i,s,i);break;case 3a=Lr(ijk,k-ij,s,i);break;case 4a=Lr(ijkl,l-ijk,s,i);break;case 5a=Lr(ijklm,m-ijkl,s,i);break;case 6a=Lr(ijklmn,n-ijklm,s,i);break;defaultthrow new Error(Not a valid tensor rank.)}return a=ea(a,-1),On(a,o)}});var ri=fn({rotateWithOffset_function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=.5);var a=ln(e,image,rotateWithOffset,float32);ie(4===a.rank,(function(){returnError in rotateWithOffset image must be rank 4,+but got rank .concat(a.rank,.)}));var o={imagea},s={radianst,fillValuen,centerr};return on.runKernel(RotateWithOffset,o,s)}});function ai(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var s=e.shape[0];return n=Math.min(n,s),ie(0=r&&r=1,(function(){returniouThreshold must be in [0, 1], but was '.concat(r,')})),ie(2===e.rank,(function(){returnboxes must be a 2D tensor, but was of rank '.concat(e.rank,')})),ie(4===e.shape[1],(function(){returnboxes must have 4 columns, but 2nd dimension was .concat(e.shape[1])})),ie(1===t.rank,(function(){returnscores must be a 1D tensor})),ie(t.shape[0]===s,(function(){returnscores has incompatible shape with boxes. Expected .concat(s,, )+but was .concat(t.shape[0])})),ie(0=o&&o=1,(function(){returnsoftNmsSigma must be in [0, 1], but was '.concat(o,')})),{maxOutputSizen,iouThresholdr,scoreThresholda,softNmsSigmao}}var oi=fn({nonMaxSuppression_function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var o=ln(e,boxes,nonMaxSuppression,float32),s=ln(t,scores,nonMaxSuppression,float32),i=ai(o,s,n,r,a),u={maxOutputSizen=i.maxOutputSize,iouThresholdr=i.iouThreshold,scoreThresholda=i.scoreThreshold};return on.runKernel(NonMaxSuppressionV3,{boxeso,scoress},u)}});function si(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,o=0,s=!1;for(;ra;){var i=n(t,e[o=r+(a-r1)]);i0r=o+1(a=o,s=!i)}return sr-r-1}(e,t,nii)}(e,t,n),a=r0-(r+1)r;e.splice(a,0,t)}function ii(e,t){return et1et-10}function ui(e,t,n,r,a,o,s,i,u){void 0===s&&(s=!1),void 0===i&&(i=!1),void 0===u&&(u=!1);for(var c=[],p=0;pt.length;p++)t[p]a&&c.push({scoret[p],boxIndexp,suppressBeginIndex0});c.sort(li);for(var l=o0-.5o0,f=[],m=[];f.lengthn&&c.length0;){var y=c.pop(),v=y.score,g=y.boxIndex,b=y.suppressBeginIndex;if(va)break;for(var x=!1,N=f.length-1;N=b;--N){var w=ci(e,g,f[N]);if(w=r){x=!0;break}if(y.score=y.scorepi(r,l,w),y.score=a)break}y.suppressBeginIndex=f.length,x(y.score===v(f.push(g),m.push(y.score))y.scorea&&si(c,y,li))}var k=f.length,T=n-k;i&&T0&&(f.push.apply(f,h([],d(new Array(T).fill(0)),!1)),m.push.apply(m,h([],d(new Array(T).fill(0)),!1)));var S={selectedIndicesf};return s&&(S.selectedScores=m),u&&(S.validOutputs=k),S}function ci(e,t,n){var r=e.subarray(4t,4t+4),a=e.subarray(4n,4n+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),i=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),p=Math.min(a[1],a[3]),l=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(i-o)(u-s),f=(l-c)(d-p);if(h=0f=0)return 0;var m=Math.max(o,c),y=Math.max(s,p),v=Math.min(i,l),g=Math.min(u,d),b=Math.max(v-m,0)Math.max(g-y,0);return b(h+f-b)}function pi(e,t,n){var r=Math.exp(tnn);return n=er0}function li(e,t){return e.score-t.scoree.score===t.score&&t.boxIndex-e.boxIndex}var di=function(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),c(this,void 0,void 0,(function(){var o,s,i,u,c,l,d;return p(this,(function(p){switch(p.label){case 0return o=ln(e,boxes,nonMaxSuppressionAsync),s=ln(t,scores,nonMaxSuppressionAsync),i=ai(o,s,n,r,a),n=i.maxOutputSize,r=i.iouThreshold,a=i.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1return u=p.sent(),c=u[0],l=u[1],d=function(e,t,n,r,a){return ui(e,t,n,r,a,0)}(c,l,n,r,a).selectedIndices,o!==e&&o.dispose(),s!==t&&s.dispose(),[2,bs(d,int32)]}}))}))};var hi=fn({nonMaxSuppressionWithScore_function(e,t,n,r,a,o){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===o&&(o=0);var s=ln(e,boxes,nonMaxSuppression),i=ln(t,scores,nonMaxSuppression),u=ai(s,i,n,r,a,o),c={boxess,scoresi},p={maxOutputSizen=u.maxOutputSize,iouThresholdr=u.iouThreshold,scoreThresholda=u.scoreThreshold,softNmsSigmao=u.softNmsSigma},l=on.runKernel(NonMaxSuppressionV5,c,p);return{selectedIndicesl[0],selectedScoresl[1]}}});var fi=function(e,t,n,r,a,o){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===o&&(o=0),c(this,void 0,void 0,(function(){var s,i,u,c,l,d,h,f,m;return p(this,(function(p){switch(p.label){case 0return s=ln(e,boxes,nonMaxSuppressionAsync),i=ln(t,scores,nonMaxSuppressionAsync),u=ai(s,i,n,r,a,o),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([s.data(),i.data()])];case 1return c=p.sent(),l=c[0],d=c[1],h=function(e,t,n,r,a,o){return ui(e,t,n,r,a,o,!0)}(l,d,n,r,a,o),f=h.selectedIndices,m=h.selectedScores,s!==e&&s.dispose(),i!==t&&i.dispose(),[2,{selectedIndicesbs(f,int32),selectedScoresbs(m)}]}}))}))};var mi=fn({nonMaxSuppressionPadded_function(e,t,n,r,a,o){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===o&&(o=!1);var s=ln(e,boxes,nonMaxSuppression),i=ln(t,scores,nonMaxSuppression),u=ai(s,i,n,r,a,null),c={boxess,scoresi},p={maxOutputSizeu.maxOutputSize,iouThresholdu.iouThreshold,scoreThresholdu.scoreThreshold,padToMaxOutputSizeo},l=on.runKernel(NonMaxSuppressionV4,c,p);return{selectedIndicesl[0],validOutputsl[1]}}});var yi=function(e,t,n,r,a,o){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===o&&(o=!1),c(this,void 0,void 0,(function(){var s,i,u,c,l,h,f,m,y,v,g,b;return p(this,(function(p){switch(p.label){case 0return s=ln(e,boxes,nonMaxSuppressionAsync),i=ln(t,scores,nonMaxSuppressionAsync),u=ai(s,i,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,h=u.scoreThreshold,[4,Promise.all([s.data(),i.data()])];case 1return f=d.apply(void 0,[p.sent(),2]),m=f[0],y=f[1],v=function(e,t,n,r,a,o){return ui(e,t,n,r,a,0,!1,o,!0)}(m,y,c,l,h,o),g=v.selectedIndices,b=v.validOutputs,s!==e&&s.dispose(),i!==t&&i.dispose(),[2,{selectedIndicesbs(g,int32),validOutputsGr(b,int32)}]}}))}))};var vi=fn({resizeBilinear_function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var a=ln(e,images,resizeBilinear);ie(3===a.rank4===a.rank,(function(){returnError in resizeBilinear x must be rank 3 or 4, but got +rank .concat(a.rank,.)})),ie(2===t.length,(function(){returnError in resizeBilinear new shape must 2D, but got shape +.concat(t,.)})),ie(!1===r!1===n,(function(){returnError in resizeBilinear If halfPixelCenters is true, alignCorners must be false.}));var o=a,s=!1;3===a.rank&&(s=!0,o=Vn(a,[1,a.shape[0],a.shape[1],a.shape[2]])),d(t,0);var i={imageso},u={alignCornersn,halfPixelCentersr,sizet},c=on.runKernel(ResizeBilinear,i,u);return sVn(c,[c.shape[1],c.shape[2],c.shape[3]])c}});var gi=fn({resizeNearestNeighbor_function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var a=ln(e,images,resizeNearestNeighbor);ie(3===a.rank4===a.rank,(function(){returnError in resizeNearestNeighbor x must be rank 3 or 4, but got +rank .concat(a.rank,.)})),ie(2===t.length,(function(){returnError in resizeNearestNeighbor new shape must 2D, but got shape +.concat(t,.)})),ie(float32===a.dtypeint32===a.dtype,(function(){return`images` must have `int32` or `float32` as dtype})),ie(!1===r!1===n,(function(){returnError in resizeNearestNeighbor If halfPixelCenters is true, alignCorners must be false.}));var o=a,s=!1;3===a.rank&&(s=!0,o=Vn(a,[1,a.shape[0],a.shape[1],a.shape[2]])),d(t,0);var i={imageso},u={alignCornersn,halfPixelCentersr,sizet},c=on.runKernel(ResizeNearestNeighbor,i,u);return sVn(c,[c.shape[1],c.shape[2],c.shape[3]])c}});var bi=fn({threshold_function(e,t,n,r){var a;void 0===t&&(t=binary),void 0===n&&(n=!1),void 0===r&&(r=.5);var o,s,i,u,c=ln(e,image,threshold),p=c.shape[0]c.shape[1],l=Un(bs([r]),255);if(ie(3===c.rank,(function(){returnError in threshold image must be rank 3,+but got rank .concat(c.rank,.)})),ie(3===c.shape[2]1===c.shape[2],(function(){returnError in threshold image color channel must be equal to 3 or 1+but got .concat(c.shape[2],.)})),ie(int32===c.dtypefloat32===c.dtype,(function(){returnError in dtype image dtype must be int32 or float32,+but got dtype .concat(c.dtype,.)})),ie(otsu===tbinary===t,(function(){returnMethod must be binary or otsu, but was .concat(t)})),3===c.shape[2]){o=(a=d(ps(c,[1,1,1],-1),3))[0],s=a[1],i=a[2];var h=Un(o,.2989),f=Un(s,.587),m=Un(i,.114);u=gn(gn(h,f),m)}else u=e;otsu===t&&(l=function(e,t){for(var n,r,a,o,s,i,u=bs([-1]),c=bs([0]),p=bs([0]),l=0;le.size-1;l++){n=Gn(e,0,l+1),r=Gn(e,l+1),s=Ar(Qr(n),t),i=Ar(Qr(r),t);var d=Qr(Un(n,Vo(0,n.size)));a=Ar(d,Qr(n));var h=sr(r.shape,n.size),f=gn(Vo(0,r.size),h),m=Un(r,f);o=Ar(Qr(m),Qr(r));var y=wa(a,o),v=wa(a,o),g=Un(s,i);p=Un(Un(g,y),v);var b=sa(p,c);c=Cr(b,p,c),u=Cr(b,bs([l]),u)}return u}(er(On(Zo(u),int32),gs([]),256),p));var y=nfa(u,l)sa(u,l);return On(Un(y,255),int32)}});var xi=fn({transform_function(e,t,n,r,a,o){void 0===n&&(n=nearest),void 0===r&&(r=constant),void 0===a&&(a=0);var s=ln(e,image,transform,float32),i=ln(t,transforms,transform,float32);ie(4===s.rank,(function(){returnError in transform image must be rank 4,+but got rank .concat(s.rank,.)})),ie(2===i.rank&&(i.shape[0]===s.shape[0]1===i.shape[0])&&8===i.shape[1],(function(){returnError in transform Input transform should be batch x 8 or 1 x 8})),ie(null==o2===o.length,(function(){returnError in transform outputShape must be [height, width] or null, +but got .concat(o,.)}));var u={images,transformsi},c={interpolationn,fillModer,fillValuea,outputShapeo};return on.runKernel(Transform,u,c)}});var Ni=fn({bandPart_function(e,t,n){var r=ln(e,a,bandPart);ie(r.rank=2,(function(){returnbandPart() Rank must be at least 2, got .concat(r.rank,.)}));var a,o,s=r.shape,i=d(r.shape.slice(-2),2),u=i[0],c=i[1];number==typeof t(ie(t%1==0,(function(){returnbandPart() numLower must be an integer, got .concat(t,.)})),ie(t=u,(function(){returnbandPart() numLower (.concat(t,))+ must not be greater than the number of rows (.concat(u,).)})),a=ln(t0ut,numLower,bandPart))(ie(int32===t.dtype,(function(){returnbandPart() numLower's dtype must be an int32.})),a=Cr(ha(t,0),u,Va(t,u))),number==typeof n(ie(n%1==0,(function(){returnbandPart() numUpper must be an integer, got .concat(n,.)})),ie(n=c,(function(){returnbandPart() numUpper (.concat(n,))+ must not be greater than the number of columns (.concat(c,).)})),o=ln(n0cn,numUpper,bandPart))(ie(int32===n.dtype,(function(){returnbandPart() numUpper's dtype must be an int32.})),o=Cr(ha(n,0),c,Va(n,c)));var p=Vn(Vo(0,u,1,int32),[-1,1]),l=Vo(0,c,1,int32),h=wa(p,l),f=Sa(fa(h,a),ia(h,ba(o))),m=za([u,c],r.dtype);return Vn(fs(Es(Vn(r,[-1,u,c])).map((function(e){return Cr(f,e,m)}))),s)}});var wi=fn({gramSchmidt_function(e){var t;if(Array.isArray(e)){t=!1,ie(null!=e&&e.length0,(function(){returnGram-Schmidt process input must not be null, undefined, or empty}));for(var n=e[0].shape[0],r=function(t){ie(e[t].shape[0]===n,(function(){returnGram-Schmidt Non-unique lengths found in the input vectors +(.concat(e[t].shape[0], vs. ).concat(n,))}))},a=1;ae.length;++a)r(a)}else t=!0,e=ps(e,e.shape[0],0).map((function(e){return hs(e,[0])}));ie(e.length=e[0].shape[0],(function(){returnGram-Schmidt Number of vectors (.concat(e.length,) exceeds )+number of dimensions (.concat(e[0].shape[0],).)}));var o=[],s=e,i=function(e){o.push(on.tidy((function(){var t=s[e];if(e0)for(var n=0;ne;++n){var r=Un(Qr(Un(o[n],t)),o[n]);t=wa(t,r)}return Ar(t,Yr(t,euclidean))})))};for(a=0;ae.length;++a)i(a);return tfs(o,0)o}});function ki(e,t){return void 0===t&&(t=!1),on.tidy((function(){ie(2===e.shape.length,(function(){returnqr2d() requires a 2D Tensor, but got a .concat(e.shape.length,D Tensor.)}));for(var n=e.shape[0],r=e.shape[1],a=ra(n),o=Kn(e),s=xs([[1]],[1,1]),i=Kn(s),u=n=rrn,c=function(e){var t,u=o,c=i,p=a;t=d(on.tidy((function(){var t=Gn(o,[e,e],[n-e,1]),u=Yr(t),c=Gn(o,[e,e],[1,1]),p=Cr(sa(c,0),xs([[-1]]),xs([[1]])),l=wa(c,Un(p,u)),d=Ar(t,l);i=1===d.shape[0]Kn(s)jn([s,Gn(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var h=ba(Ar(qn(p,l),u)),f=Gn(o,[e,0],[n-e,r]),m=Un(h,i),y=As(i);if(0===e)o=wa(f,qn(m,qn(y,f)));else{var v=wa(f,qn(m,qn(y,f)));o=jn([Gn(o,[0,0],[e,r]),v],0)}var g=As(m),b=Gn(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=wa(b,qn(qn(b,i),g));else{var x=wa(b,qn(qn(b,i),g));a=jn([Gn(a,[0,0],[n,e]),x],1)}return[i,o,a]})),3),i=t[0],o=t[1],a=t[2],en([u,c,p]).forEach((function(e){return e.dispose()}))},p=0;pu;++p)c(p);return!t&&nr&&(a=Gn(a,[0,0],[n,r]),o=Gn(o,[0,0],[r,r])),[a,o]}))}var Ti,Si=fn({qr_function(e,t){if(void 0===t&&(t=!1),ie(e.rank=2,(function(){returnqr() requires input tensor to have a rank = 2, but got rank .concat(e.rank)})),2===e.rank)return ki(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return et})),r=Es(Vn(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];return r.forEach((function(e){var n=d(ki(e,t),2),r=n[0],s=n[1];a.push(r),o.push(s)})),[Vn(fs(a,0),e.shape),Vn(fs(o,0),e.shape)]}});!function(e){e[e.NONE=0]=NONE,e[e.MEAN=1]=MEAN,e[e.SUM=2]=SUM,e[e.SUM_BY_NONZERO_WEIGHTS=3]=SUM_BY_NONZERO_WEIGHTS}(Ti(Ti={}));var _i=fn({computeWeightedLoss_function(e,t,n){void 0===n&&(n=Ti.SUM_BY_NONZERO_WEIGHTS);var r=ln(e,losses,computeWeightedLoss),a=null;null!=t&&(a=ln(t,weights,computeWeightedLoss));var o=null==arUn(r,a);if(n===Ti.NONE)return o;if(n===Ti.SUM)return Qr(o);if(n===Ti.MEAN){if(null==a)return Ra(o);var s=r.sizea.size,i=Ar(Qr(o),Qr(a));return s1Ar(i,Gr(s))i}if(n===Ti.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Ar(Qr(o),Gr(r.size));var u=Un(a,La(r.shape)),c=On(Qr(Ua(u,Gr(0))),float32);return Ar(Qr(o),c)}throw Error(Unknown reduction .concat(n))}});var Ei=fn({absoluteDifference_function(e,t,n,r){void 0===r&&(r=Ti.SUM_BY_NONZERO_WEIGHTS);var a=ln(e,labels,absoluteDifference),o=ln(t,predictions,absoluteDifference),s=null;null!=n&&(s=ln(n,weights,absoluteDifference)),ue(a.shape,o.shape,Error in absoluteDifference );var i=mn(wa(a,o));return _i(i,s,r)}});var Ii=fn({cosineDistance_function(e,t,n,r,a){void 0===a&&(a=Ti.SUM_BY_NONZERO_WEIGHTS);var o=ln(e,labels,cosineDistance),s=ln(t,predictions,cosineDistance),i=null;null!=r&&(i=ln(r,weights,cosineDistance)),ue(o.shape,s.shape,Error in cosineDistance );var u=Gr(1),c=wa(u,Qr(Un(o,s),n,!0));return _i(c,i,a)}});var Oi=fn({hingeLoss_function(e,t,n,r){void 0===r&&(r=Ti.SUM_BY_NONZERO_WEIGHTS);var a=ln(e,labels,hingeLoss),o=ln(t,predictions,hingeLoss),s=null;null!=n&&(s=ln(n,weights,hingeLoss)),ue(a.shape,o.shape,Error in hingeLoss );var i=Gr(1);a=wa(Un(Gr(2),a),i);var u=Ko(wa(i,Un(a,o)));return _i(u,s,r)}});var Ai=fn({huberLoss_function(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=Ti.SUM_BY_NONZERO_WEIGHTS);var o=ln(e,labels,huberLoss),s=ln(t,predictions,huberLoss),i=null;null!=n&&(i=ln(n,weights,huberLoss)),ue(o.shape,s.shape,Error in huberLoss );var u=Gr(r),c=mn(wa(s,o)),p=Va(c,u),l=wa(c,p),d=gn(Un(Gr(.5),Zr(p)),Un(u,l));return _i(d,i,a)}});var Di=fn({logLoss_function(e,t,n,r,a){void 0===r&&(r=1e-7),void 0===a&&(a=Ti.SUM_BY_NONZERO_WEIGHTS);var o=ln(e,labels,logLoss),s=ln(t,predictions,logLoss),i=null;null!=n&&(i=ln(n,weights,logLoss)),ue(o.shape,s.shape,Error in logLoss );var u=Gr(1),c=Gr(r),p=ba(Un(o,ya(gn(s,c)))),l=Un(wa(u,o),ya(gn(wa(u,s),c))),d=wa(p,l);return _i(d,i,a)}});var Mi=fn({meanSquaredError_function(e,t,n,r){void 0===r&&(r=Ti.SUM_BY_NONZERO_WEIGHTS);var a=ln(e,labels,meanSquaredError),o=ln(t,predictions,meanSquaredError),s=null;null!=n&&(s=ln(n,weights,meanSquaredError)),ue(a.shape,o.shape,Error in meanSquaredError );var i=ds(a,o);return _i(i,s,r)}});var Ci=fn({sigmoidCrossEntropy_function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Ti.SUM_BY_NONZERO_WEIGHTS);var o=ln(e,multiClassLabels,sigmoidCrossEntropy),s=ln(t,logits,sigmoidCrossEntropy),i=null;if(null!=n&&(i=ln(n,weights,sigmoidCrossEntropy)),ue(o.shape,s.shape,Error in sigmoidCrossEntropy ),r0){var u=Gr(r),c=Gr(1),p=Gr(.5);o=gn(Un(o,wa(c,u)),Un(p,u))}var l=function(e,t){var n=ln(e,labels,sigmoidCrossEntropyWithLogits),r=ln(t,logits,sigmoidCrossEntropyWithLogits);ue(n.shape,r.shape,Error in sigmoidCrossEntropyWithLogits );var a=Ko(r),o=Un(r,n),s=va($r(ba(mn(r))));return gn(wa(a,o),s)}(o,s);return _i(l,i,a)}});var Fi=fn({softmaxCrossEntropy_function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Ti.SUM_BY_NONZERO_WEIGHTS);var o=ln(e,onehotLabels,softmaxCrossEntropy),s=ln(t,logits,softmaxCrossEntropy),i=null;if(null!=n&&(i=ln(n,weights,softmaxCrossEntropy)),ue(o.shape,s.shape,Error in softmaxCrossEntropy ),r0){var u=Gr(r),c=Gr(1),p=Gr(o.shape[1]);o=gn(Un(o,wa(c,u)),Ar(u,p))}var l=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(Softmax cross entropy along a non-last dimension is not yet +supported. Labels  logits was rank .concat(t.rank, )+and dim was .concat(n));var r=ga((function(e,t,r){var a=Ta(t,[n],!0),o=wa(On(t,float32),a);r([e,o]);var s=ba(Un(o,e));return{valueQr(s,[n]),gradFuncfunction(e,t){var r=d(t,2),a=r[0],o=r[1],s=Kr(e.shape,[n]);return[Un(Vn(e,s),wa(On(a,float32),$r(o))),Un(Vn(e,s),wa($r(o),On(a,float32)))]}}}));return r(e,t)}(o,s);return _i(l,i,a)}});var Ri=fn({sparseFillEmptyRows_function(e,t,n,r){var a=ln(e,indices,sparseFillEmptyRows,int32),o=ln(t,values,sparseFillEmptyRows),s=ln(n,denseShape,sparseFillEmptyRows,int32),i=ln(r,defaultValue,sparseFillEmptyRows,o.dtype);if(2!==a.rank)throw new Error(Indices should be Tensor2D but received shapen        .concat(a.shape));if(1!==o.rank)throw new Error(Values should be Tensor1D but received shape .concat(o.shape));if(1!==s.rank)throw new Error(Dense shape should be Tensor1D but received shape .concat(s.shape));if(0!==i.rank)throw new Error(Default value should be a scalar but received shape .concat(i.shape));var u={indicesa,valueso,denseShapes,defaultValuei},c=on.runKernel(SparseFillEmptyRows,u);return{outputIndicesc[0],outputValuesc[1],emptyRowIndicatorc[2],reverseIndexMapc[3]}}});var zi=fn({sparseReshape_function(e,t,n){var r=ln(e,inputIndices,sparseReshape,int32),a=ln(t,inputShape,sparseReshape,int32),o=ln(n,newShape,sparseReshape,int32);if(2!==r.rank)throw new Error(Input indices should be Tensor2D but received shapen        .concat(r.shape));if(1!==a.rank)throw new Error(Input shape should be Tensor1D but received shape .concat(a.shape));if(1!==o.rank)throw new Error(New shape should be Tensor1D but received shape .concat(o.shape));var s={inputIndicesr,inputShapea,newShapeo},i=on.runKernel(SparseReshape,s);return{outputIndicesi[0],outputShapei[1]}}});var Li=fn({sparseSegmentMean_function(e,t,n){var r=ln(e,data,sparseSegmentMean),a=ln(t,indices,sparseSegmentMean,int32),o=ln(n,segmentIds,sparseSegmentMean,int32);if(r.rank1)throw new Error(Data should be at least 1 dimensional but received scalar);if(1!==a.rank)throw new Error(Indices should be Tensor1D but received shapen          .concat(a.shape));if(1!==o.rank)throw new Error(Segment ids should be Tensor1D but received shapen          .concat(o.shape));var s={datar,indicesa,segmentIdso};return on.runKernel(SparseSegmentMean,s)}});var Vi=fn({sparseSegmentSum_function(e,t,n){var r=ln(e,data,sparseSegmentSum),a=ln(t,indices,sparseSegmentSum,int32),o=ln(n,segmentIds,sparseSegmentSum,int32);if(r.rank1)throw new Error(Data should be at least 1 dimensional but received scalar);if(1!==a.rank)throw new Error(Indices should be Tensor1D but received shapen         .concat(a.shape));if(1!==o.rank)throw new Error(Segment ids should be Tensor1D but received shapen         .concat(o.shape));var s={datar,indicesa,segmentIdso};return on.runKernel(SparseSegmentSum,s)}});var Pi=fn({stringNGrams_function(e,t,n,r,a,o,s,i){var u=ln(e,data,stringNGrams,string);if(string!==u.dtype)throw new Error(Data must be of datatype string);if(1!==u.shape.length)throw new Error(Data must be a vector, saw .concat(u.shape));var c=ln(t,dataSplits,stringNGrams);if(int32!==c.dtype)throw new Error(Data splits must be of datatype int32);var p={separatorn,nGramWidthsr,leftPada,rightPado,padWidths,preserveShortSequencesi},l={datau,dataSplitsc},d=on.runKernel(StringNGrams,l,p);return{nGramsd[0],nGramsSplitsd[1]}}});var Bi={__proto__null,OP_SCOPE_SUFFIXhn,absmn,acosyn,acoshvn,addgn,addNbn,allxn,anyNn,argMaxwn,argMinkn,asinTn,asinhSn,atan_n,atan2En,atanhIn,avgPoolPn,avgPool3dBn,basicLSTMCellZn,batchNormXn,batchNorm2dYn,batchNorm3dJn,batchNorm4d$n,batchToSpaceNDQn,bincounter,bitwiseAndtr,booleanMaskAsyncOs,broadcastArgsnr,broadcastTorr,bufferar,castOn,ceilor,clipByValueir,cloneKn,complexur,concatjn,concat1dcr,concat2dpr,concat3dlr,concat4ddr,conv1dfr,conv2dhr,conv2dTransposeyr,conv3dvr,conv3dTransposebr,cosxr,coshNr,cosineWindowLs,cumprodwr,cumsumkr,denseBincountTr,depthToSpaceSr,depthwiseConv2d_r,diagEr,dilation2dIr,divAr,divNoNanRr,dotzr,dropoutRs,einsumLr,eluVr,enclosingPowerOfTwozs,ensureShapePr,equalMr,erfBr,euclideanNormJr,exp$r,expandDimsea,expm1ta,eyera,fftis,fillsr,flooraa,floorDivOr,fusedZs,gatheroa,gatherNDFs,greatersa,greaterEqualia,ifftus,imagua,image{flipLeftRightei,grayscaleToRGBti,resizeNearestNeighborgi,resizeBilinearvi,rgbToGrayscaleni,rotateWithOffsetri,cropAndResize$s,nonMaxSuppressionoi,nonMaxSuppressionAsyncdi,nonMaxSuppressionWithScorehi,nonMaxSuppressionWithScoreAsyncfi,nonMaxSuppressionPaddedmi,nonMaxSuppressionPaddedAsyncyi,thresholdbi,transformxi},inTopKAsyncVs,irfftcs,isFiniteca,isInfpa,isNaNla,leakyReluda,lessha,lessEqualfa,linalg{bandPartNi,gramSchmidtwi,qrSi},linspacefunction(e,t,n){if(n=0)throw new Error(The number of values should be positive.);var r={starte,stopt,numn};return on.runKernel(LinSpace,{},r)},localResponseNormalizationma,logya,log1pva,logSigmoidNa,logSoftmaxka,logSumExpTa,logicalAndSa,logicalNot_a,logicalOrEa,logicalXorIa,losses{absoluteDifferenceEi,computeWeightedLoss_i,cosineDistanceIi,hingeLossOi,huberLossAi,logLossDi,meanSquaredErrorMi,sigmoidCrossEntropyCi,softmaxCrossEntropyFi},lowerBoundfunction(e,t){return Aa(e,t,left)},matMulqn,maxjr,maxPoolDa,maxPool3dMa,maxPoolWithArgmaxCa,maximumFa,meanRa,meshgridfunction(e,t,n){var r=(void 0===n{}n).indexing,a=void 0===rxyr;if(xy!==a&&ij!==a)throw new TypeError(.concat(a, is not a valid third argument to meshgrid));if(void 0===e)return[];var o=ln(e,x,meshgrid,e instanceof jte.dtypefloat32);if(void 0===t)return[o];var s=ln(t,y,meshgrid,t instanceof jtt.dtypefloat32),i=pe(o.shape),u=pe(s.shape);returnxy===a(o=Vn(o,[1,-1]),s=Vn(s,[-1,1]),[qn(La([u,1],o.dtype),o),qn(s,La([1,i],s.dtype))])(o=Vn(o,[-1,1]),s=Vn(s,[1,-1]),[qn(o,La([1,u],o.dtype)),qn(La([i,1],s.dtype),s)])},minqr,minimumVa,mirrorPadPa,modBa,momentsKa,movingAverageDs,mulUn,multiRNNCellja,multinomialqa,negba,normYr,notEqualUa,oneHotWa,onesLa,onesLikeGa,opfn,outerProductHa,padZa,pad1dQa,pad2dXa,pad3dYa,pad4dJa,pooleo,powUr,preluto,printfunction(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},prodno,raggedGatherro,raggedRangeao,raggedTensorToTensoroo,randso,randomGammaCo,randomNormalFo,randomStandardNormalRo,randomUniformzo,randomUniformIntLo,rangeVo,realPo,reciprocalBo,reluKo,relu6jo,reshapeVn,reverseqo,reverse1dUo,reverse2dWo,reverse3dGo,reverse4dHo,rfftls,roundZo,rsqrtQo,scalarGr,scatterNDMs,searchSortedAa,seluXo,separableConv2dYo,setdiff1dAsyncJo,sigmoidWn,sign$o,signal{hammingWindowQs,hannWindowXs,frameYs,stftJs},sines,sinhts,sliceGn,slice1dns,slice2drs,slice3das,slice4dos,softmaxss,softplusxa,spaceToBatchND$a,sparse{sparseFillEmptyRowsRi,sparseReshapezi,sparseSegmentMeanLi,sparseSegmentSumVi},sparseToDenseCs,spectral{fftis,ifftus,rfftls,irfftcs},splitps,sqrtHr,squareZr,squaredDifferenceds,squeezehs,stackfs,stepms,stridedSliceys,string{stringNGramsPi,stringSplitfn({stringSplit_function(e,t,n){void 0===n&&(n=!0);var r=ln(e,input,stringSplit,string),a=ln(t,delimiter,stringSplit,string);if(1!==r.rank)throw new Error(Input should be Tensor1D but received shape .concat(r.shape));if(0!==a.rank)throw new Error(Delimiter should be a scalar but received shape .concat(a.shape));var o={skipEmptyn},s={inputr,delimitera},i=on.runKernel(StringSplit,s,o);return{indicesi[0],valuesi[1],shapei[2]}}}),stringToHashBucketFastfn({stringToHashBucketFast_function(e,t){var n=ln(e,input,stringToHashBucketFast,string),r={numBucketst};if(t=0)throw new Error(Number of buckets must be at least 1);var a={inputn};return on.runKernel(StringToHashBucketFast,a,r)}}),staticRegexReplacefn({staticRegexReplace_function(e,t,n,r){void 0===r&&(r=!0);var a=ln(e,input,staticRegexReplace,string),o={patternt,rewriten,replaceGlobalr};return on.runKernel(StaticRegexReplace,{xa},o)}})},subwa,sumQr,tanvs,tanhHn,tensorgs,tensor1dbs,tensor2dxs,tensor3dfunction(e,t,n){if(ce(e),null!=t&&3!==t.length)throw new Error(tensor3d() requires shape to have three numbers);var r=un(e,n);if(3!==r.length&&1!==r.length)throw new Error(tensor3d() requires values to be number[][][] or flatTypedArray);if(1===r.length&&null==t)throw new Error(tensor3d() requires shape to be provided when `values` are a flat array);return Wr(e,t,r,n)},tensor4dfunction(e,t,n){if(ce(e),null!=t&&4!==t.length)throw new Error(tensor4d() requires shape to have four numbers);var r=un(e,n);if(4!==r.length&&1!==r.length)throw new Error(tensor4d() requires values to be number[][][][] or flatTypedArray);if(1===r.length&&null==t)throw new Error(tensor4d() requires shape to be provided when `values` are a flat array);return Wr(e,t,r,n)},tensor5dfunction(e,t,n){if(ce(e),null!=t&&5!==t.length)throw new Error(tensor5d() requires shape to have five numbers);var r=un(e,n);if(5!==r.length&&1!==r.length)throw new Error(tensor5d() requires values to be number[][][][][] or flatTypedArray);if(1===r.length&&null==t)throw new Error(tensor5d() requires shape to be provided when `values` are a flat array);return Wr(e,t,r,n)},tensor6dfunction(e,t,n){if(ce(e),null!=t&&6!==t.length)throw new Error(tensor6d() requires shape to have six numbers);var r=un(e,n);if(6!==r.length&&1!==r.length)throw new Error(tensor6d() requires values to be number[][][][][][] or flatTypedArray);if(1===r.length&&null==t)throw new Error(tensor6d() requires shape to be provided when `values` are a flat array);return Wr(e,t=tr,r,n)},tensorScatterUpdatews,tilena,topkks,transposeAs,truncatedNormalTs,uniqueSs,unsortedSegmentSum_s,unstackEs,upperBoundfunction(e,t){return Aa(e,t,right)},variablefunction(e,t,n,r){return void 0===t&&(t=!0),on.makeVariable(e,t,n,r)},whereCr,whereAsyncIs,zerosza,zerosLikeFr};function Ki(e,n,r){if(void 0===r&&(r=),number!=typeof e&&number!=typeof n){t.util.assert(e.length===n.length,(function(){return r+ Shapes .concat(e, and ).concat(n, must match)}));for(var a=0;ae.length;a++){var o=e[a],s=n[a];t.util.assert(o0s0o===s,(function(){return r+ Shapes .concat(e, and ).concat(n, must match)}))}}}function ji(e){returnnumber!=typeof e&&!e.some((function(e){return e0}))}function qi(e,t,n){var r=Ui(e,n),a=!ji(r);if(a&&0===t.length)throw new Error(Tried to calculate elements of an empty list+ with non-fully-defined elementShape .concat(r));if(a&&t.forEach((function(e){r=Ui(e.shape,r)})),!ji(r))throw new Error(Non-fully-defined elementShape .concat(r));return r}function Ui(e,t){if(number==typeof e)return t;if(number==typeof t)return e;if(e.length!==t.length)throw new Error(Incompatible ranks during merge .concat(e, vs. ).concat(t));for(var n=[],r=0;re.length;++r){var a=e[r],o=t[r];if(a=0&&o=0&&a!==o)throw new Error(Incompatible shape during merge .concat(e, vs. ).concat(t));n[r]=a=0ao}return n}var Wi=function(){function e(e,n,r,a,o,s,i){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=s,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=t.scalar(0),t.keep(this.idTensor)}return Object.defineProperty(e.prototype,id,{getfunction(){return this.idTensor.id},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,closed,{getfunction(){return this.closed_},enumerable!1,configurable!0}),e.prototype.clearAndClose=function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(e){if(this.closed_)throw new Error(TensorArray .concat(this.name, has already been closed.));if(e0e=this.size())throw new Error(Tried to read from index .concat(e,, but array size is ).concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error(TensorArray .concat(this.name, Could not read index ).concat(e, twice because it was cleared after a previous read )+(perhaps try setting clear_after_read = false).);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},e.prototype.readMany=function(e){var t=this;return e.map((function(e){return t.read(e)}))},e.prototype.write=function(e,n){if(this.closed_)throw new Error(TensorArray .concat(this.name, has already been closed.));if(e0!this.dynamicSize&&e=this.maxSize)throw new Error(Tried to write to index .concat(e,, but array is not resizeable and size is ).concat(this.maxSize));var r=this.tensors[e]{};if(n.dtype!==this.dtype)throw new Error(TensorArray .concat(this.name, Could not write to TensorArray index ).concat(e,,n          because the value dtype is ).concat(n.dtype,, but TensorArray dtype is ).concat(this.dtype,.));if(0!==this.size()null!=this.elementShape&&0!==this.elementShape.length(this.elementShape=n.shape),Ki(this.elementShape,n.shape,TensorArray .concat(this.name, Could not write to TensorArray index ).concat(e,.)),r.read)throw new Error(TensorArray .concat(this.name, Could not write to TensorArray index ).concat(e,, because it has already been read.));if(r.written)throw new Error(TensorArray .concat(this.name, Could not write to TensorArray index ).concat(e,, because it has already been written.));r.tensor=n,t.keep(n),r.written=!0,this.tensors[e]=r},e.prototype.writeMany=function(e,t){var n=this;if(e.length!==t.length)throw new Error(TensorArray .concat(this.name, could not write multiple tensors,)+because the index size .concat(e.length, is not the same as tensors size ).concat(t.length,.));e.forEach((function(e,r){return n.write(e,t[r])}))},e.prototype.gather=function(e,n){if(n&&n!==this.dtype)throw new Error(TensorArray dtype is .concat(this.dtype, but gather requested dtype ).concat(n));if(e)e=e.slice(0,this.size());else{e=[];for(var r=0;rthis.size();r++)e.push(r)}if(0===e.length)return t.tensor([],[0].concat(this.elementShape));var a=this.readMany(e);return Ki(this.elementShape,a[0].shape,TensorArray shape mismatch ),t.stack(a,0)},e.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error(TensorArray dtype is .concat(this.dtype, but concat requested dtype ).concat(e));if(0===this.size())return t.tensor([],[0].concat(this.elementShape));for(var n=[],r=0;rthis.size();r++)n.push(r);var a=this.readMany(n);return Ki(this.elementShape,a[0].shape,TensorArray shape mismatch tensor array shape (.concat(this.elementShape,) vs first tensor shape ().concat(a[0].shape,))),t.concat(a,0)},e.prototype.scatter=function(e,n){if(n.dtype!==this.dtype)throw new Error(TensorArray dtype is .concat(this.dtype, but tensor has dtype ).concat(n.dtype));if(e.length!==n.shape[0])throw new Error(Expected len(indices) == tensor.shape[0], but saw .concat(e.length, vs. ).concat(n.shape[0]));var r=Math.max.apply(Math,h([],d(e),!1));if(!this.dynamicSize&&r=this.maxSize)throw new Error(Max index must be  array size (.concat(r,  vs. ).concat(this.maxSize,)));this.writeMany(e,t.unstack(n,0))},e.prototype.split=function(e,n){var r=this;if(n.dtype!==this.dtype)throw new Error(TensorArray dtype is .concat(this.dtype, but tensor has dtype ).concat(n.dtype));var a=0,o=e.map((function(e){return a+=e}));if(a!==n.shape[0])throw new Error(Expected sum of lengths to be equal ton          tensor.shape[0], but sum of lengths isn        .concat(a,, and tensor's shape is ).concat(n.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(TensorArray's size is not equal to the size of lengths (.concat(this.maxSize, vs. ).concat(e.length,), )+and the TensorArray is not marked as dynamically resizeable);var s=0===a0n.sizea,i=[];t.tidy((function(){n=t.reshape(n,[1,a,s]);for(var u=0;ue.length;++u){var c=[0,0===u0o[u-1],0],p=[1,e[u],s];i[u]=t.reshape(t.slice(n,c,p),r.elementShape)}return i}));for(var u=[],c=0;ce.length;c++)u[c]=c;this.writeMany(u,i)},e}(),Gi=function(){function e(e,n,r,a){void 0===a&&(a=-1),this.tensors=e,this.elementShape=n,this.elementDtype=r,null!=e&&e.forEach((function(e){if(r!==e.dtype)throw new Error(Invalid data types; op elements .concat(r,, but list elements ).concat(e.dtype));Ki(n,e.shape,TensorList shape mismatch ),t.keep(e)})),this.idTensor=t.scalar(0),this.maxNumElements=a,t.keep(this.idTensor)}return Object.defineProperty(e.prototype,id,{getfunction(){return this.idTensor.id},enumerable!1,configurable!0}),e.prototype.copy=function(){return new e(h([],d(this.tensors),!1),this.elementShape,this.elementDtype)},e.prototype.clearAndClose=function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)t.dispose()})),this.tensors.length=0,this.idTensor.dispose()},e.prototype.size=function(){return this.tensors.length},e.prototype.stack=function(e,n,r){var a=this;if(void 0===r&&(r=-1),n!==this.elementDtype)throw new Error(Invalid data types; op elements .concat(n,, but list elements ).concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error(Operation expected a list with .concat(r, elements but got a list with ).concat(this.tensors.length, elements.));Ki(e,this.elementShape,TensorList shape mismatch );var o=qi(this.elementShape,this.tensors,e);return t.tidy((function(){var e=a.tensors.map((function(e){return t.reshape(e,o)}));return t.stack(e,0)}))},e.prototype.popBack=function(e,n){if(n!==this.elementDtype)throw new Error(Invalid data types; op elements .concat(n,, but list elements ).concat(this.elementDtype));if(0===this.size())throw new Error(Trying to pop from an empty list.);var r=qi(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,Ki(a.shape,e,TensorList shape mismatch ),t.reshape(a,r)},e.prototype.pushBack=function(e){if(e.dtype!==this.elementDtype)throw new Error(Invalid data types; op elements .concat(e.dtype,, but list elements ).concat(this.elementDtype));if(Ki(e.shape,this.elementShape,TensorList shape mismatch ),this.maxNumElements===this.size())throw new Error(Trying to push element into a full list.);t.keep(e),this.tensors.push(e)},e.prototype.resize=function(t){if(t0)throw new Error(TensorListResize expects size to be non-negative. Got .concat(t));if(-1!==this.maxNumElements&&tthis.maxNumElements)throw new Error(TensorListResize input size .concat(t, is greater maxNumElement ).concat(this.maxNumElements,.));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;rMath.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n},e.prototype.getItem=function(e,n,r){if(r!==this.elementDtype)throw new Error(Invalid data types; op elements .concat(r,, but list elements ).concat(this.elementDtype));if(e0ethis.tensors.length)throw new Error(Trying to access element .concat(e, in a list with ).concat(this.tensors.length, elements.));if(null==this.tensors[e])throw new Error(element at index .concat(e, is null.));Ki(this.tensors[e].shape,n,TensorList shape mismatch );var a=qi(this.elementShape,this.tensors,n);return t.reshape(this.tensors[e],a)},e.prototype.setItem=function(e,n){if(n.dtype!==this.elementDtype)throw new Error(Invalid data types; op elements .concat(n.dtype,, but list elements ).concat(this.elementDtype));if(e0-1!==this.maxNumElements&&e=this.maxNumElements)throw new Error(Trying to set element .concat(e, in a list with max ).concat(this.maxNumElements, elements.));Ki(this.elementShape,n.shape,TensorList shape mismatch ),t.keep(n),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=n},e.prototype.gather=function(e,n,r){var a=this;if(n!==this.elementDtype)throw new Error(Invalid data types; op elements .concat(n,, but list elements ).concat(this.elementDtype));Ki(this.elementShape,r,TensorList shape mismatch ),e=e.slice(0,this.size());var o=qi(this.elementShape,this.tensors,r);return 0===e.lengtht.tensor([],[0].concat(o))t.tidy((function(){var n=e.map((function(e){return t.reshape(a.tensors[e],o)}));return t.stack(n,0)}))},e.prototype.concat=function(e,n){var r=this;if(e&&e!==this.elementDtype)throw new Error(TensorList dtype is .concat(this.elementDtype, but concat requested dtype ).concat(e));Ki(this.elementShape,n,TensorList shape mismatch );var a=qi(this.elementShape,this.tensors,n);return 0===this.size()t.tensor([],[0].concat(a))t.tidy((function(){var e=r.tensors.map((function(e){return t.reshape(e,a)}));return t.concat(e,0)}))},e}();var Hi=function(e,n,r){return c(void 0,void 0,void 0,(function(){var a,o,s,i,u,c,l,f,m,g,b,x,N,w,T,S,_,E,I,O,A,D,M,C,F,R,z,L,V,P,B,K,j,q,U,W,G,H,Z,Q,X,Y,J,$,ee,te,ne,re,ae,oe,se,ie,ue,ce,pe,le,de;return p(this,(function(he){switch(he.label){case 0switch(e.op){caseIfcaseStatelessIfreturn[3,1];caseWhilecaseStatelessWhilereturn[3,3];caseLoopCondreturn[3,9];caseSwitchreturn[3,10];caseMergereturn[3,12];caseEnterreturn[3,13];caseExitreturn[3,14];caseNextIterationreturn[3,15];caseTensorArrayV3return[3,16];caseTensorArrayWriteV3return[3,17];caseTensorArrayReadV3return[3,18];caseTensorArrayGatherV3return[3,19];caseTensorArrayScatterV3return[3,20];caseTensorArrayConcatV3return[3,21];caseTensorArraySplitV3return[3,22];caseTensorArraySizeV3return[3,23];caseTensorArrayCloseV3return[3,24];caseTensorListSetItemreturn[3,25];caseTensorListGetItemreturn[3,26];caseTensorListScatterV2caseTensorListScatterreturn[3,27];caseTensorListReservecaseEmptyTensorListreturn[3,28];caseTensorListGatherreturn[3,29];caseTensorListStackreturn[3,30];caseTensorListFromTensorreturn[3,31];caseTensorListConcatcaseTensorListConcatV2return[3,32];caseTensorListPushBackreturn[3,33];caseTensorListPopBackreturn[3,34];caseTensorListSplitreturn[3,35];caseTensorListLengthreturn[3,36];caseTensorListResizereturn[3,37]}return[3,38];case 1return a=y(thenBranch,e,n,r),o=y(elseBranch,e,n,r),s=y(cond,e,n,r),c=y(args,e,n,r),[4,s.data()];case 2return(m=he.sent())[0][2,r.functionMap[a].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap)][2,r.functionMap[o].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap)];case 3return i=y(body,e,n,r),u=y(cond,e,n,r),c=y(args,e,n,r),[4,r.functionMap[u].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap)];case 4return l=he.sent(),f=c.map((function(e){return e.id})),[4,l[0].data()];case 5m=he.sent(),l.forEach((function(e){e.kept-1!==f.indexOf(e.id)e.dispose()})),g=c,b=function(){var e,t,n;return p(this,(function(a){switch(a.label){case 0return e=g,[4,r.functionMap[i].executeFunctionAsync(g,r.tensorArrayMap,r.tensorListMap)];case 1return g=a.sent(),t=g.map((function(e){return e.id})),e.forEach((function(e){e.kept-1!==f.indexOf(e.id)-1!==t.indexOf(e.id)e.dispose()})),[4,r.functionMap[u].executeFunctionAsync(g,r.tensorArrayMap,r.tensorListMap)];case 2return[4,(n=a.sent())[0].data()];case 3return m=a.sent(),n.forEach((function(e){e.kept-1!==f.indexOf(e.id)-1!==t.indexOf(e.id)e.dispose()})),[2]}}))},he.label=6;case 6return m[0][5,b()][3,8];case 7return he.sent(),[3,6];case 8return[2,g];case 9return[2,[k(x=y(pred,e,n,r))]];case 10return x=y(pred,e,n,r),(T=y(data,e,n,r)).kept(T=k(T)),[4,x.data()];case 11return[2,he.sent()[0][void 0,T][T,void 0]];case 12return N=e.inputNames.find((function(e){return void 0!==v(e,n,r)})),N[2,[k(T=v(N,n,r))]][2,void 0];case 13return w=y(frameName,e,n,r),T=y(tensor,e,n,r),r.enterFrame(w),[2,[k(T)]];case 14return T=y(tensor,e,n,r),r.exitFrame(),[2,[k(T)]];case 15return T=y(tensor,e,n,r),r.nextIteration(),[2,[k(T)]];case 16return pe=y(size,e,n,r),S=y(dtype,e,n,r),se=y(elementShape,e,n,r),_=y(dynamicSize,e,n,r),E=y(clearAfterRead,e,n,r),I=y(identicalElementShapes,e,n,r),O=y(name,e,n,r),A=new Wi(O,S,pe,se,I,_,E),r.addTensorArray(A),[2,[A.idTensor,t.scalar(1)]];case 17return D=y(tensorArrayId,e,n,r),U=y(index,e,n,r),re=y(tensor,e,n,r),(M=r.getTensorArray(D.id)).write(U,re),[2,[M.idTensor]];case 18return C=y(tensorArrayId,e,n,r),W=y(index,e,n,r),[2,[r.getTensorArray(C.id).read(W)]];case 19return X=y(tensorArrayId,e,n,r),Y=y(indices,e,n,r),F=y(dtype,e,n,r),[2,[r.getTensorArray(X.id).gather(Y,F)]];case 20return R=y(tensorArrayId,e,n,r),G=y(indices,e,n,r),H=y(tensor,e,n,r),(z=r.getTensorArray(R.id)).scatter(G,H),[2,[z.idTensor]];case 21return te=y(tensorArrayId,e,n,r),L=r.getTensorArray(te.id),ne=y(dtype,e,n,r),[2,[L.concat(ne)]];case 22return V=y(tensorArrayId,e,n,r),oe=y(tensor,e,n,r),ie=y(lengths,e,n,r),(P=r.getTensorArray(V.id)).split(ie,oe),[2,[P.idTensor]];case 23return B=y(tensorArrayId,e,n,r),K=r.getTensorArray(B.id),[2,[t.scalar(K.size(),int32)]];case 24return j=y(tensorArrayId,e,n,r),(q=r.getTensorArray(j.id)).clearAndClose(),[2,[q.idTensor]];case 25return ce=y(tensorListId,e,n,r),U=y(index,e,n,r),re=y(tensor,e,n,r),(ue=r.getTensorList(ce.id)).setItem(U,re),[2,[ue.idTensor]];case 26return ce=y(tensorListId,e,n,r),W=y(index,e,n,r),se=y(elementShape,e,n,r),ae=y(elementDType,e,n,r),[2,[(ue=r.getTensorList(ce.id)).getItem(W,se,ae)]];case 27return G=y(indices,e,n,r),H=y(tensor,e,n,r),se=y(elementShape,e,n,r),J=y(numElements,e,n,r),ue=function(e,n,r,a){if(n.length!==e.shape[0])throw new Error(Expected len(indices) == tensor.shape[0], but saw .concat(n.length, vs. ).concat(e.shape[0]));var o=Math.max.apply(Math,h([],d(n),!1));if(null!=a&&-1!==a&&o=a)throw new Error(Max index must be  array size (.concat(o,  vs. ).concat(a,)));var s=new Gi([],r,e.dtype,a),i=t.unstack(e,0);return n.forEach((function(e,t){s.setItem(e,i[t])})),s}(H,G,se,J),r.addTensorList(ue),[2,[ue.idTensor]];case 28return se=y(elementShape,e,n,r),ee=y(elementDType,e,n,r),Z=void 0,Z=TensorListReserve===e.opnumElementsmaxNumElements,J=y(Z,e,n,r),Q=TensorListReserve===e.op-1J,ue=function(e,t,n,r){return new Gi([],e,t,r)}(se,ee,0,Q),r.addTensorList(ue),[2,[ue.idTensor]];case 29return X=y(tensorListId,e,n,r),Y=y(indices,e,n,r),se=y(elementShape,e,n,r),ee=y(elementDType,e,n,r),[2,[(ue=r.getTensorList(X.id)).gather(Y,ee,se)]];case 30return ce=y(tensorListId,e,n,r),se=y(elementShape,e,n,r),ee=y(elementDType,e,n,r),J=y(numElements,e,n,r),[2,[(ue=r.getTensorList(ce.id)).stack(se,ee,J)]];case 31return $=y(tensor,e,n,r),se=y(elementShape,e,n,r),ee=y(elementDType,e,n,r),ue=function(e,n,r){var a=e.dtype;if(e.shape.length1)throw new Error(Tensor must be at least a vector, but saw shape .concat(e.shape));if(e.dtype!==r)throw new Error(Invalid data types; op elements .concat(e.dtype,, but list elements ).concat(r));Ki(e.shape.slice(1),n,TensorList shape mismatch );var o=t.unstack(e);return new Gi(o,n,a)}($,se,ee),r.addTensorList(ue),[2,[ue.idTensor]];case 32return te=y(tensorListId,e,n,r),ue=r.getTensorList(te.id),ne=y(dtype,e,n,r),se=y(elementShape,e,n,r),[2,[ue.concat(ne,se)]];case 33return ce=y(tensorListId,e,n,r),re=y(tensor,e,n,r),(ue=r.getTensorList(ce.id)).pushBack(re),[2,[ue.idTensor]];case 34return ce=y(tensorListId,e,n,r),se=y(elementShape,e,n,r),ae=y(elementDType,e,n,r),[2,[(ue=r.getTensorList(ce.id)).popBack(se,ae)]];case 35return oe=y(tensor,e,n,r),se=y(elementShape,e,n,r),ie=y(lengths,e,n,r),ue=function(e,n,r){var a=0,o=n.map((function(e){return a+=e}));if(a!==e.shape[0])throw new Error(Expected sum of lengths to be equal ton          tensor.shape[0], but sum of lengths isn        .concat(a,, and tensor's shape is ).concat(e.shape));for(var s=Ui(e.shape.slice(1),r),i=0===a0e.sizea,u=t.tidy((function(){var r=[];e=t.reshape(e,[1,a,i]);for(var u=0;un.length;++u){var c=[0,0===u0o[u-1],0],p=[1,n[u],i];r[u]=t.reshape(t.slice(e,c,p),s)}return e.dispose(),r})),c=new Gi([],r,e.dtype,n.length),p=0;pu.length;p++)c.setItem(p,u[p]);return c}(oe,ie,se),r.addTensorList(ue),[2,[ue.idTensor]];case 36return ce=y(tensorListId,e,n,r),ue=r.getTensorList(ce.id),[2,[t.scalar(ue.size(),int32)]];case 37return ce=y(tensorListId,e,n,r),pe=y(size,e,n,r),le=r.getTensorList(ce.id),de=le.resize(pe),r.addTensorList(de),[2,[de.idTensor]];case 38throw TypeError(Node type .concat(e.op, is not implemented))}}))}))};function Zi(e,t,n){var r=d(y(fusedOps,e,t,n),2),a=r[0],o=r[1],s=biasadd===a,i=!s,u=prelu===o,c=fusedbatchnorm===a,p=y(numArgs,e,t,n);if(s){if(u&&2!==p)throw new Error(FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments bias and alpha.);if(!u&&s&&1!==p)throw new Error(FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument bias.)}if(c)throw new Error(FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported);var l=y(strides,e,t,n),h=w(e,t,n),f=y(dataFormat,e,t,n).toUpperCase(),m=y(dilations,e,t,n),v=d(y(args,e,t,n),2),g=v[0],b=v[1];return i&&(b=g,g=void 0),{stridel,padh,dataFormatf,dilationsm,biasArgg,preluArgb,activationFunco,leakyreluAlphay(leakyreluAlpha,e,t,n)}}function Qi(e,t,n){return{boxesy(boxes,e,t,n),scoresy(scores,e,t,n),maxOutputSizey(maxOutputSize,e,t,n),iouThresholdy(iouThreshold,e,t,n),scoreThresholdy(scoreThreshold,e,t,n),softNmsSigmay(softNmsSigma,e,t,n)}}var Xi=function(){function e(e,n){this.keyDType=e,this.valueDType=n,this.handle=t.scalar(0),this.tensorMap=new Map,t.keep(this.handle)}return Object.defineProperty(e.prototype,id,{getfunction(){return this.handle.id},enumerable!1,configurable!0}),e.prototype.clearAndClose=function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()},e.prototype.size=function(){return this.tensorMap.size},e.prototype.tensorSize=function(){return Gr(this.size(),int32)},e.prototype.import=function(e,n){return c(this,void 0,void 0,(function(){var r,a=this;return p(this,(function(o){switch(o.label){case 0return this.checkKeyAndValueTensor(e,n),[4,e.data()];case 1return r=o.sent(),this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),[2,t.tidy((function(){var e=t.unstack(n),o=r.length,s=e.length;t.util.assert(o===s,(function(){returnThe number of elements doesn't match, keys has +.concat(o, elements, the values has ).concat(s, )+elements.}));for(var i=0;io;i++){var u=r[i],c=e[i];t.keep(c),a.tensorMap.set(u,c)}return a.handle}))]}}))}))},e.prototype.find=function(e,n){return c(this,void 0,void 0,(function(){var r,a=this;return p(this,(function(o){switch(o.label){case 0return this.checkKeyAndValueTensor(e,n),[4,e.data()];case 1return r=o.sent(),[2,t.tidy((function(){for(var e=[],o=0;or.length;o++){var s=r[o],i=a.findWithDefault(s,n);e.push(i)}return t.stack(e)}))]}}))}))},e.prototype.findWithDefault=function(e,t){var n=this.tensorMap.get(e);return null!=nnt},e.prototype.checkKeyAndValueTensor=function(e,t){if(e.dtype!==this.keyDType)throw new Error(Expect key dtype .concat(this.keyDType,, but got )+.concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error(Expect value dtype .concat(this.valueDType,, but got )+.concat(t.dtype))},e}();function Yi(e,n,r,o,s){void 0===s&&(s=a.tidy);var i=function(e,n,r){switch(e.category){casearithmeticreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseBiasAddcaseAddV2caseAddreturn[r.add(y(a,e,t,n),y(b,e,t,n))];caseAddNreturn[r.addN(y(tensors,e,t,n))];caseFloorModcaseModreturn[r.mod(y(a,e,t,n),y(b,e,t,n))];caseMulreturn[r.mul(y(a,e,t,n),y(b,e,t,n))];caseRealDivcaseDivreturn[r.div(y(a,e,t,n),y(b,e,t,n))];caseDivNoNanreturn[r.divNoNan(y(a,e,t,n),y(b,e,t,n))];caseFloorDivreturn[r.floorDiv(y(a,e,t,n),y(b,e,t,n))];caseSubreturn[r.sub(y(a,e,t,n),y(b,e,t,n))];caseMinimumreturn[r.minimum(y(a,e,t,n),y(b,e,t,n))];caseMaximumreturn[r.maximum(y(a,e,t,n),y(b,e,t,n))];casePowreturn[r.pow(y(a,e,t,n),y(b,e,t,n))];caseSquaredDifferencereturn[r.squaredDifference(y(a,e,t,n),y(b,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casebasic_mathreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseAbscaseComplexAbsreturn[r.abs(y(x,e,t,n))];caseAcosreturn[r.acos(y(x,e,t,n))];caseAcoshreturn[r.acosh(y(x,e,t,n))];caseAsinreturn[r.asin(y(x,e,t,n))];caseAsinhreturn[r.asinh(y(x,e,t,n))];caseAtanreturn[r.atan(y(x,e,t,n))];caseAtan2return[r.atan2(y(x,e,t,n),y(y,e,t,n))];caseAtanhreturn[r.atanh(y(x,e,t,n))];caseCeilreturn[r.ceil(y(x,e,t,n))];caseComplexreturn[r.complex(y(real,e,t,n),y(imag,e,t,n))];caseCosreturn[r.cos(y(x,e,t,n))];caseCoshreturn[r.cosh(y(x,e,t,n))];caseElureturn[r.elu(y(x,e,t,n))];caseErfreturn[r.erf(y(x,e,t,n))];caseExpreturn[r.exp(y(x,e,t,n))];caseExpm1return[r.expm1(y(x,e,t,n))];caseFloorreturn[r.floor(y(x,e,t,n))];caseLogreturn[r.log(y(x,e,t,n))];caseLog1preturn[r.log1p(y(x,e,t,n))];caseImagreturn[r.imag(y(x,e,t,n))];caseNegreturn[r.neg(y(x,e,t,n))];caseReciprocalreturn[r.reciprocal(y(x,e,t,n))];caseRealreturn[r.real(y(x,e,t,n))];caseRelureturn[r.relu(y(x,e,t,n))];caseRoundreturn[r.round(y(x,e,t,n))];caseSelureturn[r.selu(y(x,e,t,n))];caseSigmoidreturn[r.sigmoid(y(x,e,t,n))];caseSinreturn[r.sin(y(x,e,t,n))];caseSignreturn[r.sign(y(x,e,t,n))];caseSinhreturn[r.sinh(y(x,e,t,n))];caseSoftplusreturn[r.softplus(y(x,e,t,n))];caseSqrtreturn[r.sqrt(y(x,e,t,n))];caseSquarereturn[r.square(y(x,e,t,n))];caseTanhreturn[r.tanh(y(x,e,t,n))];caseTanreturn[r.tan(y(x,e,t,n))];caseClipByValuereturn[r.clipByValue(y(x,e,t,n),y(clipValueMin,e,t,n),y(clipValueMax,e,t,n))];caseRelu6return[r.relu6(y(x,e,t,n))];caseRsqrtreturn[r.rsqrt(v(e.inputNames[0],t,n))];caseLeakyRelureturn[r.leakyRelu(y(x,e,t,n),y(alpha,e,t,n))];casePrelureturn[r.prelu(y(x,e,t,n),y(alpha,e,t,n))];caseIsNanreturn[r.isNaN(v(e.inputNames[0],t,n))];caseIsInfreturn[r.isInf(v(e.inputNames[0],t,n))];caseIsFinitereturn[r.isFinite(v(e.inputNames[0],t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casecontrolreturn Hi(e,n,r);caseconvolutionreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseConv1Dvar a=y(stride,e,t,n),o=y(pad,e,t,n),s=y(dataFormat,e,t,n).toUpperCase(),i=y(dilation,e,t,n);return[r.conv1d(y(x,e,t,n),y(filter,e,t,n),a,o,s,i)];caseConv2Da=y(strides,e,t,n),o=w(e,t,n),s=y(dataFormat,e,t,n).toUpperCase();var u=y(dilations,e,t,n);return[r.conv2d(y(x,e,t,n),y(filter,e,t,n),[a[1],a[2]],o,s,[u[1],u[2]])];case_FusedConv2Dvar c=Zi(e,t,n),p=(a=c.stride,o=c.pad,s=c.dataFormat,u=c.dilations,c.biasArg),l=c.preluArg,d=c.activationFunc,h=c.leakyreluAlpha;return[r.fused.conv2d({xy(x,e,t,n),filtery(filter,e,t,n),strides[a[1],a[2]],pado,dataFormats,dilations[u[1],u[2]],biasp,activationd,preluActivationWeightsl,leakyreluAlphah})];caseFusedDepthwiseConv2dNativevar f=Zi(e,t,n);return a=f.stride,o=f.pad,s=f.dataFormat,u=f.dilations,p=f.biasArg,l=f.preluArg,d=f.activationFunc,h=f.leakyreluAlpha,[r.fused.depthwiseConv2d({xy(x,e,t,n),filtery(filter,e,t,n),strides[a[1],a[2]],pado,dataFormats,dilations[u[1],u[2]],biasp,activationd,preluActivationWeightsl,leakyreluAlphah})];caseConv2DBackpropInputcaseConv2dTransposevar m=y(outputShape,e,t,n);return a=y(strides,e,t,n),o=w(e,t,n),[r.conv2dTranspose(y(x,e,t,n),y(filter,e,t,n),m,[a[1],a[2]],o)];caseDepthwiseConv2dNativecaseDepthwiseConv2dreturn a=y(strides,e,t,n),o=w(e,t,n),u=y(dilations,e,t,n),s=y(dataFormat,e,t,n).toUpperCase(),[r.depthwiseConv2d(y(input,e,t,n),y(filter,e,t,n),[a[1],a[2]],o,s,[u[1],u[2]])];caseConv3Dreturn a=y(strides,e,t,n),o=y(pad,e,t,n),s=y(dataFormat,e,t,n).toUpperCase(),u=y(dilations,e,t,n),[r.conv3d(y(x,e,t,n),y(filter,e,t,n),[a[1],a[2],a[3]],o,s,[u[1],u[2],u[3]])];caseAvgPoola=y(strides,e,t,n),o=y(pad,e,t,n);var v=y(kernelSize,e,t,n);return[r.avgPool(y(x,e,t,n),[v[1],v[2]],[a[1],a[2]],o)];caseMaxPoolreturn a=y(strides,e,t,n),o=y(pad,e,t,n),v=y(kernelSize,e,t,n),[r.maxPool(y(x,e,t,n),[v[1],v[2]],[a[1],a[2]],o)];caseMaxPoolWithArgmaxa=y(strides,e,t,n),o=y(pad,e,t,n),v=y(kernelSize,e,t,n);var g=y(includeBatchInIndex,e,t,n),b=r.maxPoolWithArgmax(y(x,e,t,n),[v[1],v[2]],[a[1],a[2]],o,g);return[b.result,b.indexes];caseAvgPool3Dreturn a=y(strides,e,t,n),o=y(pad,e,t,n),v=y(kernelSize,e,t,n),[r.avgPool3d(y(x,e,t,n),[v[1],v[2],v[3]],[a[1],a[2],a[3]],o)];caseMaxPool3Dreturn a=y(strides,e,t,n),o=y(pad,e,t,n),v=y(kernelSize,e,t,n),[r.maxPool3d(y(x,e,t,n),[v[1],v[2],v[3]],[a[1],a[2],a[3]],o)];caseDilation2Dvar x=y(strides,e,t,n),N=(o=y(pad,e,t,n),u=y(dilations,e,t,n),x[1]),k=x[2],T=u[1],S=u[2];return[r.dilation2d(y(x,e,t,n),y(filter,e,t,n),[N,k],o,[T,S],NHWC)];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casecreationreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseFillvar a=y(shape,e,t,n),o=y(dtype,e,t,n),s=y(value,e,t,n);return[r.fill(a,s,o)];caseLinSpacevar i=y(start,e,t,n),u=y(stop,e,t,n),c=y(num,e,t,n);return[r.linspace(i,u,c)];caseMultinomialvar p=y(logits,e,t,n),l=y(numSamples,e,t,n),d=y(seed,e,t,n);return[r.multinomial(p,l,d)];caseOneHotvar h=y(indices,e,t,n),f=y(depth,e,t,n),m=y(onValue,e,t,n),v=y(offValue,e,t,n);return o=y(dtype,e,t,n),[r.oneHot(h,f,m,v,o)];caseOnesreturn[r.ones(y(shape,e,t,n),y(dtype,e,t,n))];caseOnesLikereturn[r.onesLike(y(x,e,t,n))];caseRandomStandardNormalreturn[r.randomStandardNormal(y(shape,e,t,n),y(dtype,e,t,n),y(seed,e,t,n))];caseRandomUniformreturn[r.randomUniform(y(shape,e,t,n),y(minval,e,t,n),y(maxval,e,t,n),y(dtype,e,t,n))];caseRandomUniformIntreturn[r.randomUniformInt(y(shape,e,t,n),y(minval,e,t,n),y(maxval,e,t,n),y(seed,e,t,n))];caseRangei=y(start,e,t,n),u=y(stop,e,t,n);var g=y(step,e,t,n);return[r.range(i,u,g,y(dtype,e,t,n))];caseTruncatedNormala=y(shape,e,t,n);var b=y(mean,e,t,n),x=y(stdDev,e,t,n);return d=y(seed,e,t,n),[r.truncatedNormal(a,b,x,y(dtype,e,t,n),d)];caseZerosreturn[r.zeros(y(shape,e,t,n),y(dtype,e,t,n))];caseZerosLikereturn[r.zerosLike(y(x,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casedynamicreturn function(e,t,n,r,a){return void 0===a&&(a=Bi),c(void 0,void 0,void 0,(function(){var r,o,s,i,u,c,l,d,h,f,m,v;return p(this,(function(p){switch(p.label){case 0switch(e.op){caseNonMaxSuppressionV5return[3,1];caseNonMaxSuppressionV4return[3,3];caseNonMaxSuppressionV3caseNonMaxSuppressionV2return[3,5];caseWherereturn[3,7];caseListDiffreturn[3,9]}return[3,10];case 1return r=Qi(e,t,n),c=r.boxes,l=r.scores,d=r.maxOutputSize,h=r.iouThreshold,f=r.scoreThreshold,o=r.softNmsSigma,[4,a.image.nonMaxSuppressionWithScoreAsync(c,l,d,h,f,o)];case 2return[2,[(v=p.sent()).selectedIndices,v.selectedScores]];case 3return s=Qi(e,t,n),c=s.boxes,l=s.scores,d=s.maxOutputSize,h=s.iouThreshold,f=s.scoreThreshold,i=y(padToMaxOutputSize,e,t,n),[4,a.image.nonMaxSuppressionPaddedAsync(c,l,d,h,f,i)];case 4return[2,[(v=p.sent()).selectedIndices,v.validOutputs]];case 5return u=Qi(e,t,n),c=u.boxes,l=u.scores,d=u.maxOutputSize,h=u.iouThreshold,f=u.scoreThreshold,[4,a.image.nonMaxSuppressionAsync(c,l,d,h,f)];case 6return[2,[p.sent()]];case 7return m=a.cast(y(condition,e,t,n),bool),[4,a.whereAsync(m)];case 8return v=[p.sent()],m.dispose(),[2,v];case 9return[2,a.setdiff1dAsync(y(x,e,t,n),y(y,e,t,n))];case 10throw TypeError(Node type .concat(e.op, is not implemented))}}))}))}(e,n,r);caseevaluationreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseLowerBoundvar a=y(sortedSequence,e,t,n),o=y(values,e,t,n);return[r.lowerBound(a,o)];caseTopKV2var s=y(x,e,t,n),i=y(k,e,t,n),u=y(sorted,e,t,n);return[(c=r.topk(s,i,u)).values,c.indices];caseUpperBoundreturn a=y(sortedSequence,e,t,n),o=y(values,e,t,n),[r.upperBound(a,o)];caseUniquereturn s=y(x,e,t,n),[(c=r.unique(s)).values,c.indices];caseUniqueV2s=y(x,e,t,n);var c,p=y(axis,e,t,n);return[(c=r.unique(s,p)).values,c.indices];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));caseimagereturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseResizeBilinearvar a=y(images,e,t,n),o=y(size,e,t,n),s=y(alignCorners,e,t,n),i=y(halfPixelCenters,e,t,n);return[r.image.resizeBilinear(a,[o[0],o[1]],s,i)];caseResizeNearestNeighborreturn a=y(images,e,t,n),o=y(size,e,t,n),s=y(alignCorners,e,t,n),i=y(halfPixelCenters,e,t,n),[r.image.resizeNearestNeighbor(a,[o[0],o[1]],s,i)];caseCropAndResizevar u=y(image,e,t,n),c=y(boxes,e,t,n),p=y(boxInd,e,t,n),l=y(cropSize,e,t,n),d=y(method,e,t,n),h=y(extrapolationValue,e,t,n);return[r.image.cropAndResize(u,c,p,l,d,h)];caseImageProjectiveTransformV3a=y(images,e,t,n);var f=y(transforms,e,t,n),m=y(outputShape,e,t,n),v=y(fillValue,e,t,n),g=y(interpolation,e,t,n),b=y(fillMode,e,t,n);return[r.image.transform(a,f,g.toLowerCase(),b.toLowerCase(),v,m)];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casegraphreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseConstreturn t[e.name];casePlaceholderWithDefaultvar a=y(default,e,t,n);return[v(e.name,t,n)a];casePlaceholderreturn[v(e.name,t,n)];caseIdentitycaseStopGradientcaseFakeQuantWithMinMaxVarscaseSnapshotreturn[k(y(x,e,t,n))];caseIdentityNreturn y(x,e,t,n).map((function(e){return k(e)}));caseShapereturn[r.tensor1d(y(x,e,t,n).shape,int32)];caseShapeNreturn y(x,e,t,n).map((function(e){return r.tensor1d(e.shape)}));caseSizereturn[r.scalar(y(x,e,t,n).size,int32)];caseRankreturn[r.scalar(y(x,e,t,n).rank,int32)];caseNoOpreturn[r.scalar(1)];casePrintvar o=y(x,e,t,n),s=y(data,e,t,n),i=y(message,e,t,n),u=y(summarize,e,t,n);console.warn(The graph has a tf.print() operation,usually used for debugging, which slows down performance.),console.log(i);for(var c=0;cs.length;c++)console.log(Array.prototype.slice.call(s[c].dataSync()).slice(0,u));return[o];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));caselogicalreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseEqualreturn[r.equal(y(a,e,t,n),y(b,e,t,n))];caseNotEqualreturn[r.notEqual(y(a,e,t,n),y(b,e,t,n))];caseGreaterreturn[r.greater(y(a,e,t,n),y(b,e,t,n))];caseGreaterEqualreturn[r.greaterEqual(y(a,e,t,n),y(b,e,t,n))];caseLessreturn[r.less(y(a,e,t,n),y(b,e,t,n))];caseLessEqualreturn[r.lessEqual(y(a,e,t,n),y(b,e,t,n))];caseLogicalAndreturn[r.logicalAnd(y(a,e,t,n),y(b,e,t,n))];caseLogicalNotreturn[r.logicalNot(y(a,e,t,n))];caseLogicalOrreturn[r.logicalOr(y(a,e,t,n),y(b,e,t,n))];caseSelectcaseSelectV2return[r.where(y(condition,e,t,n),y(a,e,t,n),y(b,e,t,n))];caseBitwiseAndreturn[r.bitwiseAnd(y(a,e,t,n),y(b,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casematricesreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseBatchMatMulcaseBatchMatMulV2caseMatMulreturn[r.matMul(y(a,e,t,n),y(b,e,t,n),y(transposeA,e,t,n),y(transposeB,e,t,n))];caseEinsumreturn[r.einsum.apply(r,h([y(equation,e,t,n)],d(y(tensors,e,t,n)),!1))];caseTransposereturn[r.transpose(y(x,e,t,n),y(perm,e,t,n))];case_FusedMatMulvar a=d(y(fusedOps,e,t,n),2),o=a[0],s=a[1],i=biasadd===o,u=prelu===s,c=y(numArgs,e,t,n),p=y(leakyreluAlpha,e,t,n);if(i){if(u&&2!==c)throw new Error(Fused MatMul with BiasAdd and Prelu must have two extra arguments bias and alpha.);if(!u&&1!==c)throw new Error(Fused MatMul with BiasAdd must have one extra argument bias.)}var l=d(y(args,e,t,n),2),f=l[0],m=l[1];return[r.fused.matMul({ay(a,e,t,n),by(b,e,t,n),transposeAy(transposeA,e,t,n),transposeBy(transposeB,e,t,n),biasf,activations,preluActivationWeightsm,leakyreluAlphap})];caseMatrixBandPartreturn[r.linalg.bandPart(y(a,e,t,n),y(numLower,e,t,n),y(numUpper,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casenormalizationreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseEuclideanNormreturn[r.euclideanNorm(y(x,e,t,n),y(axis,e,t,n),y(keepDims,e,t,n))];caseFusedBatchNormcaseFusedBatchNormV2caseFusedBatchNormV3return[r.batchNorm(y(x,e,t,n),y(mean,e,t,n),y(variance,e,t,n),y(offset,e,t,n),y(scale,e,t,n),y(epsilon,e,t,n))];caseLRNreturn[r.localResponseNormalization(y(x,e,t,n),y(radius,e,t,n),y(bias,e,t,n),y(alpha,e,t,n),y(beta,e,t,n))];caseSoftmaxreturn[r.softmax(y(x,e,t,n))];caseLogSoftmaxreturn[r.logSoftmax(y(x,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));caseraggedreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseRaggedGathervar a=r.raggedGather(y(paramsNestedSplits,e,t,n),y(paramsDenseValues,e,t,n),y(indices,e,t,n),y(outputRaggedRank,e,t,n)),o=a.outputNestedSplits,s=a.outputDenseValues;return o.concat(s);caseRaggedRangevar i=r.raggedRange(y(starts,e,t,n),y(limits,e,t,n),y(splits,e,t,n));return[i.rtNestedSplits,i.rtDenseValues];caseRaggedTensorToTensorreturn[r.raggedTensorToTensor(y(shape,e,t,n),y(values,e,t,n),y(defaultValue,e,t,n),y(rowPartitionTensors,e,t,n),y(rowPartitionTypes,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casereductionreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseMaxvar a=y(axis,e,t,n),o=y(keepDims,e,t,n);return[r.max(y(x,e,t,n),a,o)];caseMeanreturn a=y(axis,e,t,n),o=y(keepDims,e,t,n),[r.mean(y(x,e,t,n),a,o)];caseMinreturn a=y(axis,e,t,n),o=y(keepDims,e,t,n),[r.min(y(x,e,t,n),a,o)];caseSumreturn a=y(axis,e,t,n),o=y(keepDims,e,t,n),[r.sum(y(x,e,t,n),a,o)];caseAllreturn a=y(axis,e,t,n),o=y(keepDims,e,t,n),[r.all(y(x,e,t,n),a,o)];caseAnyreturn a=y(axis,e,t,n),o=y(keepDims,e,t,n),[r.any(y(x,e,t,n),a,o)];caseArgMaxreturn a=y(axis,e,t,n),[r.argMax(y(x,e,t,n),a)];caseArgMinreturn a=y(axis,e,t,n),[r.argMin(y(x,e,t,n),a)];caseProdreturn a=y(axis,e,t,n),o=y(keepDims,e,t,n),[r.prod(y(x,e,t,n),a,o)];caseCumproda=y(axis,e,t,n);var s=y(exclusive,e,t,n),i=y(reverse,e,t,n);return[r.cumprod(y(x,e,t,n),a,s,i)];caseCumsumreturn a=y(axis,e,t,n),s=y(exclusive,e,t,n),i=y(reverse,e,t,n),[r.cumsum(y(x,e,t,n),a,s,i)];caseBincountvar u=y(x,e,t,n),c=y(weights,e,t,n),p=y(size,e,t,n);return[r.bincount(u,c,p)];caseDenseBincountvar l=y(x,e,t,n),d=y(weights,e,t,n),h=y(size,e,t,n),f=y(binaryOutput,e,t,n);return[r.denseBincount(l,d,h,f)];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));caseslice_joinreturn s((function(){return function(e,n,r,a){switch(void 0===a&&(a=Bi),e.op){caseConcatV2caseConcatvar o=y(n,e,n,r),s=y(axis,e,n,r),i=y(tensors,e,n,r);return i=i.slice(0,o),[a.concat(i,s)];caseGathervar u=y(x,e,n,r),c=y(indices,e,n,r);return[a.gather(u,a.cast(c,int32),0)];caseGatherV2s=y(axis,e,n,r);var p=y(batchDims,e,n,r);return u=y(x,e,n,r),c=y(indices,e,n,r),[a.gather(u,a.cast(c,int32),s,p)];caseReversefor(var l=y(dims,e,n,r),d=(s=[],0);dl.length;d++)l[d]&&s.push(d);return u=y(x,e,n,r),[a.reverse(u,s)];caseReverseV2return s=y(axis,e,n,r),u=y(x,e,n,r),[a.reverse(u,s)];caseSlicevar h=y(begin,e,n,r),f=y(size,e,n,r);return[a.slice(y(x,e,n,r),h,f)];caseStridedSliceh=y(begin,e,n,r);var m=y(end,e,n,r),v=y(strides,e,n,r),g=y(beginMask,e,n,r),b=y(endMask,e,n,r),x=y(ellipsisMask,e,n,r),N=y(newAxisMask,e,n,r),w=y(shrinkAxisMask,e,n,r),k=y(x,e,n,r);return[a.stridedSlice(k,h,m,v,g,b,x,N,w)];casePackreturn t.tidy((function(){var o=y(axis,e,n,r),s=y(tensors,e,n,r),i=s[0].shape,u=a.squeeze(s[0]).shape,c=s.map((function(e){var n=t.util.arraysEqual(e.shape,i);if(!n&&!t.util.arraysEqual(a.squeeze(e).shape,u))throw new Error(the input tensors shape does not match);return nea.reshape(e,i)}));return[a.stack(c,o)]}));caseUnpackreturn s=y(axis,e,n,r),k=y(tensor,e,n,r),a.unstack(k,s);caseTilevar T=y(reps,e,n,r);return[a.tile(y(x,e,n,r),T)];caseSplitcaseSplitVs=y(axis,e,n,r);var S=y(numOrSizeSplits,e,n,r);return k=y(x,e,n,r),a.split(k,S,s);caseScatterNdc=y(indices,e,n,r);var _=y(values,e,n,r),E=y(shape,e,n,r);return[a.scatterND(c,_,E)];caseGatherNdvar I=y(x,e,n,r);return c=y(indices,e,n,r),[a.gatherND(I,c)];caseSparseToDensec=y(sparseIndices,e,n,r),E=y(outputShape,e,n,r);var O=y(sparseValues,e,n,r),A=y(defaultValue,e,n,r);return[a.sparseToDense(c,O,E,O.dtype===A.dtypeAa.cast(A,O.dtype))];caseTensorScatterUpdatereturn c=y(indices,e,n,r),_=y(values,e,n,r),k=y(tensor,e,n,r),[a.tensorScatterUpdate(k,c,_)];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casesparsereturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseSparseFillEmptyRowsvar a=r.sparse.sparseFillEmptyRows(y(indices,e,t,n),y(values,e,t,n),y(denseShape,e,t,n),y(defaultValue,e,t,n));return[a.outputIndices,a.outputValues,a.emptyRowIndicator,a.reverseIndexMap];caseSparseReshapevar o=r.sparse.sparseReshape(y(inputIndices,e,t,n),y(inputShape,e,t,n),y(newShape,e,t,n));return[o.outputIndices,o.outputShape];caseSparseSegmentMeanreturn[r.sparse.sparseSegmentMean(y(data,e,t,n),y(indices,e,t,n),y(segmentIds,e,t,n))];caseSparseSegmentSumreturn[r.sparse.sparseSegmentSum(y(data,e,t,n),y(indices,e,t,n),y(segmentIds,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casespectralreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseFFTreturn[r.fft(y(x,e,t,n))];caseIFFTreturn[r.ifft(y(x,e,t,n))];caseRFFTreturn[r.rfft(y(x,e,t,n))];caseIRFFTreturn[r.irfft(y(x,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casestringreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseStaticRegexReplacereturn[r.string.staticRegexReplace(y(input,e,t,n),y(pattern,e,t,n),y(rewrite,e,t,n),y(replaceGlobal,e,t,n))];caseStringNGramsvar a=r.string.stringNGrams(y(data,e,t,n),y(dataSplits,e,t,n),y(separator,e,t,n),y(nGramWidths,e,t,n),y(leftPad,e,t,n),y(rightPad,e,t,n),y(padWidth,e,t,n),y(preserveShortSequences,e,t,n));return[a.nGrams,a.nGramsSplits];caseStringSplitvar o=r.string.stringSplit(y(input,e,t,n),y(delimiter,e,t,n),y(skipEmpty,e,t,n));return[o.indices,o.values,o.shape];caseStringToHashBucketFastreturn[r.string.stringToHashBucketFast(y(input,e,t,n),y(numBuckets,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casetransformationreturn s((function(){return function(e,t,n,r){switch(void 0===r&&(r=Bi),e.op){caseCastreturn[r.cast(y(x,e,t,n),y(dtype,e,t,n))];caseExpandDimsvar a=y(axis,e,t,n);return[r.expandDims(y(x,e,t,n),a)];caseSqueezereturn a=y(axis,e,t,n),[r.squeeze(y(x,e,t,n),a)];caseReshapereturn[r.reshape(y(x,e,t,n),y(shape,e,t,n))];caseEnsureShapereturn[r.ensureShape(y(x,e,t,n),y(shape,e,t,n))];caseMirrorPadreturn[r.mirrorPad(y(x,e,t,n),y(padding,e,t,n),y(mode,e,t,n))];casePadV2casePadreturn[r.pad(y(x,e,t,n),y(padding,e,t,n),y(constantValue,e,t,n))];caseSpaceToBatchNDvar o=y(blockShape,e,t,n),s=y(paddings,e,t,n);return[r.spaceToBatchND(y(x,e,t,n),o,s)];caseBatchToSpaceNDo=y(blockShape,e,t,n);var i=y(crops,e,t,n);return[r.batchToSpaceND(y(x,e,t,n),o,i)];caseDepthToSpacevar u=y(blockSize,e,t,n),c=y(dataFormat,e,t,n).toUpperCase();return[r.depthToSpace(y(x,e,t,n),u,c)];caseBroadcastToreturn[r.broadcastTo(y(x,e,t,n),y(shape,e,t,n))];caseBroadcastArgsreturn[r.broadcastArgs(y(s0,e,t,n),y(s1,e,t,n))];defaultthrow TypeError(Node type .concat(e.op, is not implemented))}}(e,n,r)}));casehash_tablereturn function(e,t,n,r){return c(void 0,void 0,void 0,(function(){var a,o,s,i,u,c,l,d;return p(this,(function(p){switch(p.label){case 0switch(e.op){caseHashTablecaseHashTableV2return[3,1];caseInitializeTablecaseInitializeTableV2caseLookupTableImportcaseLookupTableImportV2return[3,2];caseLookupTableFindcaseLookupTableFindV2return[3,4];caseLookupTableSizecaseLookupTableSizeV2return[3,6]}return[3,7];case 1return null!=(a=r.getHashTableHandleByName(e.name))[2,[a]](o=y(keyDType,e,t,n),s=y(valueDType,e,t,n),d=new Xi(o,s),r.addHashTable(e.name,d),[2,[d.handle]]);case 2return l=y(tableHandle,e,t,n,r),u=y(keys,e,t,n),i=y(values,e,t,n),[4,(d=r.getHashTableById(l.id)).import(u,i)];case 3case 5return[2,[p.sent()]];case 4return l=y(tableHandle,e,t,n,r),u=y(keys,e,t,n),c=y(defaultValue,e,t,n),[4,(d=r.getHashTableById(l.id)).find(u,c)];case 6return l=y(tableHandle,e,t,n,r),[2,[(d=r.getHashTableById(l.id)).tensorSize()]];case 7throw TypeError(Node type .concat(e.op, is not implemented))}}))}))}(e,n,r,o);casecustomvar a=m(e.op);if(a&&a.customExecutor)return a.customExecutor(new ae(e,n,r));throw TypeError(Custom op .concat(e.op, is not registered.));defaultthrow TypeError(Unknown op '.concat(e.op,'. File an issue at )+httpsgithub.comtensorflowtfjsissues so we can add it, or register a custom execution with tf.registerOp())}}(e,n,r);return a.util.isPromise(i)i.then((function(e){return[].concat(e)}))[].concat(i)}var Ji=function(){function e(e,t,n,r,a){void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r={}),this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id0,frameName,iterationId0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(e,t){return{ide,frameNamet,iterationId0}},Object.defineProperty(e.prototype,currentContext,{getfunction(){return this.contexts},setfunction(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,currentContextId,{getfunction(){return this._currentContextIds[0]},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,currentContextIds,{getfunction(){return this._currentContextIds},enumerable!1,configurable!0}),e.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;tthis.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(),this._currentContextIds=e},e.prototype.contextIdforContexts=function(e){return ee.map((function(e){return 0===e.id&&0===e.iterationId.concat(e.frameName,-).concat(e.iterationId)})).join()},e.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length1))throw new Error(Cannot exit frame, the context is empty);this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},e.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length0))throw new Error(Cannot increase frame iteration, the context is empty);this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},e.prototype.getWeight=function(e){return this.weightMap[e]},e.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},e.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},e.prototype.addTensorList=function(e){this.tensorListMap[e.id]=e},e.prototype.getTensorList=function(e){return this.tensorListMap[e]},e.prototype.dispose=function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)},e}();function $i(e,t,n,r){var a=new Set,o=[],s=null,i=null,u=new Set,c=new Set(Object.keys(e).map((function(e){return N(e)[0]})));r=r[];for(var p=new Set(r.map((function(e){return N(e.name)[0]}))),l=h([],d(t),!1);l.length0;){var f=l.pop();(ou(f)su(f)iu(f))&&null==s&&(i=(s=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(c.has(f.name)p.has(f.name)(0!==f.inputs.lengthf.inputs.forEach((function(e){u.has(e.name)(u.add(e.name),l.push(e))}))o.push(f.name)))}return{inputse,outputst,usedNodesa,missingInputso,dynamicNodes,syncInputsi}}function eu(e,t){var n,r,a,o,s,i,u=t.usedNodes,c=t.inputs,p=Object.keys(c).map((function(e){return N(e)[0]})).map((function(t){return e.nodes[t]})),f=e.initNodes[],m=function(e){return u.has(string==typeof eee.name)};function y(e){return h([],d(new Map(e.map((function(e){return[e.name,e]}))).values()),!1)}var v=y(h(h(h([],d(p),!1),d(e.weights),!1),d(f),!1)).filter(m),g=y(h(h([],d(v),!1),d(Object.values(e.nodes)),!1)).filter(m),b=new Map(g.map((function(e){return[e.name,e]}))),x={};try{for(var w=l(g),k=w.next();!k.done;k=w.next()){x[(O=k.value).name]=x[O.name]0;try{for(var T=(a=void 0,l(O.children)),S=T.next();!S.done;S=T.next()){m(M=S.value)(x[M.name]=Number.POSITIVE_INFINITY),x[M.name]=(x[M.name]0)+1}}catch(e){a={errore}}finally{try{S&&!S.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}}}catch(e){n={errore}}finally{try{k&&!k.done&&(r=w.return)&&r.call(w)}finally{if(n)throw n.error}}for(var _=Object.entries(x).filter((function(e){return 0===d(e,2)[1]})).map((function(e){return d(e,1)[0]})),E=h([],d(_),!1);_.length0;){var I=_.pop(),O=b.get(I);try{for(var A=(s=void 0,l(O.children.filter(m))),D=A.next();!D.done;D=A.next()){var M;0==--x[(M=D.value).name]&&(E.push(M.name),_.push(M.name))}}catch(e){s={errore}}finally{try{D&&!D.done&&(i=A.return)&&i.call(A)}finally{if(s)throw s.error}}}var C=function(e,t){var n,r,a=new Map(e.map((function(e){return[e.name,e]}))),o=t.map((function(e){return e.name})),s=new Set(o);for(;o.length0;){var i=o.pop(),u=a.get(i);try{for(var c=(n=void 0,l(u.children)),p=c.next();!p.done;p=c.next()){var d=p.value;a.has(d.name)&&!s.has(d.name)&&(s.add(d.name),o.push(d.name))}}catch(e){n={errore}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}var h=e.filter((function(e){return s.has(e.name)}));return h}(E.map((function(e){return b.get(e)})),v);return function(e,t){var n,r,a,o,s,i,u=new Map(e.map((function(e,t){return[e.name,t]}))),c=new Set(t.map((function(e){return e.name}))),p=function(e){return c.has(string==typeof eee.name)},d=new Set(e.map((function(e){return e.name}))),h=function(e){return d.has(string==typeof eee.name)};try{for(var f=l(e),m=f.next();!m.done;m=f.next()){var y=m.value;try{for(var v=(a=void 0,l(y.children.filter(h))),g=v.next();!g.done;g=v.next()){var b=g.value;if(!u.has(b.name))throw new tu(Child .concat(b.name, of node ).concat(y.name, is unreachable.));if(u.get(y.name)u.get(b.name))throw new tu(Node .concat(y.name, is scheduled to run after its child ).concat(b.name,.))}}catch(e){a={errore}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}if(!p(y))try{for(var x=(s=void 0,l(y.inputs)),N=x.next();!N.done;N=x.next()){var w=N.value;if(!u.has(w.name))throw new tu(Input .concat(w.name, of node ).concat(y.name, is unreachable.));if(u.get(w.name)u.get(y.name))throw new tu(Node .concat(y.name, is scheduled to run before its input ).concat(w.name,.))}}catch(e){s={errore}}finally{try{N&&!N.done&&(i=x.return)&&i.call(x)}finally{if(s)throw s.error}}}}catch(e){n={errore}}finally{try{m&&!m.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}(C,v),C}var tu=function(e){function t(t){return e.call(this,NodesExecutionOrderError .concat(t))this}return u(t,e),t}(Error);var nu=new Set([Switch,Merge,Enter,Exit,NextIteration,StatelessIf,StatelessWhile,if,While]),ru=new Set([NonMaxSuppressionV2,NonMaxSuppressionV3,NonMaxSuppressionV5,Where]),au=new Set([HashTable,HashTableV2,LookupTableImport,LookupTableImportV2,LookupTableFind,LookupTableFindV2,LookupTableSize,LookupTableSizeV2]);function ou(e){return nu.has(e.op)}function su(e){return ru.has(e.op)}function iu(e){return au.has(e.op)}var uu=function(){function e(t,n){var r=this;this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=,,this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return Object.defineProperty(e.prototype,weightIds,{getfunction(){return this.parentthis.parent.weightIdsthis._weightIds},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,functionExecutorMap,{getfunction(){return this.parentthis.parent.functionExecutorMapthis._functionExecutorMap},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,weightMap,{getfunction(){return this.parentthis.parent.weightMapthis._weightMap},setfunction(e){var t=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=[].concat.apply([],h([],d(t),!1)),this._weightMap=e},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,resourceManager,{setfunction(e){this._resourceManager=e},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,inputs,{getfunction(){return this._inputs.map((function(e){return{namee.name,shapee.attrParams.shapee.attrParams.shape.valuevoid 0,dtypee.attrParams.dtypee.attrParams.dtype.valuevoid 0}}))},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,outputs,{getfunction(){return this._outputs.map((function(e){return{namee.name,shapee.attrParams.shapee.attrParams.shape.valuevoid 0,dtypee.attrParams.dtypee.attrParams.dtype.valuevoid 0}}))},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,inputNodes,{getfunction(){return this._inputs.map((function(e){return e.signatureKeye.name}))},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,outputNodes,{getfunction(){return this._outputs.map((function(e){var t=e.signatureKeye.name;return e.defaultOutput.concat(t,).concat(e.defaultOutput)t}))},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,functions,{getfunction(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})},enumerable!1,configurable!0}),e.prototype.getCompilationKey=function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPARATOR)+--+r.join(this.SEPARATOR)},e.prototype.compile=function(e,t){var n=$i(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,o=n.syncInputs;if(null!=a)throw new Error(This execution contains the node '.concat(a.name,', which has )+the dynamic op '.concat(a.op,'. Please use )+model.executeAsync() instead. Alternatively, to avoid the +dynamic ops, specify the inputs [.concat(o,]));if(r.length0){var s=t.map((function(e){return e.name})),i=Object.keys(e);throw new Error(Cannot compute the outputs [.concat(s,] from the provided inputs )+[.concat(i,]. Missing the following inputs [).concat(r,]))}var u=eu(this.graph,n),c=function(e){for(var t=new Map(e.map((function(e,t){return[e.name,t]}))),n=Number.MAX_SAFE_INTEGER,r=e.map((function(e,t){return ou(e)nt})),a=function(e){var n=r[t.get(e.name)];return null==n-1n},o=e.map((function(e,t){return e.children.map(a).reduce((function(e,t){return Math.max(e,t)}),r[t])})),s=new Map,i=0;ie.length;++i){var u=o[i];if(u!==n){var c=e[i],p=e[u];s.has(p.name)s.set(p.name,[]),s.get(p.name).push(c)}}return s}(u);return{orderedNodesu,nodeLiveUntilMapc}},e.prototype.cloneAndKeepTensor=function(e){if(null==e)return null;var n=e.clone();return t.keep(n),n},e.prototype.cloneTensorList=function(e){var t=this;if(!e)return null;var n=e.map((function(e){return t.cloneAndKeepTensor(e)}));return n},e.prototype.cloneTensorMap=function(e){var t=this;return Object.fromEntries(Object.entries(e).map((function(e){var n=d(e,2),r=n[0],a=n[1];return[r,t.cloneTensorList(a)]})))},e.prototype.execute=function(e,n){var r=this;this.disposeIntermediateTensors(),e=this.mapInputs(e);var a=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);var o=a.map((function(e){return r.graph.nodes[N(e)[0]]})),s=n.map((function(e){return N(e)[0]})),i=new Set(s),u=s.map((function(e){return r.graph.nodes[e]}));0===u.length&&(u=this._outputs);var c=this.getCompilationKey(o,u),p=this.compiledMap.get(c);null==p&&(p=this.compile(e,u),this.compiledMap.set(c,p));try{this.keepIntermediateTensors=t.env().getBool(KEEP_INTERMEDIATE_TENSORS)}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}var h={},f={};return t.tidy((function(){var a,o,s=new Ji(r.weightMap,h,f,r.functionExecutorMap,r.parseNodeNameCache),u=Object.assign({},r.weightMap);r.keepIntermediateTensors&&(r.clonedTensorsMap=r.cloneTensorMap(r.weightMap)),Object.keys(e).forEach((function(t){var n=d(N(t,s),2),a=n[0],o=[];o[n[1]]=e[t],u[a]=o,r.keepIntermediateTensors&&(r.clonedTensorsMap[a]=r.cloneTensorList(o))}));var c=r.getFrozenTensorIds(u),m=p.orderedNodes,y=p.nodeLiveUntilMap;try{for(var g=l(m),b=g.next();!b.done;b=g.next()){var x=b.value;if(!u[x.name]){var w=Yi(x,u,s,r._resourceManager);if(t.util.isPromise(w))throw new Error(The execution of the op '.concat(x.op,' returned a promise. )+Please use model.executeAsync() instead.);u[x.name]=w,r.keepIntermediateTensors&&(r.clonedTensorsMap[x.name]=r.cloneTensorList(w)),r.checkTensorForDisposalWithNodeLiveUntilInfo(x,u,s,c,i,y.get(x.name))}}}catch(e){a={errore}}finally{try{b&&!b.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}return null==r.parent&&s.dispose(c),n.map((function(e){return v(e,u,s)}))}))},e.prototype.getFrozenTensorIds=function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)},e.prototype.checkTensorForDisposal=function(e,t,n,r,a,o,s){var i,u,c,p,d,h;if(!ou(t)&&!o.has(e)){try{for(var f=l(n[e]),m=f.next();!m.done;m=f.next()){null!=(k=m.value)&&(s[k.id]=(s[k.id]0)+t.children.length)}}catch(e){i={errore}}finally{try{m&&!m.done&&(u=f.return)&&u.call(f)}finally{if(i)throw i.error}}try{for(var y=l(t.inputs),v=y.next();!v.done;v=y.next()){var b=v.value;if(!ou(b)){var x=g(b.name,n,r);if(null!=x)try{for(var N=(d=void 0,l(x)),w=N.next();!w.done;w=N.next()){var k;if((k=w.value)&&!k.kept&&!a.has(k.id)){var T=s[k.id];1===T(k.dispose(),delete s[k.id])null!=T&&s[k.id]--}}}catch(e){d={errore}}finally{try{w&&!w.done&&(h=N.return)&&h.call(N)}finally{if(d)throw d.error}}}}}catch(e){c={errore}}finally{try{v&&!v.done&&(p=y.return)&&p.call(y)}finally{if(c)throw c.error}}}},e.prototype.checkTensorForDisposalWithNodeLiveUntilInfo=function(e,t,n,r,a,o){var s,i,u,c;function p(e){return ou(e)a.has(e.name)}if(!ou(e)&&null!=o)try{for(var d=l(o),h=d.next();!h.done;h=d.next()){var f=h.value;if(!p(f)){var m=g(f.name,t,n);try{for(var y=(u=void 0,l(m)),v=y.next();!v.done;v=y.next()){var b=v.value;!bb.keptr.has(b.id)b.dispose()}}catch(e){u={errore}}finally{try{v&&!v.done&&(c=y.return)&&c.call(y)}finally{if(u)throw u.error}}}}}catch(e){s={errore}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(s)throw s.error}}},e.prototype.executeAsync=function(e,t){return c(this,void 0,void 0,(function(){return p(this,(function(n){return[2,this._executeAsync(e,t)]}))}))},e.prototype.disposeIntermediateTensors=function(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((function(e){var t,n;try{for(var r=l(e),a=r.next();!a.done;a=r.next()){var o=a.value;o&&!o.isDisposed&&o.dispose()}}catch(e){t={errore}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),this.clonedTensorsMap=null)},e.prototype.getIntermediateTensors=function(){return this.clonedTensorsMap},e.prototype._executeAsync=function(e,n,r,a,o){return void 0===r&&(r=!1),void 0===a&&(a={}),void 0===o&&(o={}),c(this,void 0,void 0,(function(){var s,i,u,c,l,f;return p(this,(function(p){switch(p.label){case 0this.disposeIntermediateTensors(),r(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=t.env().getBool(KEEP_INTERMEDIATE_TENSORS)}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}return s=new Ji(this.weightMap,a,o,this.functionExecutorMap,this.parseNodeNameCache),this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),[4,this.executeWithControlFlow(e,s,n,r)];case 1return i=p.sent(),u=n.map((function(e){return v(e,i,s)})),c=u.map((function(e){return e.id})),l=Object.keys(e).map((function(t){return e[t].id})),f=new Set(h(h(h([],d(c),!1),d(l),!1),d(this.weightIds),!1)),Object.values(i).forEach((function(e){e.forEach((function(e){!ee.isDisposedf.has(e.id)e.dispose()}))})),null==this.parent&&s.dispose(f),[2,u]}}))}))},e.prototype.executeFunctionAsync=function(e,t,n){return c(this,void 0,void 0,(function(){var r,a=this;return p(this,(function(o){return r=e.reduce((function(e,t,n){return e[a.inputs[n].name]=t,e}),{}),[2,this._executeAsync(r,this.outputNodes,!0,t,n)]}))}))},e.prototype.executeWithControlFlow=function(e,t,n,r){return c(this,void 0,void 0,(function(){var a,o,s,i,u,c,l,f,m,y,g,b,x,w,k,T,S,_,E=this;return p(this,(function(p){switch(p.label){case 0a=Object.keys(e),o=a.map((function(e){return E.graph.nodes[N(e)[0]]})),s=n.map((function(e){return N(e)[0]})),i=new Set(s),0===(u=s.map((function(e){return E.graph.nodes[e]}))).length&&(u=this._outputs),c=$i(e,u,this.weightMap,this._initNodes),l=c.usedNodes,f=c.missingInputs,m=c.dynamicNode,y=c.syncInputs,g=h(h(h([],d(o),!1),d(this.graph.weights),!1),d(this._initNodes[]),!1).map((function(e){return{nodee,contextst.currentContext}})),b=Object.assign({},this.weightMap),Object.keys(e).forEach((function(t){var n=d(N(t),2),r=n[0],a=[];a[n[1]]=e[t],b[r]=a})),x={},w=this.getFrozenTensorIds(b),k={},p.label=1;case 1return g.length0(T=this.processStack(o,g,t,b,k,w,i,x,l),[4,Promise.all(T)])[3,3];case 2return p.sent(),[3,1];case 3if(null!=mrconsole.warn(This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.),(S=u.filter((function(e){return!ou(e)&&!v(e.name,b,t)})).map((function(e){return e.name}))).length0)throw _=,null!=m&&(_=Alternatively, to avoid the dynamic ops, use model.execute() +and specify the inputs [.concat(y,])),new Error(Cannot compute the outputs [.concat(S,] from the provided )+inputs [.concat(a,]. Consider providing the following inputs )+[.concat(f,]. ).concat(_));return[2,b]}}))}))},e.prototype.processStack=function(e,n,r,a,o,s,i,u,c){for(var p=this,l=[],h=function(){var e,h,m=n.pop();r.currentContext=m.contexts;var v=;if(Enter===m.node.op&&y(isConstant,m.node,a,r)&&(e=d(b(m.node.name,r),1),v=e[0]),null==a[m.node.name]){var g=Yi(m.node,a,r,f._resourceManager);v(h=d(b(m.node.name,r),1),v=h[0]);var x=r.currentContext;t.util.isPromise(g)l.push(g.then((function(e){return a[v]=e,p.keepIntermediateTensors&&(p.clonedTensorsMap[v]=p.cloneTensorList(e)),r.currentContext=x,p.checkTensorForDisposal(v,m.node,a,r,s,i,u),p.processChildNodes(m.node,n,r,a,o,c),e})))(a[v]=g,f.keepIntermediateTensors&&(f.clonedTensorsMap[v]=f.cloneTensorList(g)),f.checkTensorForDisposal(v,m.node,a,r,s,i,u),f.processChildNodes(m.node,n,r,a,o,c))}else f.processChildNodes(m.node,n,r,a,o,c)},f=this;n.length0;)h();return l},e.prototype.processChildNodes=function(e,t,n,r,a,o){e.children.forEach((function(e){var s=d(b(e.name,n),1)[0];!a[s]&&o.has(e.name)&&(Merge===e.ope.inputNames.some((function(e){return!!v(e,r,n)}))&&(a[s]=!0,t.push({contextsn.currentContext,nodee}))e.inputNames.every((function(e){return!!v(e,r,n)}))&&(a[s]=!0,t.push({contextsn.currentContext,nodee})))}))},e.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))},e.prototype.checkInputShapeAndType=function(e){var n=this;Object.keys(e).forEach((function(r){var a=e[r],o=d(N(r),1)[0],s=n.graph.nodes[o];if(s.attrParams.shape&&s.attrParams.shape.value){var i=s.attrParams.shape.value,u=i.length===a.shape.length&&a.shape.every((function(e,t){return-1===i[t]i[t]===e}));t.util.assert(u,(function(){returnThe shape of dict['.concat(s.name,'] provided in )+model.execute(dict) must be [.concat(i,], but was )+[.concat(a.shape,])}))}s.attrParams.dtype&&s.attrParams.dtype.value&&t.util.assert(a.dtype===s.attrParams.dtype.value,(function(){returnThe dtype of dict['.concat(s.name,'] provided in )+model.execute(dict) must be +.concat(s.attrParams.dtype.value,, but was ).concat(a.dtype)}))}))},e.prototype.mapInputs=function(e){var t,n,r={};for(var a in e){var o=null===(n=null===(t=this._signature)void 0===tvoid 0t.inputs)void 0===nvoid 0n[a];null!=or[o.name]=e[a]r[a]=e[a]}return r},e.prototype.checkInputs=function(e){var t=this,n=Object.keys(e).filter((function(e){var n=d(N(e),1)[0];return null==t.graph.nodes[n]}));if(n.length0)throw new Error(The dict provided in model.execute(dict) has +keys [.concat(n,] that are not part of graph))},e.prototype.mapOutputs=function(e){var t=this;return e.map((function(e){var n,r,a=null===(r=null===(n=t._signature)void 0===nvoid 0n.outputs)void 0===rvoid 0r[e];return null!=aa.namee}),{})},e.prototype.checkOutputs=function(e){var t=this;e.forEach((function(e){var n=d(N(e),1)[0];if(!t.graph.nodes[n])throw new Error(The output '.concat(e,' is not found in the graph))}))},e}(),cu=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.hashTableNameToHandle=e,this.hashTableMap=t}return e.prototype.addHashTable=function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t},e.prototype.getHashTableHandleByName=function(e){return this.hashTableNameToHandle[e]},e.prototype.getHashTableById=function(e){return this.hashTableMap[e]},e.prototype.dispose=function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]},e}(),pu={float324,float162,int324,uint162,uint81,bool1,complex648};function lu(e,t){return c(this,void 0,void 0,(function(){var n,r,a,o,s,i,u,c;return p(this,(function(p){switch(p.label){case 0return n=pe(e.shape),quantizationin e(a=e.quantization,r=pu[a.dtype],[3,7])[3,1];case 1if(string!==e.dtype)return[3,6];o=0,s=0,p.label=2;case 2return sn(i=o,u=4,c=Uint32Array.bind,[4,t(o,o+4)])[3,5];case 3o=i+(u+(new(c.apply(Uint32Array,[void 0,p.sent()])))[0]),p.label=4;case 4return s++,[3,2];case 5return[2,o];case 6r=pu[e.dtype],p.label=7;case 7return[2,nr]}}))}))}function du(e,t){var n,r,a,o,s=e.name,i=e.dtype,u=e.shape,c=pe(u),p=0;if(quantizationin e){var l=e.quantization;if(uint8===l.dtypeuint16===l.dtype){if(!(minin l)!(scalein l))throw new Error(Weight .concat(e.name, with quantization ).concat(l.dtype, )+doesn't have corresponding metadata min and scale.)}else{if(float16!==l.dtype)throw new Error(Weight .concat(e.name, has unknown )+quantization dtype .concat(l.dtype,. )+Supported quantization dtypes are 'uint8', 'uint16', and 'float16'.);if(float32!==i)throw new Error(Weight .concat(e.name, is quantized with ).concat(l.dtype, )+which only supports weights of type float32 not .concat(i,.))}var d=pu[l.dtype],h=uint8===l.dtypenew Uint8Array(t)new Uint16Array(t);if(float32===i)if(uint8===l.dtypeuint16===l.dtype){n=new Float32Array(h.length);for(var f=0;fh.length;f++){var m=h[f];n[f]=ml.scale+l.min}}else{if(float16!==l.dtype)throw new Error(Unsupported quantization type .concat(l.dtype, )+for weight type float32.);var y=(r=function(){var e=function(e){for(var t=e13,n=0;0==(8388608&t);)n-=8388608,t=1;return(t&=-8388609)(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(var n=1;n1024;n++)t[n]=e(n);for(n=1024;n2048;n++)t[n]=939524096+(n-102413);return t}(),a=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t31;t++)e[t]=t23;for(t=33;t63;t++)e[t]=2147483648+(t-3223);return e}(),o=function(){for(var e=new Uint32Array(64),t=0;t64;t++)e[t]=1024;return e[0]=e[32]=0,e}(),function(e){for(var t=new ArrayBuffer(4e.length),n=new Uint32Array(t),s=0;se.length;s++){var i=e[s],u=r[o[i10]+(1023&i)]+a[i10];n[s]=u}return new Float32Array(t)});n=y(h)}else{if(int32!==i)throw new Error(Unsupported dtype in weight '.concat(s,' ).concat(i));if(uint8!==l.dtype&&uint16!==l.dtype)throw new Error(Unsupported quantization type .concat(l.dtype, )+for weight type int32.);n=new Int32Array(h.length);for(f=0;fh.length;f++){m=h[f];n[f]=Math.round(ml.scale+l.min)}}p+=cd}else if(string===i){var v=pe(e.shape);n=[];for(f=0;fv;f++){var g=new Uint32Array(t.slice(p,p+4))[0];p+=4;var b=new Uint8Array(t.slice(p,p+g));n.push(b),p+=g}}else{var x=pu[i];if(float32===i)n=new Float32Array(t);else if(int32===i)n=new Int32Array(t);else{if(bool!==i){if(complex64===i){n=new Float32Array(t);var N=new Float32Array(n.length2),w=new Float32Array(n.length2);for(f=0;fN.length;f++)N[f]=n[2f],w[f]=n[2f+1];var k=gs(N,u,float32),T=gs(w,u,float32),S=ur(k,T);return k.dispose(),T.dispose(),S}throw new Error(Unsupported dtype in weight '.concat(s,' ).concat(i))}n=new Uint8Array(t)}p+=cx}return gs(n,u,i)}function hu(e,t,n){return c(this,void 0,void 0,(function(){var r,a,o,s,i,u;return p(this,(function(c){switch(c.label){case 0r=new Uint8Array(t),c.label=1;case 1return r.byteLengthn[4,e.read()][3,3];case 2if(a=c.sent(),o=a.done,s=a.value,o&&null==s)throw i=n-r.byteLength,new Error(Reader is done but .concat(i, bytes are still expected));return(u=new Uint8Array(r.length+s.byteLength)).set(r,0),u.set(new Uint8Array(s),r.length),r=u,[3,1];case 3return[2,r.buffer]}}))}))}function fu(e,t){return c(this,void 0,void 0,(function(){var n,r,a,o,s,i,u,d,h,f,m,y,v,g=this;return p(this,(function(b){switch(b.label){case 0n={},r=e.getReader(),a=new ArrayBuffer(0),b.label=1;case 1b.trys.push([1,7,8,9]),o=l(t),s=o.next(),b.label=2;case 2return s.done[3,6][4,lu(i=s.value,(function(e,t){return c(g,void 0,void 0,(function(){return p(this,(function(n){switch(n.label){case 0return[4,hu(r,a,t)];case 1return[2,(a=n.sent()).slice(e,t)]}}))}))}))];case 3return u=b.sent(),[4,hu(r,a,u)];case 4a=b.sent(),d=a.slice(0,u),a=a.slice(u),h=du(i,d),n[i.name]=h,webgpu===on.backendName&&uploadToGPUin(f=on.backend)&&pe(h.shape)=De().get(WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD)&&f.uploadToGPU(h.dataId),b.label=5;case 5return s=o.next(),[3,2];case 6return[3,9];case 7return m=b.sent(),y={errorm},[3,9];case 8try{s&&!s.done&&(v=o.return)&&v.call(o)}finally{if(y)throw y.error}return[7];case 9return[2,n]}}))}))}var mu=tfjs-format=file,yu=model.json,vu=function(){function e(e,n,r){void 0===n&&(n={}),void 0===r&&(r=t.io),this.modelUrl=e,this.loadOptions=n,this.version=na,this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new cu}return Object.defineProperty(e.prototype,modelVersion,{getfunction(){return this.version},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,inputNodes,{getfunction(){return this.executor.inputNodes},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,outputNodes,{getfunction(){return this.executor.outputNodes},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,inputs,{getfunction(){return this.executor.inputs},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,outputs,{getfunction(){return this.executor.outputs},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,weights,{getfunction(){return this.executor.weightMap},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,metadata,{getfunction(){return this.artifacts.userDefinedMetadata},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,modelSignature,{getfunction(){return this.signature},enumerable!1,configurable!0}),Object.defineProperty(e.prototype,modelStructuredOutputKeys,{getfunction(){return this.structuredOutputKeys},enumerable!1,configurable!0}),e.prototype.findIOHandler=function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length1)throw new Error(Found more than one (.concat(t.length,) load handlers for )+URL '.concat([e],'));this.handler=t[0]}},e.prototype.load=function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error(Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.);var n=this.handler.load();return t.util.isPromise(n)n.then((function(t){return null==t.getWeightStreame.loadSync(t)e.loadStreaming(t)}))this.loadSync(n)},e.prototype.loadSync=function(e){var t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)},e.prototype.loadStreaming=function(e){return c(this,void 0,void 0,(function(){var t;return p(this,(function(n){switch(n.label){case 0if(null==e.getWeightStream)throw new Error(Model artifacts missing streamWeights function);return[4,fu(e.getWeightStream(),e.weightSpecs)];case 1return t=n.sent(),[2,this.loadWithWeightMap(e,t)]}}))}))},e.prototype.loadWithWeightMap=function(e,t){this.artifacts=e;var n=this.artifacts.modelTopology,r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var a=this.artifacts.userDefinedMetadata;null!=a.signature&&(r=a.signature),null!=a.structuredOutputKeys&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=r,this.version=.concat(n.versions.producer,.).concat(n.versions.minConsumer),this.executor=new uu(q.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var o=q.Instance.transformGraph(e.modelInitializer);this.initializer=new uu(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0},e.prototype.save=function(e,t){return c(this,void 0,void 0,(function(){var t;return p(this,(function(n){if(string==typeof e){if(0===(t=this.io.getSaveHandlers(e)).length)throw new Error(Cannot find any save handlers for URL '.concat(e,'));if(t.length1)throw new Error(Found more than one (.concat(t.length,) save handlers for )+URL '.concat(e,'));e=t[0]}if(null==e.save)throw new Error(GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.);return[2,e.save(this.artifacts)]}))}))},e.prototype.addStructuredOutputNames=function(e){var n=this;if(this.structuredOutputKeys){var r=e instanceof t.Tensor[e]e,a={};return r.forEach((function(e,t){return a[n.structuredOutputKeys[t]]=e})),a}return e},e.prototype.predict=function(e,t){var n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)},e.prototype.predictAsync=function(e,t){return c(this,void 0,void 0,(function(){var t;return p(this,(function(n){switch(n.label){case 0return[4,this.executeAsync(e,this.outputNodes)];case 1return t=n.sent(),[2,this.addStructuredOutputNames(t)]}}))}))},e.prototype.normalizeInputs=function(e){var n,r=this;if(!(e instanceof t.TensorArray.isArray(e))){var a=null===(n=this.signature)void 0===nvoid 0n.inputs;if(null!=a)for(var o in a){var s=a[o];null!=s.resourceId&&(e[o]=this.resourceIdToCapturedInput[s.resourceId])}return e}e=Array.isArray(e)e[e];var i=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+i!==this.inputNodes.length)throw new Error(Input tensor count mismatch, the graph model has .concat(this.inputNodes.length-i, non-resource placeholders, while there are ).concat(e.length, input tensors provided.));var u=0;return this.inputNodes.reduce((function(t,n){var a,o,s,i=null===(s=null===(o=null===(a=r.signature)void 0===avoid 0a.inputs)void 0===ovoid 0o[n])void 0===svoid 0s.resourceId;return t[n]=null!=ir.resourceIdToCapturedInput[i]e[u++],t}),{})},e.prototype.normalizeOutputs=function(e){return e=ethis.outputNodes,Array.isArray(e)e[e]},e.prototype.executeInitializerGraph=function(){return null==this.initializer[]null==this.initializerSignaturethis.initializer.execute({},[])this.initializer.execute({},Object.keys(this.initializerSignature.outputs))},e.prototype.executeInitializerGraphAsync=function(){return c(this,void 0,void 0,(function(){return p(this,(function(e){return null==this.initializer[2,[]]null==this.initializerSignature[2,this.initializer.executeAsync({},[])][2,this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))]}))}))},e.prototype.setResourceIdToCapturedInput=function(e){if(this.resourceIdToCapturedInput={},this.initializerSignature)for(var t=this.initializerSignature.outputs,n=Object.keys(t),r=0;rn.length;r++){var a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}},e.prototype.execute=function(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length1nn[0]},e.prototype.executeAsync=function(e,t){return c(this,void 0,void 0,(function(){var n,r;return p(this,(function(a){switch(a.label){case 0return null!=this.resourceIdToCapturedInput[3,2](n=this.setResourceIdToCapturedInput,[4,this.executeInitializerGraphAsync()]);case 1n.apply(this,[a.sent()]),a.label=2;case 2return e=this.normalizeInputs(e),t=this.normalizeOutputs(t),[4,this.executor.executeAsync(e,t)];case 3return[2,(r=a.sent()).length1rr[0]]}}))}))},e.prototype.getIntermediateTensors=function(){return this.executor.getIntermediateTensors()},e.prototype.disposeIntermediateTensors=function(){this.executor.disposeIntermediateTensors()},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})},e.prototype.dispose=function(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&t.dispose(this.resourceIdToCapturedInput)),this.resourceManager.dispose()},e}();e.GraphModel=vu,e.deregisterOp=function(e){delete f[e]},e.loadGraphModel=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r=t.io),c(this,void 0,void 0,(function(){var t;return p(this,(function(a){switch(a.label){case 0if(null==e)throw new Error(modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model);return null==n&&(n={}),n.fromTFHub&&string==typeof e&&(e=function(e){e.endsWith()(e+=);return.concat(e).concat(yu).concat(mu)}(e)),[4,(t=new vu(e,n,r)).load()];case 1return a.sent(),[2,t]}}))}))},e.loadGraphModelSync=function(e){if(null==e)throw new Error(modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model);var n;if(e instanceof Array){var r=d(e,2),a=r[0],o=r[1];if(!a)throw new Error(modelJSON must be the first element of the array);if(!(o&&o instanceof ArrayBuffer))throw new Error(An ArrayBuffer of weights must be the second element of the array);if(!(modelTopologyin a))throw new Error(Model JSON is missing 'modelTopology');if(!(weightsManifestin a))throw new Error(Model JSON is missing 'weightsManifest');var s=t.io.getWeightSpecs(a.weightsManifest),i=t.io.getModelArtifactsForJSONSync(a,s,o);n=t.io.fromMemorySync(i)}else if(loadin e)n=e;else{if(!(modelTopologyin e&&weightSpecsin e&&weightDatain e))throw new Error(Unknown model format);n=t.io.fromMemorySync(e)}var u=new vu(n);return u.load(),u},e.registerOp=function(e,t){var n={tfOpNamee,categorycustom,inputs[],attrs[],customExecutort};f[e]=n},e.version_converter=4.22.0}));
# sourceMappingURL=tf-converter.min.js.map